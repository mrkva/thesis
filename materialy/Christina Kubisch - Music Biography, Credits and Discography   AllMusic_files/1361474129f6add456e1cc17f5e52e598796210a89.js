
(function($){"use strict";var managed={},cache={};$.manageAjax=(function(){function create(name,opts){managed[name]=new $.manageAjax._manager(name,opts);return managed[name];}
function destroy(name){if(managed[name]){managed[name].clear(true);delete managed[name];}}
var publicFns={create:create,destroy:destroy};return publicFns;})();$.manageAjax._manager=function(name,opts){this.requests={};this.inProgress=0;this.name=name;this.qName=name;this.opts=$.extend({},$.manageAjax.defaults,opts);if(opts&&opts.queue&&opts.queue!==true&&typeof opts.queue==='string'&&opts.queue!=='clear'){this.qName=opts.queue;}};$.manageAjax._manager.prototype={add:function(url,o){if(typeof url=='object'){o=url;}else if(typeof url=='string'){o=$.extend(o||{},{url:url});}
o=$.extend({},this.opts,o);var origCom=o.complete||$.noop,origSuc=o.success||$.noop,beforeSend=o.beforeSend||$.noop,origError=o.error||$.noop,strData=(typeof o.data=='string')?o.data:$.param(o.data||{}),xhrID=o.type+o.url+strData,that=this,ajaxFn=this._createAjax(xhrID,o,origSuc,origCom);if(o.preventDoubleRequests&&o.queueDuplicateRequests){if(o.preventDoubleRequests){o.queueDuplicateRequests=false;}
setTimeout(function(){throw("preventDoubleRequests and queueDuplicateRequests can't be both true");},0);}
if(this.requests[xhrID]&&o.preventDoubleRequests){return;}
ajaxFn.xhrID=xhrID;o.xhrID=xhrID;o.beforeSend=function(xhr,opts){var ret=beforeSend.call(this,xhr,opts);if(ret===false){that._removeXHR(xhrID);}
xhr=null;return ret;};o.complete=function(xhr,status){that._complete.call(that,this,origCom,xhr,status,xhrID,o);xhr=null;};o.success=function(data,status,xhr){that._success.call(that,this,origSuc,data,status,xhr,o);xhr=null;};o.error=function(ahr,status,errorStr){var httpStatus='',content='';if(status!=='timeout'&&ahr){httpStatus=ahr.status;content=ahr.responseXML||ahr.responseText;}
if(origError){origError.call(this,ahr,status,errorStr,o);}else{setTimeout(function(){throw status+'| status: '+httpStatus+' | URL: '+o.url+' | data: '+strData+' | thrown: '+errorStr+' | response: '+content;},0);}
ahr=null;};if(o.queue==='clear'){$(document).clearQueue(this.qName);}
if(o.queue||(o.queueDuplicateRequests&&this.requests[xhrID])){$.queue(document,this.qName,ajaxFn);if(this.inProgress<o.maxRequests&&(!this.requests[xhrID]||!o.queueDuplicateRequests)){$.dequeue(document,this.qName);}
return xhrID;}
return ajaxFn();},_createAjax:function(id,o,origSuc,origCom){var that=this;return function(){if(o.beforeCreate.call(o.context||that,id,o)===false){return;}
that.inProgress++;if(that.inProgress===1){$.event.trigger(that.name+'AjaxStart');}
if(o.cacheResponse&&cache[id]){if(!cache[id].cacheTTL||cache[id].cacheTTL<0||((new Date().getTime()-cache[id].timestamp)<cache[id].cacheTTL)){that.requests[id]={};setTimeout(function(){that._success.call(that,o.context||o,origSuc,cache[id]._successData,'success',cache[id],o);that._complete.call(that,o.context||o,origCom,cache[id],'success',id,o);},0);}else{delete cache[id];}}
if(!o.cacheResponse||!cache[id]){if(o.async){that.requests[id]=$.ajax(o);}else{$.ajax(o);}}
return id;};},_removeXHR:function(xhrID){if(this.opts.queue||this.opts.queueDuplicateRequests){$.dequeue(document,this.qName);}
this.inProgress--;this.requests[xhrID]=null;delete this.requests[xhrID];},clearCache:function(){cache={};},_isAbort:function(xhr,status,o){if(!o.abortIsNoSuccess||(!xhr&&!status)){return false;}
var ret=!!((!xhr||xhr.readyState===0||this.lastAbort===o.xhrID));xhr=null;return ret;},_complete:function(context,origFn,xhr,status,xhrID,o){if(this._isAbort(xhr,status,o)){status='abort';o.abort.call(context,xhr,status,o);}
origFn.call(context,xhr,status,o);$.event.trigger(this.name+'AjaxComplete',[xhr,status,o]);if(o.domCompleteTrigger){$(o.domCompleteTrigger).trigger(this.name+'DOMComplete',[xhr,status,o]).trigger('DOMComplete',[xhr,status,o]);}
this._removeXHR(xhrID);if(!this.inProgress){$.event.trigger(this.name+'AjaxStop');}
xhr=null;},_success:function(context,origFn,data,status,xhr,o){var that=this;if(this._isAbort(xhr,status,o)){xhr=null;return;}
if(o.abortOld){$.each(this.requests,function(name){if(name===o.xhrID){return false;}
that.abort(name);});}
if(o.cacheResponse&&!cache[o.xhrID]){if(!xhr){xhr={};}
cache[o.xhrID]={status:xhr.status,statusText:xhr.statusText,responseText:xhr.responseText,responseXML:xhr.responseXML,_successData:data,cacheTTL:o.cacheTTL,timestamp:new Date().getTime()};if('getAllResponseHeaders'in xhr){var responseHeaders=xhr.getAllResponseHeaders();var parsedHeaders;var parseHeaders=function(){if(parsedHeaders){return;}
parsedHeaders={};$.each(responseHeaders.split("\n"),function(i,headerLine){var delimiter=headerLine.indexOf(":");parsedHeaders[headerLine.substr(0,delimiter)]=headerLine.substr(delimiter+2);});};$.extend(cache[o.xhrID],{getAllResponseHeaders:function(){return responseHeaders;},getResponseHeader:function(name){parseHeaders();return(name in parsedHeaders)?parsedHeaders[name]:null;}});}}
origFn.call(context,data,status,xhr,o);$.event.trigger(this.name+'AjaxSuccess',[xhr,o,data]);if(o.domSuccessTrigger){$(o.domSuccessTrigger).trigger(this.name+'DOMSuccess',[data,o]).trigger('DOMSuccess',[data,o]);}
xhr=null;},getData:function(id){if(id){var ret=this.requests[id];if(!ret&&this.opts.queue){ret=$.grep($(document).queue(this.qName),function(fn,i){return(fn.xhrID===id);})[0];}
return ret;}
return{requests:this.requests,queue:(this.opts.queue)?$(document).queue(this.qName):[],inProgress:this.inProgress};},abort:function(id){var xhr;if(id){xhr=this.getData(id);if(xhr&&xhr.abort){this.lastAbort=id;xhr.abort();this.lastAbort=false;}else{$(document).queue(this.qName,$.grep($(document).queue(this.qName),function(fn,i){return(fn!==xhr);}));}
xhr=null;return;}
var that=this,ids=[];$.each(this.requests,function(id){ids.push(id);});$.each(ids,function(i,id){that.abort(id);});},clear:function(shouldAbort){$(document).clearQueue(this.qName);if(shouldAbort){this.abort();}}};$.manageAjax._manager.prototype.getXHR=$.manageAjax._manager.prototype.getData;$.manageAjax.defaults={beforeCreate:$.noop,abort:$.noop,abortIsNoSuccess:true,maxRequests:1,cacheResponse:false,async:true,domCompleteTrigger:false,domSuccessTrigger:false,preventDoubleRequests:true,queueDuplicateRequests:false,cacheTTL:-1,queue:false};$.each($.manageAjax._manager.prototype,function(n,fn){if(n.indexOf('_')===0||!$.isFunction(fn)){return;}
$.manageAjax[n]=function(name,o){if(!managed[name]){if(n==='add'){$.manageAjax.create(name,o);}else{return;}}
var args=Array.prototype.slice.call(arguments,1);managed[name][n].apply(managed[name],args);};});})(jQuery);

jQuery.easing['jswing']=jQuery.easing['swing'];jQuery.extend(jQuery.easing,{def:'easeOutQuad',swing:function(x,t,b,c,d){return jQuery.easing[jQuery.easing.def](x,t,b,c,d);},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b;},easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b;},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*((--t)*(t-2)-1)+b;},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b;},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b;},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t+b;return c/2*((t-=2)*t*t+2)+b;},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b;},easeOutQuart:function(x,t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b;},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t+b;return-c/2*((t-=2)*t*t*t-2)+b;},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b;},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b;},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t*t+b;return c/2*((t-=2)*t*t*t*t+2)+b;},easeInSine:function(x,t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b;},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b;},easeInOutSine:function(x,t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b;},easeInExpo:function(x,t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d-1))+b;},easeOutExpo:function(x,t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b;},easeInOutExpo:function(x,t,b,c,d){if(t==0)return b;if(t==d)return b+c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t-1))+b;return c/2*(-Math.pow(2,-10*--t)+2)+b;},easeInCirc:function(x,t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b;},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b;},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1)return-c/2*(Math.sqrt(1-t*t)-1)+b;return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b;},easeInElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;},easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b;},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d/2)==2)return b+c;if(!p)p=d*(.3*1.5);if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*.5+c+b;},easeInBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*(t/=d)*t*((s+1)*t-s)+b;},easeOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b;},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;if((t/=d/2)<1)return c/2*(t*t*(((s*=(1.525))+1)*t-s))+b;return c/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b;},easeInBounce:function(x,t,b,c,d){return c-jQuery.easing.easeOutBounce(x,d-t,0,c,d)+b;},easeOutBounce:function(x,t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b;}else if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+.75)+b;}else if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+.9375)+b;}else{return c*(7.5625*(t-=(2.625/2.75))*t+.984375)+b;}},easeInOutBounce:function(x,t,b,c,d){if(t<d/2)return jQuery.easing.easeInBounce(x,t*2,0,c,d)*.5+b;return jQuery.easing.easeOutBounce(x,t*2-d,0,c,d)*.5+c*.5+b;}});

(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}
else{factory(jQuery);}}
(function($){"use strict";var TRUE=true,FALSE=false,NULL=null,undefined,QTIP,PLUGINS,MOUSE,usedIDs={},uitooltip='ui-tooltip',widget='ui-widget',disabled='ui-state-disabled',selector='div.qtip.'+uitooltip,defaultClass=uitooltip+'-default',focusClass=uitooltip+'-focus',hoverClass=uitooltip+'-hover',fluidClass=uitooltip+'-fluid',hideOffset='-31000px',replaceSuffix='_replacedByqTip',oldtitle='oldtitle',trackingBound;function log(){log.history=log.history||[];log.history.push(arguments);if('object'===typeof console){var c=console[console.warn?'warn':'log'],args=Array.prototype.slice.call(arguments),a;if(typeof arguments[0]==='string'){args[0]='qTip2: '+args[0];}
a=c.apply?c.apply(console,args):c(args);}}
function sanitizeOptions(opts)
{var content;if(!opts||'object'!==typeof opts){return FALSE;}
if(opts.metadata===NULL||'object'!==typeof opts.metadata){opts.metadata={type:opts.metadata};}
if('content'in opts){if(opts.content===NULL||'object'!==typeof opts.content||opts.content.jquery){opts.content={text:opts.content};}
content=opts.content.text||FALSE;if(!$.isFunction(content)&&((!content&&!content.attr)||content.length<1||('object'===typeof content&&!content.jquery))){opts.content.text=FALSE;}
if('title'in opts.content){if(opts.content.title===NULL||'object'!==typeof opts.content.title){opts.content.title={text:opts.content.title};}
content=opts.content.title.text||FALSE;if(!$.isFunction(content)&&((!content&&!content.attr)||content.length<1||('object'===typeof content&&!content.jquery))){opts.content.title.text=FALSE;}}}
if('position'in opts){if(opts.position===NULL||'object'!==typeof opts.position){opts.position={my:opts.position,at:opts.position};}}
if('show'in opts){if(opts.show===NULL||'object'!==typeof opts.show){if(opts.show.jquery){opts.show={target:opts.show};}
else{opts.show={event:opts.show};}}}
if('hide'in opts){if(opts.hide===NULL||'object'!==typeof opts.hide){if(opts.hide.jquery){opts.hide={target:opts.hide};}
else{opts.hide={event:opts.hide};}}}
if('style'in opts){if(opts.style===NULL||'object'!==typeof opts.style){opts.style={classes:opts.style};}}
$.each(PLUGINS,function(){if(this.sanitize){this.sanitize(opts);}});return opts;}
function QTip(target,options,id,attr)
{var self=this,docBody=document.body,tooltipID=uitooltip+'-'+id,isPositioning=0,isDrawing=0,tooltip=$(),namespace='.qtip-'+id,elements,cache;self.id=id;self.rendered=FALSE;self.elements=elements={target:target};self.timers={img:{}};self.options=options;self.checks={};self.plugins={};self.cache=cache={event:{},target:$(),disabled:FALSE,attr:attr,onTarget:FALSE};function convertNotation(notation)
{var i=0,obj,option=options,levels=notation.split('.');while(option=option[levels[i++]]){if(i<levels.length){obj=option;}}
return[obj||options,levels.pop()];}
function setWidget(){var on=options.style.widget;tooltip.toggleClass(widget,on).toggleClass(defaultClass,options.style.def&&!on);elements.content.toggleClass(widget+'-content',on);if(elements.titlebar){elements.titlebar.toggleClass(widget+'-header',on);}
if(elements.button){elements.button.toggleClass(uitooltip+'-icon',!on);}}
function removeTitle(reposition)
{if(elements.title){elements.titlebar.remove();elements.titlebar=elements.title=elements.button=NULL;if(reposition!==FALSE){self.reposition();}}}
function createButton()
{var button=options.content.title.button,isString=typeof button==='string',close=isString?button:'Close tooltip';if(elements.button){elements.button.remove();}
if(button.jquery){elements.button=button;}
else{elements.button=$('<a />',{'class':'ui-state-default ui-tooltip-close '+(options.style.widget?'':uitooltip+'-icon'),'title':close,'aria-label':close}).prepend($('<span />',{'class':'ui-icon ui-icon-close','html':'&times;'}));}
elements.button.appendTo(elements.titlebar).attr('role','button').click(function(event){if(!tooltip.hasClass(disabled)){self.hide(event);}
return FALSE;});self.redraw();}
function createTitle()
{var id=tooltipID+'-title';if(elements.titlebar){removeTitle();}
elements.titlebar=$('<div />',{'class':uitooltip+'-titlebar '+(options.style.widget?'ui-widget-header':'')}).append(elements.title=$('<div />',{'id':id,'class':uitooltip+'-title','aria-atomic':TRUE})).insertBefore(elements.content).delegate('.ui-tooltip-close','mousedown keydown mouseup keyup mouseout',function(event){$(this).toggleClass('ui-state-active ui-state-focus',event.type.substr(-4)==='down');}).delegate('.ui-tooltip-close','mouseover mouseout',function(event){$(this).toggleClass('ui-state-hover',event.type==='mouseover');});if(options.content.title.button){createButton();}
else if(self.rendered){self.redraw();}}
function updateButton(button)
{var elem=elements.button,title=elements.title;if(!self.rendered){return FALSE;}
if(!button){elem.remove();}
else{if(!title){createTitle();}
createButton();}}
function updateTitle(content,reposition)
{var elem=elements.title;if(!self.rendered||!content){return FALSE;}
if($.isFunction(content)){content=content.call(target,cache.event,self);}
if(content===FALSE||(!content&&content!=='')){return removeTitle(FALSE);}
else if(content.jquery&&content.length>0){elem.empty().append(content.css({display:'block'}));}
else{elem.html(content);}
self.redraw();if(reposition!==FALSE&&self.rendered&&tooltip[0].offsetWidth>0){self.reposition(cache.event);}}
function updateContent(content,reposition)
{var elem=elements.content;if(!self.rendered||!content){return FALSE;}
if($.isFunction(content)){content=content.call(target,cache.event,self)||'';}
if(content.jquery&&content.length>0){elem.empty().append(content.css({display:'block'}));}
else{elem.html(content);}
function detectImages(next){var images,srcs={};function imageLoad(image){if(image){delete srcs[image.src];clearTimeout(self.timers.img[image.src]);$(image).unbind(namespace);}
if($.isEmptyObject(srcs)){self.redraw();if(reposition!==FALSE){self.reposition(cache.event);}
next();}}
if((images=elem.find('img[src]:not([height]):not([width])')).length===0){return imageLoad();}
images.each(function(i,elem){if(srcs[elem.src]!==undefined){return;}
var iterations=0,maxIterations=3;(function timer(){if(elem.height||elem.width||(iterations>maxIterations)){return imageLoad(elem);}
iterations+=1;self.timers.img[elem.src]=setTimeout(timer,700);}());$(elem).bind('error'+namespace+' load'+namespace,function(){imageLoad(this);});srcs[elem.src]=elem;});}
if(self.rendered<0){tooltip.queue('fx',detectImages);}
else{isDrawing=0;detectImages($.noop);}
return self;}
function assignEvents()
{var posOptions=options.position,targets={show:options.show.target,hide:options.hide.target,viewport:$(posOptions.viewport),document:$(document),body:$(document.body),window:$(window)},events={show:$.trim(''+options.show.event).split(' '),hide:$.trim(''+options.hide.event).split(' ')},IE6=$.browser.msie&&parseInt($.browser.version,10)===6;function showMethod(event)
{if(tooltip.hasClass(disabled)){return FALSE;}
clearTimeout(self.timers.show);clearTimeout(self.timers.hide);var callback=function(){self.toggle(TRUE,event);};if(options.show.delay>0){self.timers.show=setTimeout(callback,options.show.delay);}
else{callback();}}
function hideMethod(event)
{if(tooltip.hasClass(disabled)||isPositioning||isDrawing){return FALSE;}
var relatedTarget=$(event.relatedTarget||event.target),ontoTooltip=relatedTarget.closest(selector)[0]===tooltip[0],ontoTarget=relatedTarget[0]===targets.show[0];clearTimeout(self.timers.show);clearTimeout(self.timers.hide);if((posOptions.target==='mouse'&&ontoTooltip)||(options.hide.fixed&&((/mouse(out|leave|move)/).test(event.type)&&(ontoTooltip||ontoTarget)))){try{event.preventDefault();event.stopImmediatePropagation();}catch(e){}return;}
if(options.hide.delay>0){self.timers.hide=setTimeout(function(){self.hide(event);},options.hide.delay);}
else{self.hide(event);}}
function inactiveMethod(event)
{if(tooltip.hasClass(disabled)){return FALSE;}
clearTimeout(self.timers.inactive);self.timers.inactive=setTimeout(function(){self.hide(event);},options.hide.inactive);}
function repositionMethod(event){if(self.rendered&&tooltip[0].offsetWidth>0){self.reposition(event);}}
tooltip.bind('mouseenter'+namespace+' mouseleave'+namespace,function(event){var state=event.type==='mouseenter';if(state){self.focus(event);}
tooltip.toggleClass(hoverClass,state);});if(options.hide.fixed){targets.hide=targets.hide.add(tooltip);tooltip.bind('mouseover'+namespace,function(){if(!tooltip.hasClass(disabled)){clearTimeout(self.timers.hide);}});}
if(/mouse(out|leave)/i.test(options.hide.event)){if(options.hide.leave==='window'){targets.window.bind('mouseout'+namespace+' blur'+namespace,function(event){if(/select|option/.test(event.target)&&!event.relatedTarget){self.hide(event);}});}}
else if(/mouse(over|enter)/i.test(options.show.event)){targets.hide.bind('mouseleave'+namespace,function(event){clearTimeout(self.timers.show);});}
if((''+options.hide.event).indexOf('unfocus')>-1){posOptions.container.closest('html').bind('mousedown'+namespace,function(event){var elem=$(event.target),enabled=self.rendered&&!tooltip.hasClass(disabled)&&tooltip[0].offsetWidth>0,isAncestor=elem.parents(selector).filter(tooltip[0]).length>0;if(elem[0]!==target[0]&&elem[0]!==tooltip[0]&&!isAncestor&&!target.has(elem[0]).length&&!elem.attr('disabled')){self.hide(event);}});}
if('number'===typeof options.hide.inactive){targets.show.bind('qtip-'+id+'-inactive',inactiveMethod);$.each(QTIP.inactiveEvents,function(index,type){targets.hide.add(elements.tooltip).bind(type+namespace+'-inactive',inactiveMethod);});}
$.each(events.hide,function(index,type){var showIndex=$.inArray(type,events.show),targetHide=$(targets.hide);if((showIndex>-1&&targetHide.add(targets.show).length===targetHide.length)||type==='unfocus')
{targets.show.bind(type+namespace,function(event){if(tooltip[0].offsetWidth>0){hideMethod(event);}
else{showMethod(event);}});delete events.show[showIndex];}
else{targets.hide.bind(type+namespace,hideMethod);}});$.each(events.show,function(index,type){targets.show.bind(type+namespace,showMethod);});if('number'===typeof options.hide.distance){targets.show.add(tooltip).bind('mousemove'+namespace,function(event){var origin=cache.origin||{},limit=options.hide.distance,abs=Math.abs;if(abs(event.pageX-origin.pageX)>=limit||abs(event.pageY-origin.pageY)>=limit){self.hide(event);}});}
if(posOptions.target==='mouse'){targets.show.bind('mousemove'+namespace,function(event){MOUSE={pageX:event.pageX,pageY:event.pageY,type:'mousemove'};});if(posOptions.adjust.mouse){if(options.hide.event){tooltip.bind('mouseleave'+namespace,function(event){if((event.relatedTarget||event.target)!==targets.show[0]){self.hide(event);}});elements.target.bind('mouseenter'+namespace+' mouseleave'+namespace,function(event){cache.onTarget=event.type==='mouseenter';});}
targets.document.bind('mousemove'+namespace,function(event){if(self.rendered&&cache.onTarget&&!tooltip.hasClass(disabled)&&tooltip[0].offsetWidth>0){self.reposition(event||MOUSE);}});}}
if(posOptions.adjust.resize||targets.viewport.length){($.event.special.resize?targets.viewport:targets.window).bind('resize'+namespace,repositionMethod);}
if(targets.viewport.length||(IE6&&tooltip.css('position')==='fixed')){targets.viewport.bind('scroll'+namespace,repositionMethod);}}
function unassignEvents()
{var targets=[options.show.target[0],options.hide.target[0],self.rendered&&elements.tooltip[0],options.position.container[0],options.position.viewport[0],window,document];if(self.rendered){$([]).pushStack($.grep(targets,function(i){return typeof i==='object';})).unbind(namespace);}
else{options.show.target.unbind(namespace+'-create');}}
self.checks.builtin={'^id$':function(obj,o,v){var id=v===TRUE?QTIP.nextid:v,tooltipID=uitooltip+'-'+id;if(id!==FALSE&&id.length>0&&!$('#'+tooltipID).length){tooltip[0].id=tooltipID;elements.content[0].id=tooltipID+'-content';elements.title[0].id=tooltipID+'-title';}},'^content.text$':function(obj,o,v){updateContent(v);},'^content.title.text$':function(obj,o,v){if(!v){return removeTitle();}
if(!elements.title&&v){createTitle();}
updateTitle(v);},'^content.title.button$':function(obj,o,v){updateButton(v);},'^position.(my|at)$':function(obj,o,v){if('string'===typeof v){obj[o]=new PLUGINS.Corner(v);}},'^position.container$':function(obj,o,v){if(self.rendered){tooltip.appendTo(v);}},'^show.ready$':function(){if(!self.rendered){self.render(1);}
else{self.toggle(TRUE);}},'^style.classes$':function(obj,o,v){tooltip.attr('class',uitooltip+' qtip ui-helper-reset '+v);},'^style.widget|content.title':setWidget,'^events.(render|show|move|hide|focus|blur)$':function(obj,o,v){tooltip[($.isFunction(v)?'':'un')+'bind']('tooltip'+o,v);},'^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)':function(){var posOptions=options.position;tooltip.attr('tracking',posOptions.target==='mouse'&&posOptions.adjust.mouse);unassignEvents();assignEvents();}};$.extend(self,{render:function(show)
{if(self.rendered){return self;}
var text=options.content.text,title=options.content.title.text,posOptions=options.position,callback=$.Event('tooltiprender');$.attr(target[0],'aria-describedby',tooltipID);tooltip=elements.tooltip=$('<div/>',{'id':tooltipID,'class':uitooltip+' qtip ui-helper-reset '+defaultClass+' '+options.style.classes+' '+uitooltip+'-pos-'+options.position.my.abbrev(),'width':options.style.width||'','height':options.style.height||'','tracking':posOptions.target==='mouse'&&posOptions.adjust.mouse,'role':'alert','aria-live':'polite','aria-atomic':FALSE,'aria-describedby':tooltipID+'-content','aria-hidden':TRUE}).toggleClass(disabled,cache.disabled).data('qtip',self).appendTo(options.position.container).append(elements.content=$('<div />',{'class':uitooltip+'-content','id':tooltipID+'-content','aria-atomic':TRUE}));self.rendered=-1;isDrawing=1;isPositioning=1;if(title){createTitle();if(!$.isFunction(title)){updateTitle(title,FALSE);}}
if(!$.isFunction(text)){updateContent(text,FALSE);}
self.rendered=TRUE;setWidget();$.each(options.events,function(name,callback){if($.isFunction(callback)){tooltip.bind(name==='toggle'?'tooltipshow tooltiphide':'tooltip'+name,callback);}});$.each(PLUGINS,function(){if(this.initialize==='render'){this(self);}});assignEvents();tooltip.queue('fx',function(next){callback.originalEvent=cache.event;tooltip.trigger(callback,[self]);isDrawing=0;isPositioning=0;self.redraw();if(options.show.ready||show){self.toggle(TRUE,cache.event,FALSE);}
next();});return self;},get:function(notation)
{var result,o;switch(notation.toLowerCase())
{case'dimensions':result={height:tooltip.outerHeight(),width:tooltip.outerWidth()};break;case'offset':result=PLUGINS.offset(tooltip,options.position.container);break;default:o=convertNotation(notation.toLowerCase());result=o[0][o[1]];result=result.precedance?result.string():result;break;}
return result;},set:function(option,value)
{var rmove=/^position\.(my|at|adjust|target|container)|style|content|show\.ready/i,rdraw=/^content\.(title|attr)|style/i,reposition=FALSE,redraw=FALSE,checks=self.checks,name;function callback(notation,args){var category,rule,match;for(category in checks){for(rule in checks[category]){if(match=(new RegExp(rule,'i')).exec(notation)){args.push(match);checks[category][rule].apply(self,args);}}}}
if('string'===typeof option){name=option;option={};option[name]=value;}
else{option=$.extend(TRUE,{},option);}
$.each(option,function(notation,value){var obj=convertNotation(notation.toLowerCase()),previous;previous=obj[0][obj[1]];obj[0][obj[1]]='object'===typeof value&&value.nodeType?$(value):value;option[notation]=[obj[0],obj[1],value,previous];reposition=rmove.test(notation)||reposition;redraw=rdraw.test(notation)||redraw;});sanitizeOptions(options);isPositioning=isDrawing=1;$.each(option,callback);isPositioning=isDrawing=0;if(self.rendered&&tooltip[0].offsetWidth>0){if(reposition){self.reposition(options.position.target==='mouse'?NULL:cache.event);}
if(redraw){self.redraw();}}
return self;},toggle:function(state,event)
{if(!self.rendered){return state?self.render(1):self;}
var type=state?'show':'hide',opts=options[type],otherOpts=options[!state?'show':'hide'],posOptions=options.position,contentOptions=options.content,visible=tooltip[0].offsetWidth>0,animate=state||opts.target.length===1,sameTarget=!event||opts.target.length<2||cache.target[0]===event.target,delay,callback;if((typeof state).search('boolean|number')){state=!visible;}
if(!tooltip.is(':animated')&&visible===state&&sameTarget){return self;}
if(event){if((/over|enter/).test(event.type)&&(/out|leave/).test(cache.event.type)&&options.show.target.add(event.target).length===options.show.target.length&&tooltip.has(event.relatedTarget).length){return self;}
cache.event=$.extend({},event);}
callback=$.Event('tooltip'+type);callback.originalEvent=event?cache.event:NULL;tooltip.trigger(callback,[self,90]);if(callback.isDefaultPrevented()){return self;}
$.attr(tooltip[0],'aria-hidden',!!!state);if(state){cache.origin=$.extend({},MOUSE);self.focus(event);if($.isFunction(contentOptions.text)){updateContent(contentOptions.text,FALSE);}
if($.isFunction(contentOptions.title.text)){updateTitle(contentOptions.title.text,FALSE);}
if(!trackingBound&&posOptions.target==='mouse'&&posOptions.adjust.mouse){$(document).bind('mousemove.qtip',function(event){MOUSE={pageX:event.pageX,pageY:event.pageY,type:'mousemove'};});trackingBound=TRUE;}
self.reposition(event,arguments[2]);if((callback.solo=!!opts.solo)){$(selector,opts.solo).not(tooltip).qtip('hide',callback);}}
else{clearTimeout(self.timers.show);delete cache.origin;if(trackingBound&&!$(selector+'[tracking="true"]:visible',opts.solo).not(tooltip).length){$(document).unbind('mousemove.qtip');trackingBound=FALSE;}
self.blur(event);}
function after(){if(state){if($.browser.msie){tooltip[0].style.removeAttribute('filter');}
tooltip.css('overflow','');if('string'===typeof opts.autofocus){$(opts.autofocus,tooltip).focus();}
opts.target.trigger('qtip-'+id+'-inactive');}
else{tooltip.css({display:'',visibility:'',opacity:'',left:'',top:''});}
callback=$.Event('tooltip'+(state?'visible':'hidden'));callback.originalEvent=event?cache.event:NULL;tooltip.trigger(callback,[self]);}
if(opts.effect===FALSE||animate===FALSE){tooltip[type]();after.call(tooltip);}
else if($.isFunction(opts.effect)){tooltip.stop(1,1);opts.effect.call(tooltip,self);tooltip.queue('fx',function(n){after();n();});}
else{tooltip.fadeTo(90,state?1:0,after);}
if(state){opts.target.trigger('qtip-'+id+'-inactive');}
return self;},show:function(event){return self.toggle(TRUE,event);},hide:function(event){return self.toggle(FALSE,event);},focus:function(event)
{if(!self.rendered){return self;}
var qtips=$(selector),curIndex=parseInt(tooltip[0].style.zIndex,10),newIndex=QTIP.zindex+qtips.length,cachedEvent=$.extend({},event),focusedElem,callback;if(!tooltip.hasClass(focusClass))
{callback=$.Event('tooltipfocus');callback.originalEvent=cachedEvent;tooltip.trigger(callback,[self,newIndex]);if(!callback.isDefaultPrevented()){if(curIndex!==newIndex){qtips.each(function(){if(this.style.zIndex>curIndex){this.style.zIndex=this.style.zIndex-1;}});qtips.filter('.'+focusClass).qtip('blur',cachedEvent);}
tooltip.addClass(focusClass)[0].style.zIndex=newIndex;}}
return self;},blur:function(event){var cachedEvent=$.extend({},event),callback;tooltip.removeClass(focusClass);callback=$.Event('tooltipblur');callback.originalEvent=cachedEvent;tooltip.trigger(callback,[self]);return self;},reposition:function(event,effect)
{if(!self.rendered||isPositioning){return self;}
isPositioning=1;var target=options.position.target,posOptions=options.position,my=posOptions.my,at=posOptions.at,adjust=posOptions.adjust,method=adjust.method.split(' '),elemWidth=tooltip.outerWidth(),elemHeight=tooltip.outerHeight(),targetWidth=0,targetHeight=0,callback=$.Event('tooltipmove'),fixed=tooltip.css('position')==='fixed',viewport=posOptions.viewport,position={left:0,top:0},container=posOptions.container,flipoffset=FALSE,tip=self.plugins.tip,visible=tooltip[0].offsetWidth>0,readjust={horizontal:method[0],vertical:(method[1]=method[1]||method[0]),enabled:viewport.jquery&&target[0]!==window&&target[0]!==docBody&&adjust.method!=='none',left:function(posLeft){var isShift=readjust.horizontal==='shift',viewportScroll=-container.offset.left+viewport.offset.left+viewport.scrollLeft,myWidth=my.x==='left'?elemWidth:my.x==='right'?-elemWidth:-elemWidth/2,atWidth=at.x==='left'?targetWidth:at.x==='right'?-targetWidth:-targetWidth/2,tipWidth=tip&&tip.size?tip.size.width||0:0,tipAdjust=tip&&tip.corner&&tip.corner.precedance==='x'&&!isShift?tipWidth:0,overflowLeft=viewportScroll-posLeft+tipAdjust,overflowRight=posLeft+elemWidth-viewport.width-viewportScroll+tipAdjust,offset=myWidth-(my.precedance==='x'||my.x===my.y?atWidth:0)-(at.x==='center'?targetWidth/2:0),isCenter=my.x==='center';if(isShift){tipAdjust=tip&&tip.corner&&tip.corner.precedance==='y'?tipWidth:0;offset=(my.x==='left'?1:-1)*myWidth-tipAdjust;position.left+=overflowLeft>0?overflowLeft:overflowRight>0?-overflowRight:0;position.left=Math.max(-container.offset.left+viewport.offset.left+(tipAdjust&&tip.corner.x==='center'?tip.offset:0),posLeft-offset,Math.min(Math.max(-container.offset.left+viewport.offset.left+viewport.width,posLeft+offset),position.left));}
else{if(overflowLeft>0&&(my.x!=='left'||overflowRight>0)){position.left-=offset;}
else if(overflowRight>0&&(my.x!=='right'||overflowLeft>0)){position.left-=isCenter?-offset:offset;}
if(position.left!==posLeft&&isCenter){position.left-=adjust.x;}
if(position.left<viewportScroll&&-position.left>overflowRight){position.left=posLeft;}}
return position.left-posLeft;},top:function(posTop){var isShift=readjust.vertical==='shift',viewportScroll=-container.offset.top+viewport.offset.top+viewport.scrollTop,myHeight=my.y==='top'?elemHeight:my.y==='bottom'?-elemHeight:-elemHeight/2,atHeight=at.y==='top'?targetHeight:at.y==='bottom'?-targetHeight:-targetHeight/2,tipHeight=tip&&tip.size?tip.size.height||0:0,tipAdjust=tip&&tip.corner&&tip.corner.precedance==='y'&&!isShift?tipHeight:0,overflowTop=viewportScroll-posTop+tipAdjust,overflowBottom=posTop+elemHeight-viewport.height-viewportScroll+tipAdjust,offset=myHeight-(my.precedance==='y'||my.x===my.y?atHeight:0)-(at.y==='center'?targetHeight/2:0),isCenter=my.y==='center';if(isShift){tipAdjust=tip&&tip.corner&&tip.corner.precedance==='x'?tipHeight:0;offset=(my.y==='top'?1:-1)*myHeight-tipAdjust;position.top+=overflowTop>0?overflowTop:overflowBottom>0?-overflowBottom:0;position.top=Math.max(-container.offset.top+viewport.offset.top+(tipAdjust&&tip.corner.x==='center'?tip.offset:0),posTop-offset,Math.min(Math.max(-container.offset.top+viewport.offset.top+viewport.height,posTop+offset),position.top));}
else{if(overflowTop>0&&(my.y!=='top'||overflowBottom>0)){position.top-=offset;}
else if(overflowBottom>0&&(my.y!=='bottom'||overflowTop>0)){position.top-=isCenter?-offset:offset;}
if(position.top!==posTop&&isCenter){position.top-=adjust.y;}
if(position.top<0&&-position.top>overflowBottom){position.top=posTop;}}
return position.top-posTop;}},win;if($.isArray(target)&&target.length===2){at={x:'left',y:'top'};position={left:target[0],top:target[1]};}
else if(target==='mouse'&&((event&&event.pageX)||cache.event.pageX)){at={x:'left',y:'top'};event=(event&&(event.type==='resize'||event.type==='scroll')?cache.event:event&&event.pageX&&event.type==='mousemove'?event:MOUSE&&MOUSE.pageX&&(adjust.mouse||!event||!event.pageX)?{pageX:MOUSE.pageX,pageY:MOUSE.pageY}:!adjust.mouse&&cache.origin&&cache.origin.pageX&&options.show.distance?cache.origin:event)||event||cache.event||MOUSE||{};position={top:event.pageY,left:event.pageX};}
else{if(target==='event'){if(event&&event.target&&event.type!=='scroll'&&event.type!=='resize'){target=cache.target=$(event.target);}
else{target=cache.target;}}
else{target=cache.target=$(target.jquery?target:elements.target);}
target=$(target).eq(0);if(target.length===0){return self;}
else if(target[0]===document||target[0]===window){targetWidth=PLUGINS.iOS?window.innerWidth:target.width();targetHeight=PLUGINS.iOS?window.innerHeight:target.height();if(target[0]===window){position={top:(viewport||target).scrollTop(),left:(viewport||target).scrollLeft()};}}
else if(target.is('area')&&PLUGINS.imagemap){position=PLUGINS.imagemap(target,at,readjust.enabled?method:FALSE);}
else if(target[0].namespaceURI==='http://www.w3.org/2000/svg'&&PLUGINS.svg){position=PLUGINS.svg(target,at);}
else{targetWidth=target.outerWidth();targetHeight=target.outerHeight();position=PLUGINS.offset(target,container);}
if(position.offset){targetWidth=position.width;targetHeight=position.height;flipoffset=position.flipoffset;position=position.offset;}
if((PLUGINS.iOS<4.1&&PLUGINS.iOS>3.1)||PLUGINS.iOS==4.3||(!PLUGINS.iOS&&fixed)){win=$(window);position.left-=win.scrollLeft();position.top-=win.scrollTop();}
position.left+=at.x==='right'?targetWidth:at.x==='center'?targetWidth/2:0;position.top+=at.y==='bottom'?targetHeight:at.y==='center'?targetHeight/2:0;}
position.left+=adjust.x+(my.x==='right'?-elemWidth:my.x==='center'?-elemWidth/2:0);position.top+=adjust.y+(my.y==='bottom'?-elemHeight:my.y==='center'?-elemHeight/2:0);if(readjust.enabled){viewport={elem:viewport,height:viewport[(viewport[0]===window?'h':'outerH')+'eight'](),width:viewport[(viewport[0]===window?'w':'outerW')+'idth'](),scrollLeft:fixed?0:viewport.scrollLeft(),scrollTop:fixed?0:viewport.scrollTop(),offset:viewport.offset()||{left:0,top:0}};container={elem:container,scrollLeft:container.scrollLeft(),scrollTop:container.scrollTop(),offset:container.offset()||{left:0,top:0}};position.adjusted={left:readjust.horizontal!=='none'?readjust.left(position.left):0,top:readjust.vertical!=='none'?readjust.top(position.top):0};if(position.adjusted.left+position.adjusted.top){tooltip.attr('class',tooltip[0].className.replace(/ui-tooltip-pos-\w+/i,uitooltip+'-pos-'+my.abbrev()));}
if(flipoffset&&position.adjusted.left){position.left+=flipoffset.left;}
if(flipoffset&&position.adjusted.top){position.top+=flipoffset.top;}}
else{position.adjusted={left:0,top:0};}
callback.originalEvent=$.extend({},event);tooltip.trigger(callback,[self,position,viewport.elem||viewport]);if(callback.isDefaultPrevented()){return self;}
delete position.adjusted;if(effect===FALSE||!visible||isNaN(position.left)||isNaN(position.top)||target==='mouse'||!$.isFunction(posOptions.effect)){tooltip.css(position);}
else if($.isFunction(posOptions.effect)){posOptions.effect.call(tooltip,self,$.extend({},position));tooltip.queue(function(next){$(this).css({opacity:'',height:''});if($.browser.msie){this.style.removeAttribute('filter');}
next();});}
isPositioning=0;return self;},redraw:function()
{if(self.rendered<1||isDrawing){return self;}
var container=options.position.container,perc,width,max,min;isDrawing=1;if(options.style.height){tooltip.css('height',options.style.height);}
if(options.style.width){tooltip.css('width',options.style.width);}
else{tooltip.css('width','').addClass(fluidClass);width=tooltip.width()+1;max=tooltip.css('max-width')||'';min=tooltip.css('min-width')||'';perc=(max+min).indexOf('%')>-1?container.width()/100:0;max=((max.indexOf('%')>-1?perc:1)*parseInt(max,10))||width;min=((min.indexOf('%')>-1?perc:1)*parseInt(min,10))||0;width=max+min?Math.min(Math.max(width,min),max):width;tooltip.css('width',Math.round(width)).removeClass(fluidClass);}
isDrawing=0;return self;},disable:function(state)
{if('boolean'!==typeof state){state=!(tooltip.hasClass(disabled)||cache.disabled);}
if(self.rendered){tooltip.toggleClass(disabled,state);$.attr(tooltip[0],'aria-disabled',state);}
else{cache.disabled=!!state;}
return self;},enable:function(){return self.disable(FALSE);},destroy:function()
{var t=target[0],title=$.attr(t,oldtitle),elemAPI=target.data('qtip');if(self.rendered){tooltip.stop(1,0).remove();$.each(self.plugins,function(){if(this.destroy){this.destroy();}});}
clearTimeout(self.timers.show);clearTimeout(self.timers.hide);unassignEvents();if(!elemAPI||self===elemAPI){$.removeData(t,'qtip');if(options.suppress&&title){$.attr(t,'title',title);target.removeAttr(oldtitle);}
target.removeAttr('aria-describedby');}
target.unbind('.qtip-'+id);delete usedIDs[self.id];return target;}});}
function init(id,opts)
{var obj,posOptions,attr,config,title,elem=$(this),docBody=$(document.body),newTarget=this===document?docBody:elem,metadata=(elem.metadata)?elem.metadata(opts.metadata):NULL,metadata5=opts.metadata.type==='html5'&&metadata?metadata[opts.metadata.name]:NULL,html5=elem.data(opts.metadata.name||'qtipopts');try{html5=typeof html5==='string'?(new Function("return "+html5))():html5;}
catch(e){log('Unable to parse HTML5 attribute data: '+html5);}
config=$.extend(TRUE,{},QTIP.defaults,opts,typeof html5==='object'?sanitizeOptions(html5):NULL,sanitizeOptions(metadata5||metadata));posOptions=config.position;config.id=id;if('boolean'===typeof config.content.text){attr=elem.attr(config.content.attr);if(config.content.attr!==FALSE&&attr){config.content.text=attr;}
else{log('Unable to locate content for tooltip! Aborting render of tooltip on element: ',elem);return FALSE;}}
if(!posOptions.container.length){posOptions.container=docBody;}
if(posOptions.target===FALSE){posOptions.target=newTarget;}
if(config.show.target===FALSE){config.show.target=newTarget;}
if(config.show.solo===TRUE){config.show.solo=posOptions.container.closest('body');}
if(config.hide.target===FALSE){config.hide.target=newTarget;}
if(config.position.viewport===TRUE){config.position.viewport=posOptions.container;}
posOptions.container=posOptions.container.eq(0);posOptions.at=new PLUGINS.Corner(posOptions.at);posOptions.my=new PLUGINS.Corner(posOptions.my);if($.data(this,'qtip')){if(config.overwrite){elem.qtip('destroy');}
else if(config.overwrite===FALSE){return FALSE;}}
if(config.suppress&&(title=$.attr(this,'title'))){$(this).removeAttr('title').attr(oldtitle,title);}
obj=new QTip(elem,config,id,!!attr);$.data(this,'qtip',obj);elem.bind('remove.qtip-'+id+' removeqtip.qtip-'+id,function(){obj.destroy();});return obj;}
QTIP=$.fn.qtip=function(options,notation,newValue)
{var command=(''+options).toLowerCase(),returned=NULL,args=$.makeArray(arguments).slice(1),event=args[args.length-1],opts=this[0]?$.data(this[0],'qtip'):NULL;if((!arguments.length&&opts)||command==='api'){return opts;}
else if('string'===typeof options)
{this.each(function()
{var api=$.data(this,'qtip');if(!api){return TRUE;}
if(event&&event.timeStamp){api.cache.event=event;}
if((command==='option'||command==='options')&&notation){if($.isPlainObject(notation)||newValue!==undefined){api.set(notation,newValue);}
else{returned=api.get(notation);return FALSE;}}
else if(api[command]){api[command].apply(api[command],args);}});return returned!==NULL?returned:this;}
else if('object'===typeof options||!arguments.length)
{opts=sanitizeOptions($.extend(TRUE,{},options));return QTIP.bind.call(this,opts,event);}};QTIP.bind=function(opts,event)
{return this.each(function(i){var options,targets,events,namespace,api,id;id=$.isArray(opts.id)?opts.id[i]:opts.id;id=!id||id===FALSE||id.length<1||usedIDs[id]?QTIP.nextid++:(usedIDs[id]=id);namespace='.qtip-'+id+'-create';api=init.call(this,id,opts);if(api===FALSE){return TRUE;}
options=api.options;$.each(PLUGINS,function(){if(this.initialize==='initialize'){this(api);}});targets={show:options.show.target,hide:options.hide.target};events={show:$.trim(''+options.show.event).replace(/ /g,namespace+' ')+namespace,hide:$.trim(''+options.hide.event).replace(/ /g,namespace+' ')+namespace};if(/mouse(over|enter)/i.test(events.show)&&!/mouse(out|leave)/i.test(events.hide)){events.hide+=' mouseleave'+namespace;}
targets.show.bind('mousemove'+namespace,function(event){MOUSE={pageX:event.pageX,pageY:event.pageY,type:'mousemove'};api.cache.onTarget=TRUE;});function hoverIntent(event){function render(){api.render(typeof event==='object'||options.show.ready);targets.show.add(targets.hide).unbind(namespace);}
if(api.cache.disabled){return FALSE;}
api.cache.event=$.extend({},event);api.cache.target=event?$(event.target):[undefined];if(options.show.delay>0){clearTimeout(api.timers.show);api.timers.show=setTimeout(render,options.show.delay);if(events.show!==events.hide){targets.hide.bind(events.hide,function(){clearTimeout(api.timers.show);});}}
else{render();}}
targets.show.bind(events.show,hoverIntent);if(options.show.ready||options.prerender){hoverIntent(event);}});};PLUGINS=QTIP.plugins={Corner:function(corner){corner=(''+corner).replace(/([A-Z])/,' $1').replace(/middle/gi,'center').toLowerCase();this.x=(corner.match(/left|right/i)||corner.match(/center/)||['inherit'])[0].toLowerCase();this.y=(corner.match(/top|bottom|center/i)||['inherit'])[0].toLowerCase();var f=corner.charAt(0);this.precedance=(f==='t'||f==='b'?'y':'x');this.string=function(){return this.precedance==='y'?this.y+this.x:this.x+this.y;};this.abbrev=function(){var x=this.x.substr(0,1),y=this.y.substr(0,1);return x===y?x:(x==='c'||(x!=='c'&&y!=='c'))?y+x:x+y;};this.clone=function(){return{x:this.x,y:this.y,precedance:this.precedance,string:this.string,abbrev:this.abbrev,clone:this.clone};};},offset:function(elem,container){var pos=elem.offset(),docBody=elem.closest('body')[0],parent=container,scrolled,coffset,overflow;function scroll(e,i){pos.left+=i*e.scrollLeft();pos.top+=i*e.scrollTop();}
if(parent){do{if(parent.css('position')!=='static'){coffset=parent.position();pos.left-=coffset.left+(parseInt(parent.css('borderLeftWidth'),10)||0)+(parseInt(parent.css('marginLeft'),10)||0);pos.top-=coffset.top+(parseInt(parent.css('borderTopWidth'),10)||0)+(parseInt(parent.css('marginTop'),10)||0);if(!scrolled&&(overflow=parent.css('overflow'))!=='hidden'&&overflow!=='visible'){scrolled=parent;}}}
while((parent=$(parent[0].offsetParent)).length);if(scrolled&&scrolled[0]!==docBody){scroll(scrolled,1);}}
return pos;},iOS:parseFloat((''+(/CPU.*OS ([0-9_]{1,3})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,''])[1]).replace('undefined','3_2').replace('_','.'))||FALSE,fn:{attr:function(attr,val){if(this.length){var self=this[0],title='title',api=$.data(self,'qtip');if(attr===title&&api&&'object'===typeof api&&api.options.suppress){if(arguments.length<2){return $.attr(self,oldtitle);}
else{if(api&&api.options.content.attr===title&&api.cache.attr){api.set('content.text',val);}
return this.attr(oldtitle,val);}}}
return $.fn['attr'+replaceSuffix].apply(this,arguments);},clone:function(keepData){var titles=$([]),title='title',elems=$.fn['clone'+replaceSuffix].apply(this,arguments);if(!keepData){elems.filter('['+oldtitle+']').attr('title',function(){return $.attr(this,oldtitle);}).removeAttr(oldtitle);}
return elems;}}};$.each(PLUGINS.fn,function(name,func){if(!func||$.fn[name+replaceSuffix]){return TRUE;}
var old=$.fn[name+replaceSuffix]=$.fn[name];$.fn[name]=function(){return func.apply(this,arguments)||old.apply(this,arguments);};});if(!$.ui){$['cleanData'+replaceSuffix]=$.cleanData;$.cleanData=function(elems){for(var i=0,elem;(elem=elems[i])!==undefined;i++){try{$(elem).triggerHandler('removeqtip');}
catch(e){}}
$['cleanData'+replaceSuffix](elems);};}
QTIP.version='nightly';QTIP.nextid=0;QTIP.inactiveEvents='click dblclick mousedown mouseup mousemove mouseleave mouseenter'.split(' ');QTIP.zindex=15000;QTIP.defaults={prerender:FALSE,id:FALSE,overwrite:TRUE,suppress:TRUE,content:{text:TRUE,attr:'title',title:{text:FALSE,button:FALSE}},position:{my:'top left',at:'bottom right',target:FALSE,container:FALSE,viewport:FALSE,adjust:{x:0,y:0,mouse:TRUE,resize:TRUE,method:'flip flip'},effect:function(api,pos,viewport){$(this).animate(pos,{duration:200,queue:FALSE});}},show:{target:FALSE,event:'mouseenter',effect:TRUE,delay:90,solo:FALSE,ready:FALSE,autofocus:FALSE},hide:{target:FALSE,event:'mouseleave',effect:TRUE,delay:0,fixed:FALSE,inactive:FALSE,leave:'window',distance:FALSE},style:{classes:'',widget:FALSE,width:FALSE,height:FALSE,def:TRUE},events:{render:NULL,move:NULL,show:NULL,hide:NULL,toggle:NULL,visible:NULL,hidden:NULL,focus:NULL,blur:NULL}};function Ajax(api)
{var self=this,tooltip=api.elements.tooltip,opts=api.options.content.ajax,namespace='.qtip-ajax',rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,first=TRUE,destroyed=FALSE,stop=FALSE,xhr;api.checks.ajax={'^content.ajax':function(obj,name,v){if(name==='ajax'){opts=v;}
if(name==='once'){self.init();}
else if(opts&&opts.url){self.load();}
else{tooltip.unbind(namespace);}}};$.extend(self,{init:function(){if(opts&&opts.url){tooltip.unbind(namespace)[opts.once?'one':'bind']('tooltipshow'+namespace,self.load);}
return self;},load:function(event){if(stop){stop=FALSE;return;}
var hasSelector=opts.url.indexOf(' '),url=opts.url,selector,hideFirst=!opts.loading&&first;if(hideFirst){try{event.preventDefault();}catch(e){}}
else if(event&&event.isDefaultPrevented()){return self;}
if(xhr&&xhr.abort){xhr.abort();}
if(hasSelector>-1){selector=url.substr(hasSelector);url=url.substr(0,hasSelector);}
function after(){if(destroyed){return;}
first=FALSE;if(hideFirst){stop=TRUE;api.show(event.originalEvent);}
if($.isFunction(opts.complete)){opts.complete.apply(this,arguments);}}
function successHandler(content){if(destroyed){return;}
if(selector){content=$('<div/>').append(content.replace(rscript,"")).find(selector);}
api.set('content.text',content);}
function errorHandler(xhr,status,error){if(destroyed||xhr.status===0){return;}
api.set('content.text',status+': '+error);}
xhr=$.ajax($.extend({success:successHandler,error:errorHandler,context:api},opts,{url:url,complete:after}));},destroy:function(){if(xhr&&xhr.abort){xhr.abort();}
destroyed=TRUE;}});self.init();}
PLUGINS.ajax=function(api)
{var self=api.plugins.ajax;return'object'===typeof self?self:(api.plugins.ajax=new Ajax(api));};PLUGINS.ajax.initialize='render';PLUGINS.ajax.sanitize=function(options)
{var content=options.content,opts;if(content&&'ajax'in content){opts=content.ajax;if(typeof opts!=='object'){opts=options.content.ajax={url:opts};}
if('boolean'!==typeof opts.once&&opts.once){opts.once=!!opts.once;}}};$.extend(TRUE,QTIP.defaults,{content:{ajax:{loading:TRUE,once:TRUE}}});PLUGINS.imagemap=function(area,corner,flip)
{if(!area.jquery){area=$(area);}
var shape=(area[0].shape||area.attr('shape')).toLowerCase(),baseCoords=(area[0].coords||area.attr('coords')).split(','),coords=[],image=$('img[usemap="#'+area.parent('map').attr('name')+'"]'),imageOffset=image.offset(),result={width:0,height:0,offset:{top:1e10,right:0,bottom:0,left:1e10}},i=0,next=0,dimensions;function polyCoordinates(result,coords,corner)
{var i=0,compareX=1,compareY=1,realX=0,realY=0,newWidth=result.width,newHeight=result.height;while(newWidth>0&&newHeight>0&&compareX>0&&compareY>0)
{newWidth=Math.floor(newWidth/2);newHeight=Math.floor(newHeight/2);if(corner.x==='left'){compareX=newWidth;}
else if(corner.x==='right'){compareX=result.width-newWidth;}
else{compareX+=Math.floor(newWidth/2);}
if(corner.y==='top'){compareY=newHeight;}
else if(corner.y==='bottom'){compareY=result.height-newHeight;}
else{compareY+=Math.floor(newHeight/2);}
i=coords.length;while(i--)
{if(coords.length<2){break;}
realX=coords[i][0]-result.offset.left;realY=coords[i][1]-result.offset.top;if((corner.x==='left'&&realX>=compareX)||(corner.x==='right'&&realX<=compareX)||(corner.x==='center'&&(realX<compareX||realX>(result.width-compareX)))||(corner.y==='top'&&realY>=compareY)||(corner.y==='bottom'&&realY<=compareY)||(corner.y==='center'&&(realY<compareY||realY>(result.height-compareY)))){coords.splice(i,1);}}}
return{left:coords[0][0],top:coords[0][1]};}
imageOffset.left+=Math.ceil((image.outerWidth()-image.width())/2);imageOffset.top+=Math.ceil((image.outerHeight()-image.height())/2);if(shape==='poly'){i=baseCoords.length;while(i--)
{next=[parseInt(baseCoords[--i],10),parseInt(baseCoords[i+1],10)];if(next[0]>result.offset.right){result.offset.right=next[0];}
if(next[0]<result.offset.left){result.offset.left=next[0];}
if(next[1]>result.offset.bottom){result.offset.bottom=next[1];}
if(next[1]<result.offset.top){result.offset.top=next[1];}
coords.push(next);}}
else{coords=$.map(baseCoords,function(coord){return parseInt(coord,10);});}
switch(shape)
{case'rect':result={width:Math.abs(coords[2]-coords[0]),height:Math.abs(coords[3]-coords[1]),offset:{left:Math.min(coords[0],coords[2]),top:Math.min(coords[1],coords[3])}};break;case'circle':result={width:coords[2]+2,height:coords[2]+2,offset:{left:coords[0],top:coords[1]}};break;case'poly':$.extend(result,{width:Math.abs(result.offset.right-result.offset.left),height:Math.abs(result.offset.bottom-result.offset.top)});if(corner.string()==='centercenter'){result.offset={left:result.offset.left+(result.width/2),top:result.offset.top+(result.height/2)};}
else{result.offset=polyCoordinates(result,coords.slice(),corner);if(flip&&(flip[0]==='flip'||flip[1]==='flip')){result.flipoffset=polyCoordinates(result,coords.slice(),{x:corner.x==='left'?'right':corner.x==='right'?'left':'center',y:corner.y==='top'?'bottom':corner.y==='bottom'?'top':'center'});result.flipoffset.left-=result.offset.left;result.flipoffset.top-=result.offset.top;}}
result.width=result.height=0;break;}
result.offset.left+=imageOffset.left;result.offset.top+=imageOffset.top;return result;};function calculateTip(corner,width,height)
{var width2=Math.ceil(width/2),height2=Math.ceil(height/2),tips={bottomright:[[0,0],[width,height],[width,0]],bottomleft:[[0,0],[width,0],[0,height]],topright:[[0,height],[width,0],[width,height]],topleft:[[0,0],[0,height],[width,height]],topcenter:[[0,height],[width2,0],[width,height]],bottomcenter:[[0,0],[width,0],[width2,height]],rightcenter:[[0,0],[width,height2],[0,height]],leftcenter:[[width,0],[width,height],[0,height2]]};tips.lefttop=tips.bottomright;tips.righttop=tips.bottomleft;tips.leftbottom=tips.topright;tips.rightbottom=tips.topleft;return tips[corner.string()];}
function Tip(qTip,command)
{var self=this,opts=qTip.options.style.tip,elems=qTip.elements,tooltip=elems.tooltip,cache={top:0,left:0},size={width:opts.width,height:opts.height},color={},border=opts.border||0,namespace='.qtip-tip',hasCanvas=!!($('<canvas />')[0]||{}).getContext;self.corner=NULL;self.mimic=NULL;self.border=border;self.offset=opts.offset;self.size=size;qTip.checks.tip={'^position.my|style.tip.(corner|mimic|border)$':function(){if(!self.init()){self.destroy();}
qTip.reposition();},'^style.tip.(height|width)$':function(){size={width:opts.width,height:opts.height};self.create();self.update();qTip.reposition();},'^content.title.text|style.(classes|widget)$':function(){if(elems.tip){self.update();}}};function reposition(event,api,pos,viewport){if(!elems.tip){return;}
var newCorner=self.corner.clone(),adjust=pos.adjusted,method=qTip.options.position.adjust.method.split(' '),horizontal=method[0],vertical=method[1]||method[0],shift={left:FALSE,top:FALSE,x:0,y:0},offset,css={},props;if(self.corner.fixed!==TRUE){if(horizontal==='shift'&&newCorner.precedance==='x'&&adjust.left&&newCorner.y!=='center'){newCorner.precedance=newCorner.precedance==='x'?'y':'x';}
else if(horizontal==='flip'&&adjust.left){newCorner.x=newCorner.x==='center'?(adjust.left>0?'left':'right'):(newCorner.x==='left'?'right':'left');}
if(vertical==='shift'&&newCorner.precedance==='y'&&adjust.top&&newCorner.x!=='center'){newCorner.precedance=newCorner.precedance==='y'?'x':'y';}
else if(vertical==='flip'&&adjust.top){newCorner.y=newCorner.y==='center'?(adjust.top>0?'top':'bottom'):(newCorner.y==='top'?'bottom':'top');}
if(newCorner.string()!==cache.corner.string()&&(cache.top!==adjust.top||cache.left!==adjust.left)){self.update(newCorner,FALSE);}}
offset=self.position(newCorner,adjust);if(offset.right!==undefined){offset.left=-offset.right;}
if(offset.bottom!==undefined){offset.top=-offset.bottom;}
offset.user=Math.max(0,opts.offset);if(shift.left=(horizontal==='shift'&&!!adjust.left)){if(newCorner.x==='center'){css['margin-left']=shift.x=offset['margin-left']-adjust.left;}
else{props=offset.right!==undefined?[adjust.left,-offset.left]:[-adjust.left,offset.left];if((shift.x=Math.max(props[0],props[1]))>props[0]){pos.left-=adjust.left;shift.left=FALSE;}
css[offset.right!==undefined?'right':'left']=shift.x;}}
if(shift.top=(vertical==='shift'&&!!adjust.top)){if(newCorner.y==='center'){css['margin-top']=shift.y=offset['margin-top']-adjust.top;}
else{props=offset.bottom!==undefined?[adjust.top,-offset.top]:[-adjust.top,offset.top];if((shift.y=Math.max(props[0],props[1]))>props[0]){pos.top-=adjust.top;shift.top=FALSE;}
css[offset.bottom!==undefined?'bottom':'top']=shift.y;}}
elems.tip.css(css).toggle(!((shift.x&&shift.y)||(newCorner.x==='center'&&shift.y)||(newCorner.y==='center'&&shift.x)));pos.left-=offset.left.charAt?offset.user:horizontal!=='shift'||shift.top||!shift.left&&!shift.top?offset.left:0;pos.top-=offset.top.charAt?offset.user:vertical!=='shift'||shift.left||!shift.left&&!shift.top?offset.top:0;cache.left=adjust.left;cache.top=adjust.top;cache.corner=newCorner.clone();}
function borderWidth(corner,side,backup){side=!side?corner[corner.precedance]:side;var isFluid=tooltip.hasClass(fluidClass),isTitleTop=elems.titlebar&&corner.y==='top',elem=isTitleTop?elems.titlebar:elems.content,css='border-'+side+'-width',val;tooltip.addClass(fluidClass);val=parseInt(elem.css(css),10);val=(backup?val||parseInt(tooltip.css(css),10):val)||0;tooltip.toggleClass(fluidClass,isFluid);return val;}
function borderRadius(corner){var isTitleTop=elems.titlebar&&corner.y==='top',elem=isTitleTop?elems.titlebar:elems.content,moz=$.browser.mozilla,prefix=moz?'-moz-':$.browser.webkit?'-webkit-':'',side=corner.y+(moz?'':'-')+corner.x,css=prefix+(moz?'border-radius-'+side:'border-'+side+'-radius');return parseInt(elem.css(css),10)||parseInt(tooltip.css(css),10)||0;}
function calculateSize(corner){var y=corner.precedance==='y',width=size[y?'width':'height'],height=size[y?'height':'width'],isCenter=corner.string().indexOf('center')>-1,base=width*(isCenter?0.5:1),pow=Math.pow,round=Math.round,bigHyp,ratio,result,smallHyp=Math.sqrt(pow(base,2)+pow(height,2)),hyp=[(border/base)*smallHyp,(border/height)*smallHyp];hyp[2]=Math.sqrt(pow(hyp[0],2)-pow(border,2));hyp[3]=Math.sqrt(pow(hyp[1],2)-pow(border,2));bigHyp=smallHyp+hyp[2]+hyp[3]+(isCenter?0:hyp[0]);ratio=bigHyp/smallHyp;result=[round(ratio*height),round(ratio*width)];return{height:result[y?0:1],width:result[y?1:0]};}
$.extend(self,{init:function()
{var enabled=self.detectCorner()&&(hasCanvas||$.browser.msie);if(enabled){self.create();self.update();tooltip.unbind(namespace).bind('tooltipmove'+namespace,reposition);}
return enabled;},detectCorner:function()
{var corner=opts.corner,posOptions=qTip.options.position,at=posOptions.at,my=posOptions.my.string?posOptions.my.string():posOptions.my;if(corner===FALSE||(my===FALSE&&at===FALSE)){return FALSE;}
else{if(corner===TRUE){self.corner=new PLUGINS.Corner(my);}
else if(!corner.string){self.corner=new PLUGINS.Corner(corner);self.corner.fixed=TRUE;}}
cache.corner=new PLUGINS.Corner(self.corner.string());return self.corner.string()!=='centercenter';},detectColours:function(actual){var i,fill,border,tip=elems.tip.css('cssText',''),corner=actual||self.corner,precedance=corner[corner.precedance],borderSide='border-'+precedance+'-color',borderSideCamel='border'+precedance.charAt(0)+precedance.substr(1)+'Color',invalid=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,backgroundColor='background-color',transparent='transparent',important=' !important',bodyBorder=$(document.body).css('color'),contentColour=qTip.elements.content.css('color'),useTitle=elems.titlebar&&(corner.y==='top'||(corner.y==='center'&&tip.position().top+(size.height/2)+opts.offset<elems.titlebar.outerHeight(1))),colorElem=useTitle?elems.titlebar:elems.content;tooltip.addClass(fluidClass);color.fill=fill=tip.css(backgroundColor);color.border=border=tip[0].style[borderSideCamel]||tip.css(borderSide)||tooltip.css(borderSide);if(!fill||invalid.test(fill)){color.fill=colorElem.css(backgroundColor)||transparent;if(invalid.test(color.fill)){color.fill=tooltip.css(backgroundColor)||fill;}}
if(!border||invalid.test(border)||border===bodyBorder){color.border=colorElem.css(borderSide)||transparent;if(invalid.test(color.border)){color.border=border;}}
$('*',tip).add(tip).css('cssText',backgroundColor+':'+transparent+important+';border:0'+important+';');tooltip.removeClass(fluidClass);},create:function()
{var width=size.width,height=size.height,vml;if(elems.tip){elems.tip.remove();}
elems.tip=$('<div />',{'class':'ui-tooltip-tip'}).css({width:width,height:height}).prependTo(tooltip);if(hasCanvas){$('<canvas />').appendTo(elems.tip)[0].getContext('2d').save();}
else{vml='<vml:shape coordorigin="0,0" style="display:inline-block; position:absolute; behavior:url(#default#VML);"></vml:shape>';elems.tip.html(vml+vml);$('*',elems.tip).bind('click mousedown',function(event){event.stopPropagation();});}},update:function(corner,position)
{var tip=elems.tip,inner=tip.children(),width=size.width,height=size.height,regular='px solid ',transparent='px dashed transparent',mimic=opts.mimic,round=Math.round,precedance,context,coords,translate,newSize;if(!corner){corner=cache.corner||self.corner;}
if(mimic===FALSE){mimic=corner;}
else{mimic=new PLUGINS.Corner(mimic);mimic.precedance=corner.precedance;if(mimic.x==='inherit'){mimic.x=corner.x;}
else if(mimic.y==='inherit'){mimic.y=corner.y;}
else if(mimic.x===mimic.y){mimic[corner.precedance]=corner[corner.precedance];}}
precedance=mimic.precedance;self.detectColours(corner);if(color.border!=='transparent'&&color.border!=='#123456'){border=borderWidth(corner,NULL,TRUE);if(opts.border===0&&border>0){color.fill=color.border;}
self.border=border=opts.border!==TRUE?opts.border:border;}
else{self.border=border=0;}
coords=calculateTip(mimic,width,height);self.size=newSize=calculateSize(corner);tip.css(newSize);if(corner.precedance==='y'){translate=[round(mimic.x==='left'?border:mimic.x==='right'?newSize.width-width-border:(newSize.width-width)/2),round(mimic.y==='top'?newSize.height-height:0)];}
else{translate=[round(mimic.x==='left'?newSize.width-width:0),round(mimic.y==='top'?border:mimic.y==='bottom'?newSize.height-height-border:(newSize.height-height)/2)];}
if(hasCanvas){inner.attr(newSize);context=inner[0].getContext('2d');context.restore();context.save();context.clearRect(0,0,3000,3000);context.translate(translate[0],translate[1]);context.beginPath();context.moveTo(coords[0][0],coords[0][1]);context.lineTo(coords[1][0],coords[1][1]);context.lineTo(coords[2][0],coords[2][1]);context.closePath();context.fillStyle=color.fill;context.strokeStyle=color.border;context.lineWidth=border*2;context.lineJoin='miter';context.miterLimit=100;if(border){context.stroke();}
context.fill();}
else{coords='m'+coords[0][0]+','+coords[0][1]+' l'+coords[1][0]+','+coords[1][1]+' '+coords[2][0]+','+coords[2][1]+' xe';translate[2]=border&&/^(r|b)/i.test(corner.string())?parseFloat($.browser.version,10)===8?2:1:0;inner.css({antialias:''+(mimic.string().indexOf('center')>-1),left:translate[0]-(translate[2]*Number(precedance==='x')),top:translate[1]-(translate[2]*Number(precedance==='y')),width:width+border,height:height+border}).each(function(i){var $this=$(this);$this[$this.prop?'prop':'attr']({coordsize:(width+border)+' '+(height+border),path:coords,fillcolor:color.fill,filled:!!i,stroked:!!!i}).css({display:border||i?'block':'none'});if(!i&&$this.html()===''){$this.html('<vml:stroke weight="'+(border*2)+'px" color="'+color.border+'" miterlimit="1000" joinstyle="miter" '+' style="behavior:url(#default#VML); display:inline-block;" />');}});}
if(position!==FALSE){self.position(corner);}},position:function(corner)
{var tip=elems.tip,position={},userOffset=Math.max(0,opts.offset),precedance,dimensions,corners;if(opts.corner===FALSE||!tip){return FALSE;}
corner=corner||self.corner;precedance=corner.precedance;dimensions=calculateSize(corner);corners=[corner.x,corner.y];if(precedance==='x'){corners.reverse();}
$.each(corners,function(i,side){var b,br;if(side==='center'){b=precedance==='y'?'left':'top';position[b]='50%';position['margin-'+b]=-Math.round(dimensions[precedance==='y'?'width':'height']/2)+userOffset;}
else{b=borderWidth(corner,side,TRUE);br=borderRadius(corner);position[side]=i?border?borderWidth(corner,side):0:userOffset+(br>b?br:0);}});position[corner[precedance]]-=dimensions[precedance==='x'?'width':'height'];tip.css({top:'',bottom:'',left:'',right:'',margin:''}).css(position);return position;},destroy:function()
{if(elems.tip){elems.tip.remove();}
tooltip.unbind(namespace);}});self.init();}
PLUGINS.tip=function(api)
{var self=api.plugins.tip;return'object'===typeof self?self:(api.plugins.tip=new Tip(api));};PLUGINS.tip.initialize='render';PLUGINS.tip.sanitize=function(options)
{var style=options.style,opts;if(style&&'tip'in style){opts=options.style.tip;if(typeof opts!=='object'){options.style.tip={corner:opts};}
if(!(/string|boolean/i).test(typeof opts.corner)){opts.corner=TRUE;}
if(typeof opts.width!=='number'){delete opts.width;}
if(typeof opts.height!=='number'){delete opts.height;}
if(typeof opts.border!=='number'&&opts.border!==TRUE){delete opts.border;}
if(typeof opts.offset!=='number'){delete opts.offset;}}};$.extend(TRUE,QTIP.defaults,{style:{tip:{corner:TRUE,mimic:FALSE,width:6,height:6,border:TRUE,offset:0}}});PLUGINS.svg=function(svg,corner)
{var doc=$(document),elem=svg[0],result={width:0,height:0,offset:{top:1e10,left:1e10}},box,mtx,root,point,tPoint;if(elem.getBBox&&elem.parentNode){box=elem.getBBox();mtx=elem.getScreenCTM();root=elem.farthestViewportElement||elem;if(!root.createSVGPoint){return result;}
point=root.createSVGPoint();point.x=box.x;point.y=box.y;tPoint=point.matrixTransform(mtx);result.offset.left=tPoint.x;result.offset.top=tPoint.y;point.x+=box.width;point.y+=box.height;tPoint=point.matrixTransform(mtx);result.width=tPoint.x-result.offset.left;result.height=tPoint.y-result.offset.top;result.offset.left+=doc.scrollLeft();result.offset.top+=doc.scrollTop();}
return result;};function Modal(api)
{var self=this,options=api.options.show.modal,elems=api.elements,tooltip=elems.tooltip,overlaySelector='#qtip-overlay',globalNamespace='.qtipmodal',namespace=globalNamespace+api.id,attr='is-modal-qtip',docBody=$(document.body),overlay;api.checks.modal={'^show.modal.(on|blur)$':function(){self.init();elems.overlay.toggle(tooltip.is(':visible'));}};$.extend(self,{init:function()
{if(!options.on){return self;}
overlay=self.create();tooltip.attr(attr,TRUE).css('z-index',PLUGINS.modal.zindex+$(selector+'['+attr+']').length).unbind(globalNamespace).unbind(namespace).bind('tooltipshow'+globalNamespace+' tooltiphide'+globalNamespace,function(event,api,duration){var oEvent=event.originalEvent;if(event.target===tooltip[0]){if(oEvent&&event.type==='tooltiphide'&&/mouse(leave|enter)/.test(oEvent.type)&&$(oEvent.relatedTarget).closest(overlay[0]).length){try{event.preventDefault();}catch(e){}}
else if(!oEvent||(oEvent&&!oEvent.solo)){self[event.type.replace('tooltip','')](event,duration);}}}).bind('tooltipfocus'+globalNamespace,function(event){if(event.isDefaultPrevented()||event.target!==tooltip[0]){return;}
var qtips=$(selector).filter('['+attr+']'),newIndex=PLUGINS.modal.zindex+qtips.length,curIndex=parseInt(tooltip[0].style.zIndex,10);overlay[0].style.zIndex=newIndex-1;qtips.each(function(){if(this.style.zIndex>curIndex){this.style.zIndex-=1;}});qtips.end().filter('.'+focusClass).qtip('blur',event.originalEvent);tooltip.addClass(focusClass)[0].style.zIndex=newIndex;try{event.preventDefault();}catch(e){}}).bind('tooltiphide'+globalNamespace,function(event){if(event.target===tooltip[0]){$('['+attr+']').filter(':visible').not(tooltip).last().qtip('focus',event);}});if(options.escape){$(window).unbind(namespace).bind('keydown'+namespace,function(event){if(event.keyCode===27&&tooltip.hasClass(focusClass)){api.hide(event);}});}
if(options.blur){elems.overlay.unbind(namespace).bind('click'+namespace,function(event){if(tooltip.hasClass(focusClass)){api.hide(event);}});}
return self;},create:function()
{var elem=$(overlaySelector);if(elem.length){return(elems.overlay=elem.insertAfter($(selector).last()));}
overlay=elems.overlay=$('<div />',{id:overlaySelector.substr(1),html:'<div></div>',mousedown:function(){return FALSE;}}).insertAfter($(selector).last());function resize(){overlay.css({height:$(window).height(),width:$(window).width()});}
$(window).unbind(globalNamespace).bind('resize'+globalNamespace,resize);resize();return overlay;},toggle:function(event,state,duration)
{if(event&&event.isDefaultPrevented()){return self;}
var effect=options.effect,type=state?'show':'hide',visible=overlay.is(':visible'),modals=$('['+attr+']').filter(':visible').not(tooltip),zindex;if(!overlay){overlay=self.create();}
if((overlay.is(':animated')&&visible===state)||(!state&&modals.length)){return self;}
if(state){overlay.css({left:0,top:0});overlay.toggleClass('blurs',options.blur);docBody.bind('focusin'+namespace,function(event){var target=$(event.target),container=target.closest('.qtip'),targetOnTop=container.length<1?FALSE:(parseInt(container[0].style.zIndex,10)>parseInt(tooltip[0].style.zIndex,10));if(!targetOnTop&&($(event.target).closest(selector)[0]!==tooltip[0])){tooltip.find('input:visible').filter(':first').focus();}});}
else{docBody.undelegate('*','focusin'+namespace);}
overlay.stop(TRUE,FALSE);if($.isFunction(effect)){effect.call(overlay,state);}
else if(effect===FALSE){overlay[type]();}
else{overlay.fadeTo(parseInt(duration,10)||90,state?1:0,function(){if(!state){$(this).hide();}});}
if(!state){overlay.queue(function(next){overlay.css({left:'',top:''});next();});}
return self;},show:function(event,duration){return self.toggle(event,TRUE,duration);},hide:function(event,duration){return self.toggle(event,FALSE,duration);},destroy:function()
{var delBlanket=overlay;if(delBlanket){delBlanket=$('['+attr+']').not(tooltip).length<1;if(delBlanket){elems.overlay.remove();$(window).unbind(globalNamespace);}
else{elems.overlay.unbind(globalNamespace+api.id);}
docBody.undelegate('*','focusin'+namespace);}
return tooltip.removeAttr(attr).unbind(globalNamespace);}});self.init();}
PLUGINS.modal=function(api){var self=api.plugins.modal;return'object'===typeof self?self:(api.plugins.modal=new Modal(api));};PLUGINS.modal.initialize='render';PLUGINS.modal.sanitize=function(opts){if(opts.show){if(typeof opts.show.modal!=='object'){opts.show.modal={on:!!opts.show.modal};}
else if(typeof opts.show.modal.on==='undefined'){opts.show.modal.on=TRUE;}}};PLUGINS.modal.zindex=QTIP.zindex+1000;$.extend(TRUE,QTIP.defaults,{show:{modal:{on:FALSE,effect:TRUE,blur:TRUE,escape:TRUE}}});function BGIFrame(api)
{var self=this,elems=api.elements,tooltip=elems.tooltip,namespace='.bgiframe-'+api.id;$.extend(self,{init:function()
{elems.bgiframe=$('<iframe class="ui-tooltip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';" '+' style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); '+'-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>');elems.bgiframe.appendTo(tooltip);tooltip.bind('tooltipmove'+namespace,self.adjust);},adjust:function()
{var dimensions=api.get('dimensions'),plugin=api.plugins.tip,tip=elems.tip,tipAdjust,offset;offset=parseInt(tooltip.css('border-left-width'),10)||0;offset={left:-offset,top:-offset};if(plugin&&tip){tipAdjust=(plugin.corner.precedance==='x')?['width','left']:['height','top'];offset[tipAdjust[1]]-=tip[tipAdjust[0]]();}
elems.bgiframe.css(offset).css(dimensions);},destroy:function()
{elems.bgiframe.remove();tooltip.unbind(namespace);}});self.init();}
PLUGINS.bgiframe=function(api)
{var browser=$.browser,self=api.plugins.bgiframe;if($('select, object').length<1||!(browser.msie&&(''+browser.version).charAt(0)==='6')){return FALSE;}
return'object'===typeof self?self:(api.plugins.bgiframe=new BGIFrame(api));};PLUGINS.bgiframe.initialize='render';}));
;(function(window){var soundManager=null;function SoundManager(smURL,smID){this.flashVersion=8;this.debugMode=true;this.debugFlash=false;this.useConsole=true;this.consoleOnly=true;this.waitForWindowLoad=false;this.bgColor='#ffffff';this.useHighPerformance=false;this.flashPollingInterval=null;this.html5PollingInterval=null;this.flashLoadTimeout=1000;this.wmode=null;this.allowScriptAccess='always';this.useFlashBlock=false;this.useHTML5Audio=true;this.html5Test=/^(probably|maybe)$/i;this.preferFlash=true;this.noSWFCache=false;this.audioFormats={'mp3':{'type':['audio/mpeg; codecs="mp3"','audio/mpeg','audio/mp3','audio/MPA','audio/mpa-robust'],'required':true},'mp4':{'related':['aac','m4a'],'type':['audio/mp4; codecs="mp4a.40.2"','audio/aac','audio/x-m4a','audio/MP4A-LATM','audio/mpeg4-generic'],'required':false},'ogg':{'type':['audio/ogg; codecs=vorbis'],'required':false},'wav':{'type':['audio/wav; codecs="1"','audio/wav','audio/wave','audio/x-wav'],'required':false}};this.defaultOptions={'autoLoad':false,'autoPlay':false,'from':null,'loops':1,'onid3':null,'onload':null,'whileloading':null,'onplay':null,'onpause':null,'onresume':null,'whileplaying':null,'onposition':null,'onstop':null,'onfailure':null,'onfinish':null,'multiShot':true,'multiShotEvents':false,'position':null,'pan':0,'stream':true,'to':null,'type':null,'usePolicyFile':false,'volume':100};this.flash9Options={'isMovieStar':null,'usePeakData':false,'useWaveformData':false,'useEQData':false,'onbufferchange':null,'ondataerror':null};this.movieStarOptions={'bufferTime':3,'serverURL':null,'onconnect':null,'duration':null};this.movieID='sm2-container';this.id=(smID||'sm2movie');this.debugID='soundmanager-debug';this.debugURLParam=/([#?&])debug=1/i;this.versionNumber='V2.97a.20111220';this.version=null;this.movieURL=null;this.url=(smURL||null);this.altURL=null;this.swfLoaded=false;this.enabled=false;this.oMC=null;this.sounds={};this.soundIDs=[];this.muted=false;this.didFlashBlock=false;this.filePattern=null;this.filePatterns={'flash8':/\.mp3(\?.*)?$/i,'flash9':/\.mp3(\?.*)?$/i};this.features={'buffering':false,'peakData':false,'waveformData':false,'eqData':false,'movieStar':false};this.sandbox={'type':null,'types':{'remote':'remote (domain-based) rules','localWithFile':'local with file access (no internet access)','localWithNetwork':'local with network (internet access only, no local access)','localTrusted':'local, trusted (local+internet access)'},'description':null,'noRemote':null,'noLocal':null};this.hasHTML5=(function(){try{return(typeof Audio!=='undefined'&&typeof new Audio().canPlayType!=='undefined');}catch(e){return false;}}());this.html5={'usingFlash':null};this.flash={};this.html5Only=false;this.ignoreFlash=false;var SMSound,_s=this,_flash=null,_sm='soundManager',_smc=_sm+'::',_h5='HTML5::',_id,_ua=navigator.userAgent,_win=window,_wl=_win.location.href.toString(),_doc=document,_doNothing,_init,_fV,_on_queue=[],_debugOpen=true,_debugTS,_didAppend=false,_appendSuccess=false,_didInit=false,_disabled=false,_windowLoaded=false,_wDS,_wdCount=0,_initComplete,_mixin,_addOnEvent,_processOnEvents,_initUserOnload,_delayWaitForEI,_waitForEI,_setVersionInfo,_handleFocus,_strings,_initMovie,_domContentLoaded,_winOnLoad,_didDCLoaded,_getDocument,_createMovie,_catchError,_setPolling,_initDebug,_debugLevels=['log','info','warn','error'],_defaultFlashVersion=8,_disableObject,_failSafely,_normalizeMovieURL,_oRemoved=null,_oRemovedHTML=null,_str,_flashBlockHandler,_getSWFCSS,_swfCSS,_toggleDebug,_loopFix,_policyFix,_complain,_idCheck,_waitingForEI=false,_initPending=false,_smTimer,_onTimer,_startTimer,_stopTimer,_timerExecute,_h5TimerCount=0,_h5IntervalTimer=null,_parseURL,_needsFlash=null,_featureCheck,_html5OK,_html5CanPlay,_html5Ext,_html5Unload,_domContentLoadedIE,_testHTML5,_event,_slice=Array.prototype.slice,_useGlobalHTML5Audio=false,_hasFlash,_detectFlash,_badSafariFix,_html5_events,_showSupport,_is_iDevice=_ua.match(/(ipad|iphone|ipod)/i),_is_firefox=_ua.match(/firefox/i),_is_android=_ua.match(/droid/i),_isIE=_ua.match(/msie/i),_isWebkit=_ua.match(/webkit/i),_isSafari=(_ua.match(/safari/i)&&!_ua.match(/chrome/i)),_isOpera=(_ua.match(/opera/i)),_likesHTML5=(_ua.match(/(mobile|pre\/|xoom)/i)||_is_iDevice),_isBadSafari=(!_wl.match(/usehtml5audio/i)&&!_wl.match(/sm2\-ignorebadua/i)&&_isSafari&&!_ua.match(/silk/i)&&_ua.match(/OS X 10_6_([3-7])/i)),_hasConsole=(typeof console!=='undefined'&&typeof console.log!=='undefined'),_isFocused=(typeof _doc.hasFocus!=='undefined'?_doc.hasFocus():null),_tryInitOnFocus=(_isSafari&&typeof _doc.hasFocus==='undefined'),_okToDisable=!_tryInitOnFocus,_flashMIME=/(mp3|mp4|mpa)/i,_emptyURL='about:blank',_overHTTP=(_doc.location?_doc.location.protocol.match(/http/i):null),_http=(!_overHTTP?'http:/'+'/':''),_netStreamMimeTypes=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|mp4v|3gp|3g2)\s*(?:$|;)/i,_netStreamTypes=['mpeg4','aac','flv','mov','mp4','m4v','f4v','m4a','mp4v','3gp','3g2'],_netStreamPattern=new RegExp('\\.('+_netStreamTypes.join('|')+')(\\?.*)?$','i');this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i;this.useAltURL=!_overHTTP;this._global_a=null;_swfCSS={'swfBox':'sm2-object-box','swfDefault':'movieContainer','swfError':'swf_error','swfTimedout':'swf_timedout','swfLoaded':'swf_loaded','swfUnblocked':'swf_unblocked','sm2Debug':'sm2_debug','highPerf':'high_performance','flashDebug':'flash_debug'};if(_likesHTML5){_s.useHTML5Audio=true;_s.preferFlash=false;if(_is_iDevice){_s.ignoreFlash=true;_useGlobalHTML5Audio=true;}}
this.ok=function(){return(_needsFlash?(_didInit&&!_disabled):(_s.useHTML5Audio&&_s.hasHTML5));};this.supported=this.ok;this.getMovie=function(smID){return _id(smID)||_doc[smID]||_win[smID];};this.createSound=function(oOptions){var _cs,_cs_string,thisOptions=null,oSound=null,_tO=null;_cs=_sm+'.createSound(): ';_cs_string=_cs+_str(!_didInit?'notReady':'notOK');if(!_didInit||!_s.ok()){_complain(_cs_string);return false;}
if(arguments.length===2){oOptions={'id':arguments[0],'url':arguments[1]};}
thisOptions=_mixin(oOptions);thisOptions.url=_parseURL(thisOptions.url);_tO=thisOptions;if(_tO.id.toString().charAt(0).match(/^[0-9]$/)){_s._wD(_cs+_str('badID',_tO.id),2);}
_s._wD(_cs+_tO.id+' ('+_tO.url+')',1);if(_idCheck(_tO.id,true)){_s._wD(_cs+_tO.id+' exists',1);return _s.sounds[_tO.id];}
function make(){thisOptions=_loopFix(thisOptions);_s.sounds[_tO.id]=new SMSound(_tO);_s.soundIDs.push(_tO.id);return _s.sounds[_tO.id];}
if(_html5OK(_tO)){oSound=make();_s._wD('Loading sound '+_tO.id+' via HTML5');oSound._setup_html5(_tO);}else{if(_fV>8){if(_tO.isMovieStar===null){_tO.isMovieStar=(_tO.serverURL||(_tO.type?_tO.type.match(_netStreamMimeTypes):false)||_tO.url.match(_netStreamPattern));}
if(_tO.isMovieStar){_s._wD(_cs+'using MovieStar handling');}
if(_tO.isMovieStar){if(_tO.usePeakData){_wDS('noPeak');_tO.usePeakData=false;}
if(_tO.loops>1){_wDS('noNSLoop');}}}
_tO=_policyFix(_tO,_cs);oSound=make();if(_fV===8){_flash._createSound(_tO.id,_tO.loops||1,_tO.usePolicyFile);}else{_flash._createSound(_tO.id,_tO.url,_tO.usePeakData,_tO.useWaveformData,_tO.useEQData,_tO.isMovieStar,(_tO.isMovieStar?_tO.bufferTime:false),_tO.loops||1,_tO.serverURL,_tO.duration||null,_tO.autoPlay,true,_tO.autoLoad,_tO.usePolicyFile);if(!_tO.serverURL){oSound.connected=true;if(_tO.onconnect){_tO.onconnect.apply(oSound);}}}
if(!_tO.serverURL&&(_tO.autoLoad||_tO.autoPlay)){oSound.load(_tO);}}
if(!_tO.serverURL&&_tO.autoPlay){oSound.play();}
return oSound;};this.destroySound=function(sID,_bFromSound){if(!_idCheck(sID)){return false;}
var oS=_s.sounds[sID],i;oS._iO={};oS.stop();oS.unload();for(i=0;i<_s.soundIDs.length;i++){if(_s.soundIDs[i]===sID){_s.soundIDs.splice(i,1);break;}}
if(!_bFromSound){oS.destruct(true);}
oS=null;delete _s.sounds[sID];return true;};this.load=function(sID,oOptions){if(!_idCheck(sID)){return false;}
return _s.sounds[sID].load(oOptions);};this.unload=function(sID){if(!_idCheck(sID)){return false;}
return _s.sounds[sID].unload();};this.onPosition=function(sID,nPosition,oMethod,oScope){if(!_idCheck(sID)){return false;}
return _s.sounds[sID].onposition(nPosition,oMethod,oScope);};this.onposition=this.onPosition;this.clearOnPosition=function(sID,nPosition,oMethod){if(!_idCheck(sID)){return false;}
return _s.sounds[sID].clearOnPosition(nPosition,oMethod);};this.play=function(sID,oOptions){if(!_didInit||!_s.ok()){_complain(_sm+'.play(): '+_str(!_didInit?'notReady':'notOK'));return false;}
if(!_idCheck(sID)){if(!(oOptions instanceof Object)){oOptions={url:oOptions};}
if(oOptions&&oOptions.url){_s._wD(_sm+'.play(): attempting to create "'+sID+'"',1);oOptions.id=sID;return _s.createSound(oOptions).play();}else{return false;}}
return _s.sounds[sID].play(oOptions);};this.start=this.play;this.setPosition=function(sID,nMsecOffset){if(!_idCheck(sID)){return false;}
return _s.sounds[sID].setPosition(nMsecOffset);};this.stop=function(sID){if(!_idCheck(sID)){return false;}
_s._wD(_sm+'.stop('+sID+')',1);return _s.sounds[sID].stop();};this.stopAll=function(){var oSound;_s._wD(_sm+'.stopAll()',1);for(oSound in _s.sounds){if(_s.sounds.hasOwnProperty(oSound)){_s.sounds[oSound].stop();}}};this.pause=function(sID){if(!_idCheck(sID)){return false;}
return _s.sounds[sID].pause();};this.pauseAll=function(){var i;for(i=_s.soundIDs.length;i--;){_s.sounds[_s.soundIDs[i]].pause();}};this.resume=function(sID){if(!_idCheck(sID)){return false;}
return _s.sounds[sID].resume();};this.resumeAll=function(){var i;for(i=_s.soundIDs.length;i--;){_s.sounds[_s.soundIDs[i]].resume();}};this.togglePause=function(sID){if(!_idCheck(sID)){return false;}
return _s.sounds[sID].togglePause();};this.setPan=function(sID,nPan){if(!_idCheck(sID)){return false;}
return _s.sounds[sID].setPan(nPan);};this.setVolume=function(sID,nVol){if(!_idCheck(sID)){return false;}
return _s.sounds[sID].setVolume(nVol);};this.mute=function(sID){var i=0;if(typeof sID!=='string'){sID=null;}
if(!sID){_s._wD(_sm+'.mute(): Muting all sounds');for(i=_s.soundIDs.length;i--;){_s.sounds[_s.soundIDs[i]].mute();}
_s.muted=true;}else{if(!_idCheck(sID)){return false;}
_s._wD(_sm+'.mute(): Muting "'+sID+'"');return _s.sounds[sID].mute();}
return true;};this.muteAll=function(){_s.mute();};this.unmute=function(sID){var i;if(typeof sID!=='string'){sID=null;}
if(!sID){_s._wD(_sm+'.unmute(): Unmuting all sounds');for(i=_s.soundIDs.length;i--;){_s.sounds[_s.soundIDs[i]].unmute();}
_s.muted=false;}else{if(!_idCheck(sID)){return false;}
_s._wD(_sm+'.unmute(): Unmuting "'+sID+'"');return _s.sounds[sID].unmute();}
return true;};this.unmuteAll=function(){_s.unmute();};this.toggleMute=function(sID){if(!_idCheck(sID)){return false;}
return _s.sounds[sID].toggleMute();};this.getMemoryUse=function(){var ram=0;if(_flash&&_fV!==8){ram=parseInt(_flash._getMemoryUse(),10);}
return ram;};this.disable=function(bNoDisable){var i;if(typeof bNoDisable==='undefined'){bNoDisable=false;}
if(_disabled){return false;}
_disabled=true;_wDS('shutdown',1);for(i=_s.soundIDs.length;i--;){_disableObject(_s.sounds[_s.soundIDs[i]]);}
_initComplete(bNoDisable);_event.remove(_win,'load',_initUserOnload);return true;};this.canPlayMIME=function(sMIME){var result;if(_s.hasHTML5){result=_html5CanPlay({type:sMIME});}
if(!_needsFlash||result){return result;}else{return(sMIME?!!((_fV>8?sMIME.match(_netStreamMimeTypes):null)||sMIME.match(_s.mimePattern)):null);}};this.canPlayURL=function(sURL){var result;if(_s.hasHTML5){result=_html5CanPlay({url:sURL});}
if(!_needsFlash||result){return result;}else{return(sURL?!!(sURL.match(_s.filePattern)):null);}};this.canPlayLink=function(oLink){if(typeof oLink.type!=='undefined'&&oLink.type){if(_s.canPlayMIME(oLink.type)){return true;}}
return _s.canPlayURL(oLink.href);};this.getSoundById=function(sID,_suppressDebug){if(!sID){throw new Error(_sm+'.getSoundById(): sID is null/undefined');}
var result=_s.sounds[sID];if(!result&&!_suppressDebug){_s._wD('"'+sID+'" is an invalid sound ID.',2);}
return result;};this.onready=function(oMethod,oScope){var sType='onready';if(oMethod&&oMethod instanceof Function){if(_didInit){_s._wD(_str('queue',sType));}
if(!oScope){oScope=_win;}
_addOnEvent(sType,oMethod,oScope);_processOnEvents();return true;}else{throw _str('needFunction',sType);}};this.ontimeout=function(oMethod,oScope){var sType='ontimeout';if(oMethod&&oMethod instanceof Function){if(_didInit){_s._wD(_str('queue',sType));}
if(!oScope){oScope=_win;}
_addOnEvent(sType,oMethod,oScope);_processOnEvents({type:sType});return true;}else{throw _str('needFunction',sType);}};this._writeDebug=function(sText,sType,_bTimestamp){var sDID='soundmanager-debug',o,oItem,sMethod;if(!_s.debugMode){return false;}
if(typeof _bTimestamp!=='undefined'&&_bTimestamp){sText=sText+' | '+new Date().getTime();}
if(_hasConsole&&_s.useConsole){sMethod=_debugLevels[sType];if(typeof console[sMethod]!=='undefined'){console[sMethod](sText);}else{console.log(sText);}
if(_s.consoleOnly){return true;}}
try{o=_id(sDID);if(!o){return false;}
oItem=_doc.createElement('div');if(++_wdCount%2===0){oItem.className='sm2-alt';}
if(typeof sType==='undefined'){sType=0;}else{sType=parseInt(sType,10);}
oItem.appendChild(_doc.createTextNode(sText));if(sType){if(sType>=2){oItem.style.fontWeight='bold';}
if(sType===3){oItem.style.color='#ff3333';}}
o.insertBefore(oItem,o.firstChild);}catch(e){}
o=null;return true;};this._wD=this._writeDebug;this._debug=function(){var i,j;_wDS('currentObj',1);for(i=0,j=_s.soundIDs.length;i<j;i++){_s.sounds[_s.soundIDs[i]]._debug();}};this.reboot=function(){_s._wD(_sm+'.reboot()');if(_s.soundIDs.length){_s._wD('Destroying '+_s.soundIDs.length+' SMSound objects...');}
var i,j;for(i=_s.soundIDs.length;i--;){_s.sounds[_s.soundIDs[i]].destruct();}
try{if(_isIE){_oRemovedHTML=_flash.innerHTML;}
_oRemoved=_flash.parentNode.removeChild(_flash);_s._wD('Flash movie removed.');}catch(e){_wDS('badRemove',2);}
_oRemovedHTML=_oRemoved=_needsFlash=null;_s.enabled=_didDCLoaded=_didInit=_waitingForEI=_initPending=_didAppend=_appendSuccess=_disabled=_s.swfLoaded=false;_s.soundIDs=_s.sounds=[];_flash=null;for(i in _on_queue){if(_on_queue.hasOwnProperty(i)){for(j=_on_queue[i].length;j--;){_on_queue[i][j].fired=false;}}}
_s._wD(_sm+': Rebooting...');_win.setTimeout(_s.beginDelayedInit,20);};this.getMoviePercent=function(){return(_flash&&typeof _flash.PercentLoaded!=='undefined'?_flash.PercentLoaded():null);};this.beginDelayedInit=function(){_windowLoaded=true;_domContentLoaded();setTimeout(function(){if(_initPending){return false;}
_createMovie();_initMovie();_initPending=true;return true;},20);_delayWaitForEI();};this.destruct=function(){_s._wD(_sm+'.destruct()');_s.disable(true);};SMSound=function(oOptions){var _t=this,_resetProperties,_add_html5_events,_remove_html5_events,_stop_html5_timer,_start_html5_timer,_attachOnPosition,_onplay_called=false,_onPositionItems=[],_onPositionFired=0,_detachOnPosition,_applyFromTo,_lastURL=null;var _lastHTML5State={duration:null,time:null};this.sID=oOptions.id;this.url=oOptions.url;this.options=_mixin(oOptions);this.instanceOptions=this.options;this._iO=this.instanceOptions;this.pan=this.options.pan;this.volume=this.options.volume;this.isHTML5=false;this._a=null;this.id3={};this._debug=function(){if(_s.debugMode){var stuff=null,msg=[],sF,sfBracket,maxLength=64;for(stuff in _t.options){if(_t.options[stuff]!==null){if(_t.options[stuff]instanceof Function){sF=_t.options[stuff].toString();sF=sF.replace(/\s\s+/g,' ');sfBracket=sF.indexOf('{');msg.push(' '+stuff+': {'+sF.substr(sfBracket+1,(Math.min(Math.max(sF.indexOf('\n')-1,maxLength),maxLength))).replace(/\n/g,'')+'... }');}else{msg.push(' '+stuff+': '+_t.options[stuff]);}}}
_s._wD('SMSound() merged options: {\n'+msg.join(', \n')+'\n}');}};this._debug();this.load=function(oOptions){var oS=null,_iO;if(typeof oOptions!=='undefined'){_t._iO=_mixin(oOptions,_t.options);_t.instanceOptions=_t._iO;}else{oOptions=_t.options;_t._iO=oOptions;_t.instanceOptions=_t._iO;if(_lastURL&&_lastURL!==_t.url){_wDS('manURL');_t._iO.url=_t.url;_t.url=null;}}
if(!_t._iO.url){_t._iO.url=_t.url;}
_t._iO.url=_parseURL(_t._iO.url);_s._wD('SMSound.load(): '+_t._iO.url,1);if(_t._iO.url===_t.url&&_t.readyState!==0&&_t.readyState!==2){_wDS('onURL',1);if(_t.readyState===3&&_t._iO.onload){_t._iO.onload.apply(_t,[(!!_t.duration)]);}
return _t;}
_iO=_t._iO;_lastURL=_t.url;_t.loaded=false;_t.readyState=1;_t.playState=0;if(_html5OK(_iO)){oS=_t._setup_html5(_iO);if(!oS._called_load){_s._wD(_h5+'load: '+_t.sID);_t._html5_canplay=false;_t._a.autobuffer='auto';_t._a.preload='auto';oS.load();oS._called_load=true;if(_iO.autoPlay){_t.play();}}else{_s._wD(_h5+'ignoring request to load again: '+_t.sID);}}else{try{_t.isHTML5=false;_t._iO=_policyFix(_loopFix(_iO));_iO=_t._iO;if(_fV===8){_flash._load(_t.sID,_iO.url,_iO.stream,_iO.autoPlay,(_iO.whileloading?1:0),_iO.loops||1,_iO.usePolicyFile);}else{_flash._load(_t.sID,_iO.url,!!(_iO.stream),!!(_iO.autoPlay),_iO.loops||1,!!(_iO.autoLoad),_iO.usePolicyFile);}}catch(e){_wDS('smError',2);_debugTS('onload',false);_catchError({type:'SMSOUND_LOAD_JS_EXCEPTION',fatal:true});}}
return _t;};this.unload=function(){if(_t.readyState!==0){_s._wD('SMSound.unload(): "'+_t.sID+'"');if(!_t.isHTML5){if(_fV===8){_flash._unload(_t.sID,_emptyURL);}else{_flash._unload(_t.sID);}}else{_stop_html5_timer();if(_t._a){_t._a.pause();_html5Unload(_t._a);}}
_resetProperties();}
return _t;};this.destruct=function(_bFromSM){_s._wD('SMSound.destruct(): "'+_t.sID+'"');if(!_t.isHTML5){_t._iO.onfailure=null;_flash._destroySound(_t.sID);}else{_stop_html5_timer();if(_t._a){_t._a.pause();_html5Unload(_t._a);if(!_useGlobalHTML5Audio){_remove_html5_events();}
_t._a._t=null;_t._a=null;}}
if(!_bFromSM){_s.destroySound(_t.sID,true);}};this.play=function(oOptions,_updatePlayState){var fN,allowMulti,a,onready;fN='SMSound.play(): ';_updatePlayState=_updatePlayState===undefined?true:_updatePlayState;if(!oOptions){oOptions={};}
_t._iO=_mixin(oOptions,_t._iO);_t._iO=_mixin(_t._iO,_t.options);_t._iO.url=_parseURL(_t._iO.url);_t.instanceOptions=_t._iO;if(_t._iO.serverURL&&!_t.connected){if(!_t.getAutoPlay()){_s._wD(fN+' Netstream not connected yet - setting autoPlay');_t.setAutoPlay(true);}
return _t;}
if(_html5OK(_t._iO)){_t._setup_html5(_t._iO);_start_html5_timer();}
if(_t.playState===1&&!_t.paused){allowMulti=_t._iO.multiShot;if(!allowMulti){_s._wD(fN+'"'+_t.sID+'" already playing (one-shot)',1);return _t;}else{_s._wD(fN+'"'+_t.sID+'" already playing (multi-shot)',1);}}
if(!_t.loaded){if(_t.readyState===0){_s._wD(fN+'Attempting to load "'+_t.sID+'"',1);if(!_t.isHTML5){_t._iO.autoPlay=true;}
_t.load(_t._iO);}else if(_t.readyState===2){_s._wD(fN+'Could not load "'+_t.sID+'" - exiting',2);return _t;}else{_s._wD(fN+'"'+_t.sID+'" is loading - attempting to play..',1);}}else{_s._wD(fN+'"'+_t.sID+'"');}
if(!_t.isHTML5&&_fV===9&&_t.position>0&&_t.position===_t.duration){_s._wD(fN+'"'+_t.sID+'": Sound at end, resetting to position:0');oOptions.position=0;}
if(_t.paused&&_t.position&&_t.position>0){_s._wD(fN+'"'+_t.sID+'" is resuming from paused state',1);_t.resume();}else{_t._iO=_mixin(oOptions,_t._iO);if(_t._iO.from!==null&&_t._iO.to!==null&&_t.instanceCount===0&&_t.playState===0&&!_t._iO.serverURL){onready=function(){_t._iO=_mixin(oOptions,_t._iO);_t.play(_t._iO);};if(_t.isHTML5&&!_t._html5_canplay){_s._wD(fN+'Beginning load of "'+_t.sID+'" for from/to case');_t.load({_oncanplay:onready});return false;}else if(!_t.isHTML5&&!_t.loaded&&(!_t.readyState||_t.readyState!==2)){_s._wD(fN+'Preloading "'+_t.sID+'" for from/to case');_t.load({onload:onready});return false;}
_t._iO=_applyFromTo();}
_s._wD(fN+'"'+_t.sID+'" is starting to play');if(!_t.instanceCount||_t._iO.multiShotEvents||(!_t.isHTML5&&_fV>8&&!_t.getAutoPlay())){_t.instanceCount++;}
if(_t.playState===0&&_t._iO.onposition){_attachOnPosition(_t);}
_t.playState=1;_t.paused=false;_t.position=(typeof _t._iO.position!=='undefined'&&!isNaN(_t._iO.position)?_t._iO.position:0);if(!_t.isHTML5){_t._iO=_policyFix(_loopFix(_t._iO));}
if(_t._iO.onplay&&_updatePlayState){_t._iO.onplay.apply(_t);_onplay_called=true;}
_t.setVolume(_t._iO.volume,true);_t.setPan(_t._iO.pan,true);if(!_t.isHTML5){_flash._start(_t.sID,_t._iO.loops||1,(_fV===9?_t._iO.position:_t._iO.position/1000));}else{_start_html5_timer();a=_t._setup_html5();_t.setPosition(_t._iO.position);a.play();}}
return _t;};this.start=this.play;this.stop=function(bAll){var _iO=_t._iO,_oP;if(_t.playState===1){_t._onbufferchange(0);_t._resetOnPosition(0);_t.paused=false;if(!_t.isHTML5){_t.playState=0;}
_detachOnPosition();if(_iO.to){_t.clearOnPosition(_iO.to);}
if(!_t.isHTML5){_flash._stop(_t.sID,bAll);if(_iO.serverURL){_t.unload();}}else{if(_t._a){_oP=_t.position;_t.setPosition(0);_t.position=_oP;_t._a.pause();_t.playState=0;_t._onTimer();_stop_html5_timer();}}
_t.instanceCount=0;_t._iO={};if(_iO.onstop){_iO.onstop.apply(_t);}}
return _t;};this.setAutoPlay=function(autoPlay){_s._wD('sound '+_t.sID+' turned autoplay '+(autoPlay?'on':'off'));_t._iO.autoPlay=autoPlay;if(!_t.isHTML5){_flash._setAutoPlay(_t.sID,autoPlay);if(autoPlay){if(!_t.instanceCount&&_t.readyState===1){_t.instanceCount++;_s._wD('sound '+_t.sID+' incremented instance count to '+_t.instanceCount);}}}};this.getAutoPlay=function(){return _t._iO.autoPlay;};this.setPosition=function(nMsecOffset){if(nMsecOffset===undefined){nMsecOffset=0;}
var original_pos,position,position1K,offset=(_t.isHTML5?Math.max(nMsecOffset,0):Math.min(_t.duration||_t._iO.duration,Math.max(nMsecOffset,0)));original_pos=_t.position;_t.position=offset;position1K=_t.position/1000;_t._resetOnPosition(_t.position);_t._iO.position=offset;if(!_t.isHTML5){position=(_fV===9?_t.position:position1K);if(_t.readyState&&_t.readyState!==2){_flash._setPosition(_t.sID,position,(_t.paused||!_t.playState));}}else if(_t._a){if(_t._html5_canplay){if(_t._a.currentTime!==position1K){_s._wD('setPosition('+position1K+'): setting position');try{_t._a.currentTime=position1K;if(_t.playState===0||_t.paused){_t._a.pause();}}catch(e){_s._wD('setPosition('+position1K+'): setting position failed: '+e.message,2);}}}else{_s._wD('setPosition('+position1K+'): delaying, sound not ready');}}
if(_t.isHTML5){if(_t.paused){_t._onTimer(true);}}
return _t;};this.pause=function(_bCallFlash){if(_t.paused||(_t.playState===0&&_t.readyState!==1)){return _t;}
_s._wD('SMSound.pause()');_t.paused=true;if(!_t.isHTML5){if(_bCallFlash||_bCallFlash===undefined){_flash._pause(_t.sID);}}else{_t._setup_html5().pause();_stop_html5_timer();}
if(_t._iO.onpause){_t._iO.onpause.apply(_t);}
return _t;};this.resume=function(){var _iO=_t._iO;if(!_t.paused){return _t;}
_s._wD('SMSound.resume()');_t.paused=false;_t.playState=1;if(!_t.isHTML5){if(_iO.isMovieStar&&!_iO.serverURL){_t.setPosition(_t.position);}
_flash._pause(_t.sID);}else{_t._setup_html5().play();_start_html5_timer();}
if(_onplay_called&&_iO.onplay){_iO.onplay.apply(_t);_onplay_called=true;}else if(_iO.onresume){_iO.onresume.apply(_t);}
return _t;};this.togglePause=function(){_s._wD('SMSound.togglePause()');if(_t.playState===0){_t.play({position:(_fV===9&&!_t.isHTML5?_t.position:_t.position/1000)});return _t;}
if(_t.paused){_t.resume();}else{_t.pause();}
return _t;};this.setPan=function(nPan,bInstanceOnly){if(typeof nPan==='undefined'){nPan=0;}
if(typeof bInstanceOnly==='undefined'){bInstanceOnly=false;}
if(!_t.isHTML5){_flash._setPan(_t.sID,nPan);}
_t._iO.pan=nPan;if(!bInstanceOnly){_t.pan=nPan;_t.options.pan=nPan;}
return _t;};this.setVolume=function(nVol,_bInstanceOnly){if(typeof nVol==='undefined'){nVol=100;}
if(typeof _bInstanceOnly==='undefined'){_bInstanceOnly=false;}
if(!_t.isHTML5){_flash._setVolume(_t.sID,(_s.muted&&!_t.muted)||_t.muted?0:nVol);}else if(_t._a){_t._a.volume=Math.max(0,Math.min(1,nVol/100));}
_t._iO.volume=nVol;if(!_bInstanceOnly){_t.volume=nVol;_t.options.volume=nVol;}
return _t;};this.mute=function(){_t.muted=true;if(!_t.isHTML5){_flash._setVolume(_t.sID,0);}else if(_t._a){_t._a.muted=true;}
return _t;};this.unmute=function(){_t.muted=false;var hasIO=typeof _t._iO.volume!=='undefined';if(!_t.isHTML5){_flash._setVolume(_t.sID,hasIO?_t._iO.volume:_t.options.volume);}else if(_t._a){_t._a.muted=false;}
return _t;};this.toggleMute=function(){return(_t.muted?_t.unmute():_t.mute());};this.onPosition=function(nPosition,oMethod,oScope){_onPositionItems.push({position:nPosition,method:oMethod,scope:(typeof oScope!=='undefined'?oScope:_t),fired:false});return _t;};this.onposition=this.onPosition;this.clearOnPosition=function(nPosition,oMethod){var i;nPosition=parseInt(nPosition,10);if(isNaN(nPosition)){return false;}
for(i=0;i<_onPositionItems.length;i++){if(nPosition===_onPositionItems[i].position){if(!oMethod||(oMethod===_onPositionItems[i].method)){if(_onPositionItems[i].fired){_onPositionFired--;}
_onPositionItems.splice(i,1);}}}};this._processOnPosition=function(){var i,item,j=_onPositionItems.length;if(!j||!_t.playState||_onPositionFired>=j){return false;}
for(i=j;i--;){item=_onPositionItems[i];if(!item.fired&&_t.position>=item.position){item.fired=true;_onPositionFired++;item.method.apply(item.scope,[item.position]);}}
return true;};this._resetOnPosition=function(nPosition){var i,item,j=_onPositionItems.length;if(!j){return false;}
for(i=j;i--;){item=_onPositionItems[i];if(item.fired&&nPosition<=item.position){item.fired=false;_onPositionFired--;}}
return true;};_applyFromTo=function(){var _iO=_t._iO,f=_iO.from,t=_iO.to,start,end;end=function(){_s._wD(_t.sID+': "to" time of '+t+' reached.');_t.clearOnPosition(t,end);_t.stop();};start=function(){_s._wD(_t.sID+': playing "from" '+f);if(t!==null&&!isNaN(t)){_t.onPosition(t,end);}};if(f!==null&&!isNaN(f)){_iO.position=f;_iO.multiShot=false;start();}
return _iO;};_attachOnPosition=function(){var op=_t._iO.onposition;if(op){var item;for(item in op){if(op.hasOwnProperty(item)){_t.onPosition(parseInt(item,10),op[item]);}}}};_detachOnPosition=function(){var op=_t._iO.onposition;if(op){var item;for(item in op){if(op.hasOwnProperty(item)){_t.clearOnPosition(parseInt(item,10));}}}};_start_html5_timer=function(){if(_t.isHTML5){_startTimer(_t);}};_stop_html5_timer=function(){if(_t.isHTML5){_stopTimer(_t);}};_resetProperties=function(){_onPositionItems=[];_onPositionFired=0;_onplay_called=false;_t._hasTimer=null;_t._a=null;_t._html5_canplay=false;_t.bytesLoaded=null;_t.bytesTotal=null;_t.duration=(_t._iO&&_t._iO.duration?_t._iO.duration:null);_t.durationEstimate=null;_t.eqData=[];_t.eqData.left=[];_t.eqData.right=[];_t.failures=0;_t.isBuffering=false;_t.instanceOptions={};_t.instanceCount=0;_t.loaded=false;_t.metadata={};_t.readyState=0;_t.muted=false;_t.paused=false;_t.peakData={left:0,right:0};_t.waveformData={left:[],right:[]};_t.playState=0;_t.position=null;};_resetProperties();this._onTimer=function(bForce){var duration,isNew=false,time,x={};if(_t._hasTimer||bForce){if(_t._a&&(bForce||((_t.playState>0||_t.readyState===1)&&!_t.paused))){duration=_t._get_html5_duration();if(duration!==_lastHTML5State.duration){_lastHTML5State.duration=duration;_t.duration=duration;isNew=true;}
_t.durationEstimate=_t.duration;time=(_t._a.currentTime*1000||0);if(time!==_lastHTML5State.time){_lastHTML5State.time=time;isNew=true;}
if(isNew||bForce){_t._whileplaying(time,x,x,x,x);}
return isNew;}else{return false;}}};this._get_html5_duration=function(){var _iO=_t._iO,d=(_t._a?_t._a.duration*1000:(_iO?_iO.duration:undefined)),result=(d&&!isNaN(d)&&d!==Infinity?d:(_iO?_iO.duration:null));return result;};this._setup_html5=function(oOptions){var _iO=_mixin(_t._iO,oOptions),d=decodeURI,_a=_useGlobalHTML5Audio?_s._global_a:_t._a,_dURL=d(_iO.url),_oldIO=(_a&&_a._t?_a._t.instanceOptions:null);if(_a){if(_a._t){if(!_useGlobalHTML5Audio&&_dURL===d(_lastURL)){return _a;}else if(_useGlobalHTML5Audio&&_oldIO.url===_iO.url&&(!_lastURL||(_lastURL===_oldIO.url))){return _a;}}
_s._wD('setting new URL on existing object: '+_dURL+(_lastURL?', old URL: '+_lastURL:''));if(_useGlobalHTML5Audio&&_a._t&&_a._t.playState&&_iO.url!==_oldIO.url){_a._t.stop();}
_resetProperties();_a.src=_iO.url;_t.url=_iO.url;_lastURL=_iO.url;_a._called_load=false;}else{_s._wD('creating HTML5 Audio() element with URL: '+_dURL);_a=new Audio(_iO.url);_a._called_load=false;if(_is_android){_a._called_load=true;}
if(_useGlobalHTML5Audio){_s._global_a=_a;}}
_t.isHTML5=true;_t._a=_a;_a._t=_t;_add_html5_events();_a.loop=(_iO.loops>1?'loop':'');if(_iO.autoLoad||_iO.autoPlay){_t.load();}else{_a.autobuffer=false;_a.preload='none';}
_a.loop=(_iO.loops>1?'loop':'');return _a;};_add_html5_events=function(){if(_t._a._added_events){return false;}
var f;function add(oEvt,oFn,bCapture){return _t._a?_t._a.addEventListener(oEvt,oFn,bCapture||false):null;}
_s._wD(_h5+'adding event listeners: '+_t.sID);_t._a._added_events=true;for(f in _html5_events){if(_html5_events.hasOwnProperty(f)){add(f,_html5_events[f]);}}
return true;};_remove_html5_events=function(){var f;function remove(oEvt,oFn,bCapture){return(_t._a?_t._a.removeEventListener(oEvt,oFn,bCapture||false):null);}
_s._wD(_h5+'removing event listeners: '+_t.sID);_t._a._added_events=false;for(f in _html5_events){if(_html5_events.hasOwnProperty(f)){remove(f,_html5_events[f]);}}};this._onload=function(nSuccess){var fN,loadOK=!!(nSuccess);_s._wD(fN+'"'+_t.sID+'"'+(loadOK?' loaded.':' failed to load? - '+_t.url),(loadOK?1:2));fN='SMSound._onload(): ';if(!loadOK&&!_t.isHTML5){if(_s.sandbox.noRemote===true){_s._wD(fN+_str('noNet'),1);}
if(_s.sandbox.noLocal===true){_s._wD(fN+_str('noLocal'),1);}}
_t.loaded=loadOK;_t.readyState=loadOK?3:2;_t._onbufferchange(0);if(_t._iO.onload){_t._iO.onload.apply(_t,[loadOK]);}
return true;};this._onbufferchange=function(nIsBuffering){if(_t.playState===0){return false;}
if((nIsBuffering&&_t.isBuffering)||(!nIsBuffering&&!_t.isBuffering)){return false;}
_t.isBuffering=(nIsBuffering===1);if(_t._iO.onbufferchange){_s._wD('SMSound._onbufferchange(): '+nIsBuffering);_t._iO.onbufferchange.apply(_t);}
return true;};this._onsuspend=function(){if(_t._iO.onsuspend){_s._wD('SMSound._onsuspend()');_t._iO.onsuspend.apply(_t);}
return true;};this._onfailure=function(msg,level,code){_t.failures++;_s._wD('SMSound._onfailure(): "'+_t.sID+'" count '+_t.failures);if(_t._iO.onfailure&&_t.failures===1){_t._iO.onfailure(_t,msg,level,code);}else{_s._wD('SMSound._onfailure(): ignoring');}};this._onfinish=function(){var _io_onfinish=_t._iO.onfinish;_t._onbufferchange(0);_t._resetOnPosition(0);if(_t.instanceCount){_t.instanceCount--;if(!_t.instanceCount){_detachOnPosition();_t.playState=0;_t.paused=false;_t.instanceCount=0;_t.instanceOptions={};_t._iO={};_stop_html5_timer();}
if(!_t.instanceCount||_t._iO.multiShotEvents){if(_io_onfinish){_s._wD('SMSound._onfinish(): "'+_t.sID+'"');_io_onfinish.apply(_t);}}}};this._whileloading=function(nBytesLoaded,nBytesTotal,nDuration,nBufferLength){var _iO=_t._iO;_t.bytesLoaded=nBytesLoaded;_t.bytesTotal=nBytesTotal;_t.duration=Math.floor(nDuration);_t.bufferLength=nBufferLength;if(!_iO.isMovieStar){if(_iO.duration){_t.durationEstimate=(_t.duration>_iO.duration)?_t.duration:_iO.duration;}else{_t.durationEstimate=parseInt((_t.bytesTotal/_t.bytesLoaded)*_t.duration,10);}
if(_t.durationEstimate===undefined){_t.durationEstimate=_t.duration;}
if(_t.readyState!==3&&_iO.whileloading){_iO.whileloading.apply(_t);}}else{_t.durationEstimate=_t.duration;if(_t.readyState!==3&&_iO.whileloading){_iO.whileloading.apply(_t);}}};this._whileplaying=function(nPosition,oPeakData,oWaveformDataLeft,oWaveformDataRight,oEQData){var _iO=_t._iO;if(isNaN(nPosition)||nPosition===null){return false;}
_t.position=nPosition;_t._processOnPosition();if(!_t.isHTML5&&_fV>8){if(_iO.usePeakData&&typeof oPeakData!=='undefined'&&oPeakData){_t.peakData={left:oPeakData.leftPeak,right:oPeakData.rightPeak};}
if(_iO.useWaveformData&&typeof oWaveformDataLeft!=='undefined'&&oWaveformDataLeft){_t.waveformData={left:oWaveformDataLeft.split(','),right:oWaveformDataRight.split(',')};}
if(_iO.useEQData){if(typeof oEQData!=='undefined'&&oEQData&&oEQData.leftEQ){var eqLeft=oEQData.leftEQ.split(',');_t.eqData=eqLeft;_t.eqData.left=eqLeft;if(typeof oEQData.rightEQ!=='undefined'&&oEQData.rightEQ){_t.eqData.right=oEQData.rightEQ.split(',');}}}}
if(_t.playState===1){if(!_t.isHTML5&&_fV===8&&!_t.position&&_t.isBuffering){_t._onbufferchange(0);}
if(_iO.whileplaying){_iO.whileplaying.apply(_t);}}
return true;};this._onmetadata=function(oMDProps,oMDData){_s._wD('SMSound._onmetadata(): "'+this.sID+'" metadata received.');var oData={},i,j;for(i=0,j=oMDProps.length;i<j;i++){oData[oMDProps[i]]=oMDData[i];}
_t.metadata=oData;if(_t._iO.onmetadata){_t._iO.onmetadata.apply(_t);}};this._onid3=function(oID3Props,oID3Data){_s._wD('SMSound._onid3(): "'+this.sID+'" ID3 data received.');var oData=[],i,j;for(i=0,j=oID3Props.length;i<j;i++){oData[oID3Props[i]]=oID3Data[i];}
_t.id3=_mixin(_t.id3,oData);if(_t._iO.onid3){_t._iO.onid3.apply(_t);}};this._onconnect=function(bSuccess){bSuccess=(bSuccess===1);_s._wD('SMSound._onconnect(): "'+_t.sID+'"'+(bSuccess?' connected.':' failed to connect? - '+_t.url),(bSuccess?1:2));_t.connected=bSuccess;if(bSuccess){_t.failures=0;if(_idCheck(_t.sID)){if(_t.getAutoPlay()){_t.play(undefined,_t.getAutoPlay());}else if(_t._iO.autoLoad){_t.load();}}
if(_t._iO.onconnect){_t._iO.onconnect.apply(_t,[bSuccess]);}}};this._ondataerror=function(sError){if(_t.playState>0){_s._wD('SMSound._ondataerror(): '+sError);if(_t._iO.ondataerror){_t._iO.ondataerror.apply(_t);}}};};_getDocument=function(){return(_doc.body||_doc._docElement||_doc.getElementsByTagName('div')[0]);};_id=function(sID){return _doc.getElementById(sID);};_mixin=function(oMain,oAdd){var o1={},i,o2,o;for(i in oMain){if(oMain.hasOwnProperty(i)){o1[i]=oMain[i];}}
o2=(typeof oAdd==='undefined'?_s.defaultOptions:oAdd);for(o in o2){if(o2.hasOwnProperty(o)&&typeof o1[o]==='undefined'){o1[o]=o2[o];}}
return o1;};_event=(function(){var old=(_win.attachEvent),evt={add:(old?'attachEvent':'addEventListener'),remove:(old?'detachEvent':'removeEventListener')};function getArgs(oArgs){var args=_slice.call(oArgs),len=args.length;if(old){args[1]='on'+args[1];if(len>3){args.pop();}}else if(len===3){args.push(false);}
return args;}
function apply(args,sType){var element=args.shift(),method=[evt[sType]];if(old){element[method](args[0],args[1]);}else{element[method].apply(element,args);}}
function add(){apply(getArgs(arguments),'add');}
function remove(){apply(getArgs(arguments),'remove');}
return{'add':add,'remove':remove};}());function _html5_event(oFn){return function(e){var t=this._t;if(!t||!t._a){if(t&&t.sID){_s._wD(_h5+'ignoring '+e.type+': '+t.sID);}else{_s._wD(_h5+'ignoring '+e.type);}
return null;}else{return oFn.call(this,e);}};}
_html5_events={abort:_html5_event(function(e){_s._wD(_h5+'abort: '+this._t.sID);}),canplay:_html5_event(function(e){var t=this._t;if(t._html5_canplay){return true;}
t._html5_canplay=true;_s._wD(_h5+'canplay: '+t.sID+', '+t.url);t._onbufferchange(0);var position1K=(!isNaN(t.position)?t.position/1000:null);if(t.position&&this.currentTime!==position1K){_s._wD(_h5+'canplay: setting position to '+position1K);try{this.currentTime=position1K;}catch(ee){_s._wD(_h5+'setting position failed: '+ee.message,2);}}
if(t._iO._oncanplay){t._iO._oncanplay();}}),load:_html5_event(function(e){var t=this._t;if(!t.loaded){t._onbufferchange(0);t._whileloading(t.bytesTotal,t.bytesTotal,t._get_html5_duration());t._onload(true);}}),emptied:_html5_event(function(e){_s._wD(_h5+'emptied: '+this._t.sID);}),ended:_html5_event(function(e){var t=this._t;_s._wD(_h5+'ended: '+t.sID);t._onfinish();}),error:_html5_event(function(e){_s._wD(_h5+'error: '+this.error.code);this._t._onload(false);}),loadeddata:_html5_event(function(e){var t=this._t,bytesTotal=t.bytesTotal||1;_s._wD(_h5+'loadeddata: '+this._t.sID);if(!t._loaded&&!_isSafari){t.duration=t._get_html5_duration();t._whileloading(bytesTotal,bytesTotal,t._get_html5_duration());t._onload(true);}}),loadedmetadata:_html5_event(function(e){_s._wD(_h5+'loadedmetadata: '+this._t.sID);}),loadstart:_html5_event(function(e){_s._wD(_h5+'loadstart: '+this._t.sID);this._t._onbufferchange(1);}),play:_html5_event(function(e){_s._wD(_h5+'play: '+this._t.sID+', '+this._t.url);this._t._onbufferchange(0);}),playing:_html5_event(function(e){_s._wD(_h5+'playing: '+this._t.sID);this._t._onbufferchange(0);}),progress:_html5_event(function(e){var t=this._t;if(t.loaded){return false;}
var i,j,str,buffered=0,isProgress=(e.type==='progress'),ranges=e.target.buffered,loaded=(e.loaded||0),total=(e.total||1);if(ranges&&ranges.length){for(i=ranges.length;i--;){buffered=(ranges.end(i)-ranges.start(i));}
loaded=buffered/e.target.duration;if(isProgress&&ranges.length>1){str=[];j=ranges.length;for(i=0;i<j;i++){str.push(e.target.buffered.start(i)+'-'+e.target.buffered.end(i));}
_s._wD(_h5+'progress: timeRanges: '+str.join(', '));}
if(isProgress&&!isNaN(loaded)){_s._wD(_h5+'progress: '+t.sID+': '+Math.floor(loaded*100)+'% loaded');}}
if(!isNaN(loaded)){t._onbufferchange(0);t._whileloading(loaded,total,t._get_html5_duration());if(loaded&&total&&loaded===total){_html5_events.load.call(this,e);}}}),ratechange:_html5_event(function(e){_s._wD(_h5+'ratechange: '+this._t.sID);}),suspend:_html5_event(function(e){var t=this._t;_s._wD(_h5+'suspend: '+t.sID);_html5_events.progress.call(this,e);t._onsuspend();}),stalled:_html5_event(function(e){_s._wD(_h5+'stalled: '+this._t.sID);}),timeupdate:_html5_event(function(e){this._t._onTimer();}),waiting:_html5_event(function(e){var t=this._t;_s._wD(_h5+'waiting: '+t.sID);t._onbufferchange(1);})};_html5OK=function(iO){return(!iO.serverURL&&(iO.type?_html5CanPlay({type:iO.type}):_html5CanPlay({url:iO.url})||_s.html5Only));};_html5Unload=function(oAudio){if(oAudio){oAudio.src=(_is_firefox?'':_emptyURL);}};_html5CanPlay=function(o){if(!_s.useHTML5Audio||!_s.hasHTML5){return false;}
var url=(o.url||null),mime=(o.type||null),aF=_s.audioFormats,result,offset,fileExt,item;function preferFlashCheck(kind){return(_s.preferFlash&&_hasFlash&&!_s.ignoreFlash&&(typeof _s.flash[kind]!=='undefined'&&_s.flash[kind]));}
if(mime&&_s.html5[mime]!=='undefined'){return(_s.html5[mime]&&!preferFlashCheck(mime));}
if(!_html5Ext){_html5Ext=[];for(item in aF){if(aF.hasOwnProperty(item)){_html5Ext.push(item);if(aF[item].related){_html5Ext=_html5Ext.concat(aF[item].related);}}}
_html5Ext=new RegExp('\\.('+_html5Ext.join('|')+')(\\?.*)?$','i');}
fileExt=(url?url.toLowerCase().match(_html5Ext):null);if(!fileExt||!fileExt.length){if(!mime){return false;}else{offset=mime.indexOf(';');fileExt=(offset!==-1?mime.substr(0,offset):mime).substr(6);}}else{fileExt=fileExt[1];}
if(fileExt&&typeof _s.html5[fileExt]!=='undefined'){return(_s.html5[fileExt]&&!preferFlashCheck(fileExt));}else{mime='audio/'+fileExt;result=_s.html5.canPlayType({type:mime});_s.html5[fileExt]=result;return(result&&_s.html5[mime]&&!preferFlashCheck(mime));}};_testHTML5=function(){if(!_s.useHTML5Audio||typeof Audio==='undefined'){return false;}
var a=(typeof Audio!=='undefined'?(_isOpera?new Audio(null):new Audio()):null),item,support={},aF,i;function _cp(m){var canPlay,i,j,isOK=false;if(!a||typeof a.canPlayType!=='function'){return false;}
if(m instanceof Array){for(i=0,j=m.length;i<j&&!isOK;i++){if(_s.html5[m[i]]||a.canPlayType(m[i]).match(_s.html5Test)){isOK=true;_s.html5[m[i]]=true;_s.flash[m[i]]=!!(_s.preferFlash&&_hasFlash&&m[i].match(_flashMIME));}}
return isOK;}else{canPlay=(a&&typeof a.canPlayType==='function'?a.canPlayType(m):false);return!!(canPlay&&(canPlay.match(_s.html5Test)));}}
aF=_s.audioFormats;for(item in aF){if(aF.hasOwnProperty(item)){support[item]=_cp(aF[item].type);support['audio/'+item]=support[item];if(_s.preferFlash&&!_s.ignoreFlash&&item.match(_flashMIME)){_s.flash[item]=true;}else{_s.flash[item]=false;}
if(aF[item]&&aF[item].related){for(i=aF[item].related.length;i--;){support['audio/'+aF[item].related[i]]=support[item];_s.html5[aF[item].related[i]]=support[item];_s.flash[aF[item].related[i]]=support[item];}}}}
support.canPlayType=(a?_cp:null);_s.html5=_mixin(_s.html5,support);return true;};_strings={notReady:'Not loaded yet - wait for soundManager.onload()/onready()',notOK:'Audio support is not available.',domError:_smc+'createMovie(): appendChild/innerHTML call failed. DOM not ready or other error.',spcWmode:_smc+'createMovie(): Removing wmode, preventing known SWF loading issue(s)',swf404:_sm+': Verify that %s is a valid path.',tryDebug:'Try '+_sm+'.debugFlash = true for more security details (output goes to SWF.)',checkSWF:'See SWF output for more debug info.',localFail:_sm+': Non-HTTP page ('+_doc.location.protocol+' URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/',waitFocus:_sm+': Special case: Waiting for focus-related event..',waitImpatient:_sm+': Getting impatient, still waiting for Flash%s...',waitForever:_sm+': Waiting indefinitely for Flash (will recover if unblocked)...',needFunction:_sm+': Function object expected for %s',badID:'Warning: Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:'--- '+_sm+'._debug(): Current sound objects ---',waitEI:_smc+'initMovie(): Waiting for ExternalInterface call from Flash..',waitOnload:_sm+': Waiting for window.onload()',docLoaded:_sm+': Document already loaded',onload:_smc+'initComplete(): calling soundManager.onload()',onloadOK:_sm+'.onload() complete',init:_smc+'init()',didInit:_smc+'init(): Already called?',flashJS:_sm+': Attempting to call Flash from JS..',secNote:'Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html',badRemove:'Warning: Failed to remove flash movie.',noPeak:'Warning: peakData features unsupported for movieStar formats',shutdown:_sm+'.disable(): Shutting down',queue:_sm+': Queueing %s handler',smFail:_sm+': Failed to initialise.',smError:'SMSound.load(): Exception: JS-Flash communication failed, or JS error.',fbTimeout:'No flash response, applying .'+_swfCSS.swfTimedout+' CSS..',fbLoaded:'Flash loaded',fbHandler:_smc+'flashBlockHandler()',manURL:'SMSound.load(): Using manually-assigned URL',onURL:_sm+'.load(): current URL already assigned.',badFV:_sm+'.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:'Note: Setting stream:false so looping can work (flash 8 limitation)',noNSLoop:'Note: Looping not implemented for MovieStar formats',needfl9:'Note: Switching to flash 9, required for MP4 formats.',mfTimeout:'Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case',mfOn:'mobileFlash::enabling on-screen flash repositioning',policy:'Enabling usePolicyFile for data access'};_str=function(){var args=_slice.call(arguments),o=args.shift(),str=(_strings&&_strings[o]?_strings[o]:''),i,j;if(str&&args&&args.length){for(i=0,j=args.length;i<j;i++){str=str.replace('%s',args[i]);}}
return str;};_loopFix=function(sOpt){if(_fV===8&&sOpt.loops>1&&sOpt.stream){_wDS('as2loop');sOpt.stream=false;}
return sOpt;};_policyFix=function(sOpt,sPre){if(sOpt&&!sOpt.usePolicyFile&&(sOpt.onid3||sOpt.usePeakData||sOpt.useWaveformData||sOpt.useEQData)){_s._wD((sPre||'')+_str('policy'));sOpt.usePolicyFile=true;}
return sOpt;};_complain=function(sMsg){if(typeof console!=='undefined'&&typeof console.warn!=='undefined'){console.warn(sMsg);}else{_s._wD(sMsg);}};_doNothing=function(){return false;};_disableObject=function(o){var oProp;for(oProp in o){if(o.hasOwnProperty(oProp)&&typeof o[oProp]==='function'){o[oProp]=_doNothing;}}
oProp=null;};_failSafely=function(bNoDisable){if(typeof bNoDisable==='undefined'){bNoDisable=false;}
if(_disabled||bNoDisable){_wDS('smFail',2);_s.disable(bNoDisable);}};_normalizeMovieURL=function(smURL){var urlParams=null,url;if(smURL){if(smURL.match(/\.swf(\?.*)?$/i)){urlParams=smURL.substr(smURL.toLowerCase().lastIndexOf('.swf?')+4);if(urlParams){return smURL;}}else if(smURL.lastIndexOf('/')!==smURL.length-1){smURL+='/';}}
url=(smURL&&smURL.lastIndexOf('/')!==-1?smURL.substr(0,smURL.lastIndexOf('/')+1):'./')+_s.movieURL;if(_s.noSWFCache){url+=('?ts='+new Date().getTime());}
return url;};_setVersionInfo=function(){_fV=parseInt(_s.flashVersion,10);if(_fV!==8&&_fV!==9){_s._wD(_str('badFV',_fV,_defaultFlashVersion));_s.flashVersion=_fV=_defaultFlashVersion;}
var isDebug=(_s.debugMode||_s.debugFlash?'_debug.swf':'.swf');if(_s.useHTML5Audio&&!_s.html5Only&&_s.audioFormats.mp4.required&&_fV<9){_s._wD(_str('needfl9'));_s.flashVersion=_fV=9;}
_s.version=_s.versionNumber+(_s.html5Only?' (HTML5-only mode)':(_fV===9?' (AS3/Flash 9)':' (AS2/Flash 8)'));if(_fV>8){_s.defaultOptions=_mixin(_s.defaultOptions,_s.flash9Options);_s.features.buffering=true;_s.defaultOptions=_mixin(_s.defaultOptions,_s.movieStarOptions);_s.filePatterns.flash9=new RegExp('\\.(mp3|'+_netStreamTypes.join('|')+')(\\?.*)?$','i');_s.features.movieStar=true;}else{_s.features.movieStar=false;}
_s.filePattern=_s.filePatterns[(_fV!==8?'flash9':'flash8')];_s.movieURL=(_fV===8?'soundmanager2.swf':'soundmanager2_flash9.swf').replace('.swf',isDebug);_s.features.peakData=_s.features.waveformData=_s.features.eqData=(_fV>8);};_setPolling=function(bPolling,bHighPerformance){if(!_flash){return false;}
_flash._setPolling(bPolling,bHighPerformance);};_initDebug=function(){if(_s.debugURLParam.test(_wl)){_s.debugMode=true;}
if(_id(_s.debugID)){return false;}
var oD,oDebug,oTarget,oToggle,tmp;if(_s.debugMode&&!_id(_s.debugID)&&(!_hasConsole||!_s.useConsole||!_s.consoleOnly)){oD=_doc.createElement('div');oD.id=_s.debugID+'-toggle';oToggle={'position':'fixed','bottom':'0px','right':'0px','width':'1.2em','height':'1.2em','lineHeight':'1.2em','margin':'2px','textAlign':'center','border':'1px solid #999','cursor':'pointer','background':'#fff','color':'#333','zIndex':10001};oD.appendChild(_doc.createTextNode('-'));oD.onclick=_toggleDebug;oD.title='Toggle SM2 debug console';if(_ua.match(/msie 6/i)){oD.style.position='absolute';oD.style.cursor='hand';}
for(tmp in oToggle){if(oToggle.hasOwnProperty(tmp)){oD.style[tmp]=oToggle[tmp];}}
oDebug=_doc.createElement('div');oDebug.id=_s.debugID;oDebug.style.display=(_s.debugMode?'block':'none');if(_s.debugMode&&!_id(oD.id)){try{oTarget=_getDocument();oTarget.appendChild(oD);}catch(e2){throw new Error(_str('domError')+' \n'+e2.toString());}
oTarget.appendChild(oDebug);}}
oTarget=null;};_idCheck=this.getSoundById;_wDS=function(o,errorLevel){if(!o){return'';}else{return _s._wD(_str(o),errorLevel);}};if(_wl.indexOf('sm2-debug=alert')+1&&_s.debugMode){_s._wD=function(sText){window.alert(sText);};}
_toggleDebug=function(){var o=_id(_s.debugID),oT=_id(_s.debugID+'-toggle');if(!o){return false;}
if(_debugOpen){oT.innerHTML='+';o.style.display='none';}else{oT.innerHTML='-';o.style.display='block';}
_debugOpen=!_debugOpen;};_debugTS=function(sEventType,bSuccess,sMessage){if(typeof sm2Debugger!=='undefined'){try{sm2Debugger.handleEvent(sEventType,bSuccess,sMessage);}catch(e){}}
return true;};_getSWFCSS=function(){var css=[];if(_s.debugMode){css.push(_swfCSS.sm2Debug);}
if(_s.debugFlash){css.push(_swfCSS.flashDebug);}
if(_s.useHighPerformance){css.push(_swfCSS.highPerf);}
return css.join(' ');};_flashBlockHandler=function(){var name=_str('fbHandler'),p=_s.getMoviePercent(),css=_swfCSS,error={type:'FLASHBLOCK'};if(_s.html5Only){return false;}
if(!_s.ok()){if(_needsFlash){_s.oMC.className=_getSWFCSS()+' '+css.swfDefault+' '+(p===null?css.swfTimedout:css.swfError);_s._wD(name+': '+_str('fbTimeout')+(p?' ('+_str('fbLoaded')+')':''));}
_s.didFlashBlock=true;_processOnEvents({type:'ontimeout',ignoreInit:true,error:error});_catchError(error);}else{if(_s.didFlashBlock){_s._wD(name+': Unblocked');}
if(_s.oMC){_s.oMC.className=[_getSWFCSS(),css.swfDefault,css.swfLoaded+(_s.didFlashBlock?' '+css.swfUnblocked:'')].join(' ');}}};_addOnEvent=function(sType,oMethod,oScope){if(typeof _on_queue[sType]==='undefined'){_on_queue[sType]=[];}
_on_queue[sType].push({'method':oMethod,'scope':(oScope||null),'fired':false});};_processOnEvents=function(oOptions){if(!oOptions){oOptions={type:'onready'};}
if(!_didInit&&oOptions&&!oOptions.ignoreInit){return false;}
if(oOptions.type==='ontimeout'&&_s.ok()){return false;}
var status={success:(oOptions&&oOptions.ignoreInit?_s.ok():!_disabled)},srcQueue=(oOptions&&oOptions.type?_on_queue[oOptions.type]||[]:[]),queue=[],i,j,args=[status],canRetry=(_needsFlash&&_s.useFlashBlock&&!_s.ok());if(oOptions.error){args[0].error=oOptions.error;}
for(i=0,j=srcQueue.length;i<j;i++){if(srcQueue[i].fired!==true){queue.push(srcQueue[i]);}}
if(queue.length){_s._wD(_sm+': Firing '+queue.length+' '+oOptions.type+'() item'+(queue.length===1?'':'s'));for(i=0,j=queue.length;i<j;i++){if(queue[i].scope){queue[i].method.apply(queue[i].scope,args);}else{queue[i].method.apply(this,args);}
if(!canRetry){queue[i].fired=true;}}}
return true;};_initUserOnload=function(){_win.setTimeout(function(){if(_s.useFlashBlock){_flashBlockHandler();}
_processOnEvents();if(_s.onload instanceof Function){_wDS('onload',1);_s.onload.apply(_win);_wDS('onloadOK',1);}
if(_s.waitForWindowLoad){_event.add(_win,'load',_initUserOnload);}},1);};_detectFlash=function(){if(_hasFlash!==undefined){return _hasFlash;}
var hasPlugin=false,n=navigator,nP=n.plugins,obj,type,types,AX=_win.ActiveXObject;if(nP&&nP.length){type='application/x-shockwave-flash';types=n.mimeTypes;if(types&&types[type]&&types[type].enabledPlugin&&types[type].enabledPlugin.description){hasPlugin=true;}}else if(typeof AX!=='undefined'){try{obj=new AX('ShockwaveFlash.ShockwaveFlash');}catch(e){}
hasPlugin=(!!obj);}
_hasFlash=hasPlugin;return hasPlugin;};_featureCheck=function(){var needsFlash,item,isSpecial=(_is_iDevice&&!!(_ua.match(/os (1|2|3_0|3_1)/i)));if(isSpecial){_s.hasHTML5=false;_s.html5Only=true;if(_s.oMC){_s.oMC.style.display='none';}
return false;}
if(_s.useHTML5Audio){if(!_s.html5||!_s.html5.canPlayType){_s._wD('SoundManager: No HTML5 Audio() support detected.');_s.hasHTML5=false;return true;}else{_s.hasHTML5=true;}
if(_isBadSafari){_s._wD(_smc+'Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - '+(!_hasFlash?' would use flash fallback for MP3/MP4, but none detected.':'will use flash fallback for MP3/MP4, if available'),1);if(_detectFlash()){return true;}}}else{return true;}
for(item in _s.audioFormats){if(_s.audioFormats.hasOwnProperty(item)){if((_s.audioFormats[item].required&&!_s.html5.canPlayType(_s.audioFormats[item].type))||_s.flash[item]||_s.flash[_s.audioFormats[item].type]){needsFlash=true;}}}
if(_s.ignoreFlash){needsFlash=false;}
_s.html5Only=(_s.hasHTML5&&_s.useHTML5Audio&&!needsFlash);return(!_s.html5Only);};_parseURL=function(url){var i,j,result=0;if(url instanceof Array){for(i=0,j=url.length;i<j;i++){if(url[i]instanceof Object){if(_s.canPlayMIME(url[i].type)){result=i;break;}}else if(_s.canPlayURL(url[i])){result=i;break;}}
if(url[result].url){url[result]=url[result].url;}
return url[result];}else{return url;}};_startTimer=function(oSound){if(!oSound._hasTimer){oSound._hasTimer=true;if(!_likesHTML5&&_s.html5PollingInterval){if(_h5IntervalTimer===null&&_h5TimerCount===0){_h5IntervalTimer=window.setInterval(_timerExecute,_s.html5PollingInterval);}
_h5TimerCount++;}}};_stopTimer=function(oSound){if(oSound._hasTimer){oSound._hasTimer=false;if(!_likesHTML5&&_s.html5PollingInterval){_h5TimerCount--;}}};_timerExecute=function(){var i,j;if(_h5IntervalTimer!==null&&!_h5TimerCount){window.clearInterval(_h5IntervalTimer);_h5IntervalTimer=null;return false;}
for(i=_s.soundIDs.length;i--;){if(_s.sounds[_s.soundIDs[i]].isHTML5&&_s.sounds[_s.soundIDs[i]]._hasTimer){_s.sounds[_s.soundIDs[i]]._onTimer();}}};_catchError=function(options){options=(typeof options!=='undefined'?options:{});if(_s.onerror instanceof Function){_s.onerror.apply(_win,[{type:(typeof options.type!=='undefined'?options.type:null)}]);}
if(typeof options.fatal!=='undefined'&&options.fatal){_s.disable();}};_badSafariFix=function(){if(!_isBadSafari||!_detectFlash()){return false;}
var aF=_s.audioFormats,i,item;for(item in aF){if(aF.hasOwnProperty(item)){if(item==='mp3'||item==='mp4'){_s._wD(_sm+': Using flash fallback for '+item+' format');_s.html5[item]=false;if(aF[item]&&aF[item].related){for(i=aF[item].related.length;i--;){_s.html5[aF[item].related[i]]=false;}}}}}};this._setSandboxType=function(sandboxType){var sb=_s.sandbox;sb.type=sandboxType;sb.description=sb.types[(typeof sb.types[sandboxType]!=='undefined'?sandboxType:'unknown')];_s._wD('Flash security sandbox type: '+sb.type);if(sb.type==='localWithFile'){sb.noRemote=true;sb.noLocal=false;_wDS('secNote',2);}else if(sb.type==='localWithNetwork'){sb.noRemote=false;sb.noLocal=true;}else if(sb.type==='localTrusted'){sb.noRemote=false;sb.noLocal=false;}};this._externalInterfaceOK=function(flashDate,swfVersion){if(_s.swfLoaded){return false;}
var e,eiTime=new Date().getTime();_s._wD(_smc+'externalInterfaceOK()'+(flashDate?' (~'+(eiTime-flashDate)+' ms)':''));_debugTS('swf',true);_debugTS('flashtojs',true);_s.swfLoaded=true;_tryInitOnFocus=false;if(_isBadSafari){_badSafariFix();}
if(!swfVersion||swfVersion.replace(/\+dev/i,'')!==_s.versionNumber.replace(/\+dev/i,'')){e=_sm+': Fatal: JavaScript file build "'+_s.versionNumber+'" does not match Flash SWF build "'+swfVersion+'" at '+_s.url+'. Ensure both are up-to-date.';setTimeout(function versionMismatch(){throw new Error(e);},0);return false;}
if(_isIE){setTimeout(_init,100);}else{_init();}};_createMovie=function(smID,smURL){if(_didAppend&&_appendSuccess){return false;}
function _initMsg(){_s._wD('-- SoundManager 2 '+_s.version+(!_s.html5Only&&_s.useHTML5Audio?(_s.hasHTML5?' + HTML5 audio':', no HTML5 audio support'):'')+(!_s.html5Only?(_s.useHighPerformance?', high performance mode, ':', ')+((_s.flashPollingInterval?'custom ('+_s.flashPollingInterval+'ms)':'normal')+' polling')+(_s.wmode?', wmode: '+_s.wmode:'')+(_s.debugFlash?', flash debug mode':'')+(_s.useFlashBlock?', flashBlock mode':''):'')+' --',1);}
if(_s.html5Only){_setVersionInfo();_initMsg();_s.oMC=_id(_s.movieID);_init();_didAppend=true;_appendSuccess=true;return false;}
var remoteURL=(smURL||_s.url),localURL=(_s.altURL||remoteURL),swfTitle='JS/Flash audio component (SoundManager 2)',oEmbed,oMovie,oTarget=_getDocument(),tmp,movieHTML,oEl,extraClass=_getSWFCSS(),s,x,sClass,side='auto',isRTL=null,html=_doc.getElementsByTagName('html')[0];isRTL=(html&&html.dir&&html.dir.match(/rtl/i));smID=(typeof smID==='undefined'?_s.id:smID);function param(name,value){return'<param name="'+name+'" value="'+value+'" />';}
_setVersionInfo();_s.url=_normalizeMovieURL(_overHTTP?remoteURL:localURL);smURL=_s.url;_s.wmode=(!_s.wmode&&_s.useHighPerformance?'transparent':_s.wmode);if(_s.wmode!==null&&(_ua.match(/msie 8/i)||(!_isIE&&!_s.useHighPerformance))&&navigator.platform.match(/win32|win64/i)){_wDS('spcWmode');_s.wmode=null;}
oEmbed={'name':smID,'id':smID,'src':smURL,'width':side,'height':side,'quality':'high','allowScriptAccess':_s.allowScriptAccess,'bgcolor':_s.bgColor,'pluginspage':_http+'www.macromedia.com/go/getflashplayer','title':swfTitle,'type':'application/x-shockwave-flash','wmode':_s.wmode,'hasPriority':'true'};if(_s.debugFlash){oEmbed.FlashVars='debug=1';}
if(!_s.wmode){delete oEmbed.wmode;}
if(_isIE){oMovie=_doc.createElement('div');movieHTML=['<object id="'+smID+'" data="'+smURL+'" type="'+oEmbed.type+'" title="'+oEmbed.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+_http+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0" width="'+oEmbed.width+'" height="'+oEmbed.height+'">',param('movie',smURL),param('AllowScriptAccess',_s.allowScriptAccess),param('quality',oEmbed.quality),(_s.wmode?param('wmode',_s.wmode):''),param('bgcolor',_s.bgColor),param('hasPriority','true'),(_s.debugFlash?param('FlashVars',oEmbed.FlashVars):''),'</object>'].join('');}else{oMovie=_doc.createElement('embed');for(tmp in oEmbed){if(oEmbed.hasOwnProperty(tmp)){oMovie.setAttribute(tmp,oEmbed[tmp]);}}}
_initDebug();extraClass=_getSWFCSS();oTarget=_getDocument();if(oTarget){_s.oMC=(_id(_s.movieID)||_doc.createElement('div'));if(!_s.oMC.id){_s.oMC.id=_s.movieID;_s.oMC.className=_swfCSS.swfDefault+' '+extraClass;s=null;oEl=null;if(!_s.useFlashBlock){if(_s.useHighPerformance){s={'position':'fixed','width':'8px','height':'8px','bottom':'0px','left':'0px','overflow':'hidden'};}else{s={'position':'absolute','width':'6px','height':'6px','top':'-9999px','left':'-9999px'};if(isRTL){s.left=Math.abs(parseInt(s.left,10))+'px';}}}
if(_isWebkit){_s.oMC.style.zIndex=10000;}
if(!_s.debugFlash){for(x in s){if(s.hasOwnProperty(x)){_s.oMC.style[x]=s[x];}}}
try{if(!_isIE){_s.oMC.appendChild(oMovie);}
oTarget.appendChild(_s.oMC);if(_isIE){oEl=_s.oMC.appendChild(_doc.createElement('div'));oEl.className=_swfCSS.swfBox;oEl.innerHTML=movieHTML;}
_appendSuccess=true;}catch(e){throw new Error(_str('domError')+' \n'+e.toString());}}else{sClass=_s.oMC.className;_s.oMC.className=(sClass?sClass+' ':_swfCSS.swfDefault)+(extraClass?' '+extraClass:'');_s.oMC.appendChild(oMovie);if(_isIE){oEl=_s.oMC.appendChild(_doc.createElement('div'));oEl.className=_swfCSS.swfBox;oEl.innerHTML=movieHTML;}
_appendSuccess=true;}}
_didAppend=true;_initMsg();_s._wD(_smc+'createMovie(): Trying to load '+smURL+(!_overHTTP&&_s.altURL?' (alternate URL)':''),1);return true;};_initMovie=function(){if(_s.html5Only){_createMovie();return false;}
if(_flash){return false;}
_flash=_s.getMovie(_s.id);if(!_flash){if(!_oRemoved){_createMovie(_s.id,_s.url);}else{if(!_isIE){_s.oMC.appendChild(_oRemoved);}else{_s.oMC.innerHTML=_oRemovedHTML;}
_oRemoved=null;_didAppend=true;}
_flash=_s.getMovie(_s.id);}
if(_flash){_wDS('waitEI');}
if(_s.oninitmovie instanceof Function){setTimeout(_s.oninitmovie,1);}
return true;};_delayWaitForEI=function(){setTimeout(_waitForEI,1000);};_waitForEI=function(){if(_waitingForEI){return false;}
_waitingForEI=true;_event.remove(_win,'load',_delayWaitForEI);if(_tryInitOnFocus&&!_isFocused){_wDS('waitFocus');return false;}
var p;if(!_didInit){p=_s.getMoviePercent();_s._wD(_str('waitImpatient',(p===100?' (SWF loaded)':(p>0?' (SWF '+p+'% loaded)':''))));}
setTimeout(function(){p=_s.getMoviePercent();if(!_didInit){_s._wD(_sm+': No Flash response within expected time.\nLikely causes: '+(p===0?'Loading '+_s.movieURL+' may have failed (and/or Flash '+_fV+'+ not present?), ':'')+'Flash blocked or JS-Flash security error.'+(_s.debugFlash?' '+_str('checkSWF'):''),2);if(!_overHTTP&&p){_wDS('localFail',2);if(!_s.debugFlash){_wDS('tryDebug',2);}}
if(p===0){_s._wD(_str('swf404',_s.url));}
_debugTS('flashtojs',false,': Timed out'+_overHTTP?' (Check flash security or flash blockers)':' (No plugin/missing SWF?)');}
if(!_didInit&&_okToDisable){if(p===null){if(_s.useFlashBlock||_s.flashLoadTimeout===0){if(_s.useFlashBlock){_flashBlockHandler();}
_wDS('waitForever');}else{_failSafely(true);}}else{if(_s.flashLoadTimeout===0){_wDS('waitForever');}else{_failSafely(true);}}}},_s.flashLoadTimeout);};_handleFocus=function(){function cleanup(){_event.remove(_win,'focus',_handleFocus);_event.remove(_win,'load',_handleFocus);}
if(_isFocused||!_tryInitOnFocus){cleanup();return true;}
_okToDisable=true;_isFocused=true;_s._wD(_smc+'handleFocus()');if(_isSafari&&_tryInitOnFocus){_event.remove(_win,'mousemove',_handleFocus);}
_waitingForEI=false;cleanup();return true;};_showSupport=function(){var item,tests=[];if(_s.useHTML5Audio&&_s.hasHTML5){for(item in _s.audioFormats){if(_s.audioFormats.hasOwnProperty(item)){tests.push(item+': '+_s.html5[item]+(!_s.html5[item]&&_hasFlash&&_s.flash[item]?' (using flash)':(_s.preferFlash&&_s.flash[item]&&_hasFlash?' (preferring flash)':(!_s.html5[item]?' ('+(_s.audioFormats[item].required?'required, ':'')+'and no flash support)':''))));}}
_s._wD('-- SoundManager 2: HTML5 support tests ('+_s.html5Test+'): '+tests.join(', ')+' --',1);}};_initComplete=function(bNoDisable){if(_didInit){return false;}
if(_s.html5Only){_s._wD('-- SoundManager 2: loaded --');_didInit=true;_initUserOnload();_debugTS('onload',true);return true;}
var wasTimeout=(_s.useFlashBlock&&_s.flashLoadTimeout&&!_s.getMoviePercent()),error;if(!wasTimeout){_didInit=true;if(_disabled){error={type:(!_hasFlash&&_needsFlash?'NO_FLASH':'INIT_TIMEOUT')};}}
_s._wD('-- SoundManager 2 '+(_disabled?'failed to load':'loaded')+' ('+(_disabled?'security/load error':'OK')+') --',1);if(_disabled||bNoDisable){if(_s.useFlashBlock&&_s.oMC){_s.oMC.className=_getSWFCSS()+' '+(_s.getMoviePercent()===null?_swfCSS.swfTimedout:_swfCSS.swfError);}
_processOnEvents({type:'ontimeout',error:error});_debugTS('onload',false);_catchError(error);return false;}else{_debugTS('onload',true);}
if(_s.waitForWindowLoad&&!_windowLoaded){_wDS('waitOnload');_event.add(_win,'load',_initUserOnload);return false;}else{if(_s.waitForWindowLoad&&_windowLoaded){_wDS('docLoaded');}
_initUserOnload();}
return true;};_init=function(){_wDS('init');if(_didInit){_wDS('didInit');return false;}
function _cleanup(){_event.remove(_win,'load',_s.beginDelayedInit);}
if(_s.html5Only){if(!_didInit){_cleanup();_s.enabled=true;_initComplete();}
return true;}
_initMovie();try{_wDS('flashJS');_flash._externalInterfaceTest(false);_setPolling(true,(_s.flashPollingInterval||(_s.useHighPerformance?10:50)));if(!_s.debugMode){_flash._disableDebug();}
_s.enabled=true;_debugTS('jstoflash',true);if(!_s.html5Only){_event.add(_win,'unload',_doNothing);}}catch(e){_s._wD('js/flash exception: '+e.toString());_debugTS('jstoflash',false);_catchError({type:'JS_TO_FLASH_EXCEPTION',fatal:true});_failSafely(true);_initComplete();return false;}
_initComplete();_cleanup();return true;};_domContentLoaded=function(){if(_didDCLoaded){return false;}
_didDCLoaded=true;_initDebug();(function(){var a='sm2-usehtml5audio=',l=_wl.toLowerCase(),b=null,a2='sm2-preferflash=',b2=null,hasCon=(typeof console!=='undefined'&&typeof console.log!=='undefined');if(l.indexOf(a)!==-1){b=(l.charAt(l.indexOf(a)+a.length)==='1');if(hasCon){console.log((b?'Enabling ':'Disabling ')+'useHTML5Audio via URL parameter');}
_s.useHTML5Audio=b;}
if(l.indexOf(a2)!==-1){b2=(l.charAt(l.indexOf(a2)+a2.length)==='1');if(hasCon){console.log((b2?'Enabling ':'Disabling ')+'preferFlash via URL parameter');}
_s.preferFlash=b2;}}());if(!_hasFlash&&_s.hasHTML5){_s._wD('SoundManager: No Flash detected'+(!_s.useHTML5Audio?', enabling HTML5.':'. Trying HTML5-only mode.'));_s.useHTML5Audio=true;_s.preferFlash=false;}
_testHTML5();_s.html5.usingFlash=_featureCheck();_needsFlash=_s.html5.usingFlash;_showSupport();if(!_hasFlash&&_needsFlash){_s._wD('SoundManager: Fatal error: Flash is needed to play some required formats, but is not available.');_s.flashLoadTimeout=1;}
if(_doc.removeEventListener){_doc.removeEventListener('DOMContentLoaded',_domContentLoaded,false);}
_initMovie();return true;};_domContentLoadedIE=function(){if(_doc.readyState==='complete'){_domContentLoaded();_doc.detachEvent('onreadystatechange',_domContentLoadedIE);}
return true;};_winOnLoad=function(){_windowLoaded=true;_event.remove(_win,'load',_winOnLoad);};_detectFlash();_event.add(_win,'focus',_handleFocus);_event.add(_win,'load',_handleFocus);_event.add(_win,'load',_delayWaitForEI);_event.add(_win,'load',_winOnLoad);if(_isSafari&&_tryInitOnFocus){_event.add(_win,'mousemove',_handleFocus);}
if(_doc.addEventListener){_doc.addEventListener('DOMContentLoaded',_domContentLoaded,false);}else if(_doc.attachEvent){_doc.attachEvent('onreadystatechange',_domContentLoadedIE);}else{_debugTS('onload',false);_catchError({type:'NO_DOM2_EVENTS',fatal:true});}
if(_doc.readyState==='complete'){setTimeout(_domContentLoaded,100);}}
if(typeof SM2_DEFER==='undefined'||!SM2_DEFER){soundManager=new SoundManager();}
window.SoundManager=SoundManager;window.soundManager=soundManager;}(window));
;if(!document.createElement("canvas").getContext){(function(){var u=Math;var v=u.round;var r=u.sin;var C=u.cos;var l=u.abs;var B=u.sqrt;var a=10;var n=a/2;function g(){return this.context_||(this.context_=new p(this))}var t=Array.prototype.slice;function D(j,m,E){var i=t.call(arguments,2);return function(){return j.apply(m,i.concat(t.call(arguments)))}}var h={init:function(i){if(/MSIE/.test(navigator.userAgent)&&!window.opera){var j=i||document;j.createElement("canvas");j.attachEvent("onreadystatechange",D(this.init_,this,j))}},init_:function(F){if(!F.namespaces.g_vml_){F.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML")}if(!F.namespaces.g_o_){F.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML")}if(!F.styleSheets.ex_canvas_){var E=F.createStyleSheet();E.owningElement.id="ex_canvas_";E.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}g_vml_\\:*{behavior:url(#default#VML)}g_o_\\:*{behavior:url(#default#VML)}"}var m=F.getElementsByTagName("canvas");for(var j=0;j<m.length;j++){this.initElement(m[j])}},initElement:function(j){if(!j.getContext){j.getContext=g;j.innerHTML="";j.attachEvent("onpropertychange",A);j.attachEvent("onresize",b);var i=j.attributes;if(i.width&&i.width.specified){j.style.width=i.width.nodeValue+"px"}else{j.width=j.clientWidth}if(i.height&&i.height.specified){j.style.height=i.height.nodeValue+"px"}else{j.height=j.clientHeight}}return j}};function A(j){var i=j.srcElement;switch(j.propertyName){case"width":i.style.width=i.attributes.width.nodeValue+"px";i.getContext().clearRect();break;case"height":i.style.height=i.attributes.height.nodeValue+"px";i.getContext().clearRect();break}}function b(j){var i=j.srcElement;if(i.firstChild){i.firstChild.style.width=i.clientWidth+"px";i.firstChild.style.height=i.clientHeight+"px"}}h.init();var e=[];for(var y=0;y<16;y++){for(var x=0;x<16;x++){e[y*16+x]=y.toString(16)+x.toString(16)}}function q(){return[[1,0,0],[0,1,0],[0,0,1]]}function d(E,m){var j=q();for(var i=0;i<3;i++){for(var H=0;H<3;H++){var F=0;for(var G=0;G<3;G++){F+=E[i][G]*m[G][H]}j[i][H]=F}}return j}function w(j,i){i.fillStyle=j.fillStyle;i.lineCap=j.lineCap;i.lineJoin=j.lineJoin;i.lineWidth=j.lineWidth;i.miterLimit=j.miterLimit;i.shadowBlur=j.shadowBlur;i.shadowColor=j.shadowColor;i.shadowOffsetX=j.shadowOffsetX;i.shadowOffsetY=j.shadowOffsetY;i.strokeStyle=j.strokeStyle;i.globalAlpha=j.globalAlpha;i.arcScaleX_=j.arcScaleX_;i.arcScaleY_=j.arcScaleY_;i.lineScale_=j.lineScale_}function c(m){var G,F=1;m=String(m);if(m.substring(0,3)=="rgb"){var I=m.indexOf("(",3);var j=m.indexOf(")",I+1);var H=m.substring(I+1,j).split(",");G="#";for(var E=0;E<3;E++){G+=e[Number(H[E])]}if(H.length==4&&m.substr(3,1)=="a"){F=H[3]}}else{G=m}return{color:G,alpha:F}}function s(i){switch(i){case"butt":return"flat";case"round":return"round";case"square":default:return"square"}}function p(j){this.m_=q();this.mStack_=[];this.aStack_=[];this.currentPath_=[];this.strokeStyle="#000";this.fillStyle="#000";this.lineWidth=1;this.lineJoin="miter";this.lineCap="butt";this.miterLimit=a*1;this.globalAlpha=1;this.canvas=j;var i=j.ownerDocument.createElement("div");i.style.width=j.clientWidth+"px";i.style.height=j.clientHeight+"px";i.style.overflow="hidden";i.style.position="absolute";j.appendChild(i);this.element_=i;this.arcScaleX_=1;this.arcScaleY_=1;this.lineScale_=1}var k=p.prototype;k.clearRect=function(){this.element_.innerHTML=""};k.beginPath=function(){this.currentPath_=[]};k.moveTo=function(j,i){var m=this.getCoords_(j,i);this.currentPath_.push({type:"moveTo",x:m.x,y:m.y});this.currentX_=m.x;this.currentY_=m.y};k.lineTo=function(j,i){var m=this.getCoords_(j,i);this.currentPath_.push({type:"lineTo",x:m.x,y:m.y});this.currentX_=m.x;this.currentY_=m.y};k.bezierCurveTo=function(m,j,J,I,H,F){var i=this.getCoords_(H,F);var G=this.getCoords_(m,j);var E=this.getCoords_(J,I);o(this,G,E,i)};function o(i,E,m,j){i.currentPath_.push({type:"bezierCurveTo",cp1x:E.x,cp1y:E.y,cp2x:m.x,cp2y:m.y,x:j.x,y:j.y});i.currentX_=j.x;i.currentY_=j.y}k.quadraticCurveTo=function(H,m,j,i){var G=this.getCoords_(H,m);var F=this.getCoords_(j,i);var I={x:this.currentX_+2/3*(G.x-this.currentX_),y:this.currentY_+2/3*(G.y-this.currentY_)};var E={x:I.x+(F.x-this.currentX_)/3,y:I.y+(F.y-this.currentY_)/3};o(this,I,E,F)};k.arc=function(K,I,J,F,j,m){J*=a;var O=m?"at":"wa";var L=K+C(F)*J-n;var N=I+r(F)*J-n;var i=K+C(j)*J-n;var M=I+r(j)*J-n;if(L==i&&!m){L+=0.125}var E=this.getCoords_(K,I);var H=this.getCoords_(L,N);var G=this.getCoords_(i,M);this.currentPath_.push({type:O,x:E.x,y:E.y,radius:J,xStart:H.x,yStart:H.y,xEnd:G.x,yEnd:G.y})};k.rect=function(m,j,i,E){this.moveTo(m,j);this.lineTo(m+i,j);this.lineTo(m+i,j+E);this.lineTo(m,j+E);this.closePath()};k.strokeRect=function(m,j,i,E){var F=this.currentPath_;this.beginPath();this.moveTo(m,j);this.lineTo(m+i,j);this.lineTo(m+i,j+E);this.lineTo(m,j+E);this.closePath();this.stroke();this.currentPath_=F};k.fillRect=function(m,j,i,E){var F=this.currentPath_;this.beginPath();this.moveTo(m,j);this.lineTo(m+i,j);this.lineTo(m+i,j+E);this.lineTo(m,j+E);this.closePath();this.fill();this.currentPath_=F};k.createLinearGradient=function(j,E,i,m){var F=new z("gradient");F.x0_=j;F.y0_=E;F.x1_=i;F.y1_=m;return F};k.createRadialGradient=function(E,G,m,j,F,i){var H=new z("gradientradial");H.x0_=E;H.y0_=G;H.r0_=m;H.x1_=j;H.y1_=F;H.r1_=i;return H};k.drawImage=function(R,m){var K,I,M,Z,P,N,T,ab;var L=R.runtimeStyle.width;var Q=R.runtimeStyle.height;R.runtimeStyle.width="auto";R.runtimeStyle.height="auto";var J=R.width;var X=R.height;R.runtimeStyle.width=L;R.runtimeStyle.height=Q;if(arguments.length==3){K=arguments[1];I=arguments[2];P=N=0;T=M=J;ab=Z=X}else{if(arguments.length==5){K=arguments[1];I=arguments[2];M=arguments[3];Z=arguments[4];P=N=0;T=J;ab=X}else{if(arguments.length==9){P=arguments[1];N=arguments[2];T=arguments[3];ab=arguments[4];K=arguments[5];I=arguments[6];M=arguments[7];Z=arguments[8]}else{throw Error("Invalid number of arguments")}}}var aa=this.getCoords_(K,I);var E=T/2;var j=ab/2;var Y=[];var i=10;var G=10;Y.push(" <g_vml_:group",' coordsize="',a*i,",",a*G,'"',' coordorigin="0,0"',' style="width:',i,"px;height:",G,"px;position:absolute;");if(this.m_[0][0]!=1||this.m_[0][1]){var F=[];F.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",v(aa.x/a),",","Dy=",v(aa.y/a),"");var V=aa;var U=this.getCoords_(K+M,I);var S=this.getCoords_(K,I+Z);var O=this.getCoords_(K+M,I+Z);V.x=u.max(V.x,U.x,S.x,O.x);V.y=u.max(V.y,U.y,S.y,O.y);Y.push("padding:0 ",v(V.x/a),"px ",v(V.y/a),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",F.join(""),", sizingmethod='clip');")}else{Y.push("top:",v(aa.y/a),"px;left:",v(aa.x/a),"px;")}Y.push(' ">','<g_vml_:image src="',R.src,'"',' style="width:',a*M,"px;"," height:",a*Z,'px;"',' cropleft="',P/J,'"',' croptop="',N/X,'"',' cropright="',(J-P-T)/J,'"',' cropbottom="',(X-N-ab)/X,'"'," />","</g_vml_:group>");this.element_.insertAdjacentHTML("BeforeEnd",Y.join(""))};k.stroke=function(ae){var J=[];var K=false;var ap=c(ae?this.fillStyle:this.strokeStyle);var aa=ap.color;var ak=ap.alpha*this.globalAlpha;var F=10;var M=10;J.push("<g_vml_:shape",' filled="',!!ae,'"',' style="position:absolute;width:',F,"px;height:",M,'px;"',' coordorigin="0 0" coordsize="',a*F," ",a*M,'"',' stroked="',!ae,'"',' path="');var L=false;var ao={x:null,y:null};var V={x:null,y:null};for(var aj=0;aj<this.currentPath_.length;aj++){var ai=this.currentPath_[aj];var an;switch(ai.type){case"moveTo":an=ai;J.push(" m ",v(ai.x),",",v(ai.y));break;case"lineTo":J.push(" l ",v(ai.x),",",v(ai.y));break;case"close":J.push(" x ");ai=null;break;case"bezierCurveTo":J.push(" c ",v(ai.cp1x),",",v(ai.cp1y),",",v(ai.cp2x),",",v(ai.cp2y),",",v(ai.x),",",v(ai.y));break;case"at":case"wa":J.push(" ",ai.type," ",v(ai.x-this.arcScaleX_*ai.radius),",",v(ai.y-this.arcScaleY_*ai.radius)," ",v(ai.x+this.arcScaleX_*ai.radius),",",v(ai.y+this.arcScaleY_*ai.radius)," ",v(ai.xStart),",",v(ai.yStart)," ",v(ai.xEnd),",",v(ai.yEnd));break}if(ai){if(ao.x==null||ai.x<ao.x){ao.x=ai.x}if(V.x==null||ai.x>V.x){V.x=ai.x}if(ao.y==null||ai.y<ao.y){ao.y=ai.y}if(V.y==null||ai.y>V.y){V.y=ai.y}}}J.push(' ">');if(!ae){var U=this.lineScale_*this.lineWidth;if(U<1){ak*=U}J.push("<g_vml_:stroke",' opacity="',ak,'"',' joinstyle="',this.lineJoin,'"',' miterlimit="',this.miterLimit,'"',' endcap="',s(this.lineCap),'"',' weight="',U,'px"',' color="',aa,'" />')}else{if(typeof this.fillStyle=="object"){var N=this.fillStyle;var S=0;var ah={x:0,y:0};var ab=0;var Q=1;if(N.type_=="gradient"){var P=N.x0_/this.arcScaleX_;var m=N.y0_/this.arcScaleY_;var O=N.x1_/this.arcScaleX_;var aq=N.y1_/this.arcScaleY_;var am=this.getCoords_(P,m);var al=this.getCoords_(O,aq);var I=al.x-am.x;var G=al.y-am.y;S=Math.atan2(I,G)*180/Math.PI;if(S<0){S+=360}if(S<0.000001){S=0}}else{var am=this.getCoords_(N.x0_,N.y0_);var j=V.x-ao.x;var E=V.y-ao.y;ah={x:(am.x-ao.x)/j,y:(am.y-ao.y)/E};j/=this.arcScaleX_*a;E/=this.arcScaleY_*a;var ag=u.max(j,E);ab=2*N.r0_/ag;Q=2*N.r1_/ag-ab}var Z=N.colors_;Z.sort(function(H,i){return H.offset-i.offset});var T=Z.length;var Y=Z[0].color;var X=Z[T-1].color;var ad=Z[0].alpha*this.globalAlpha;var ac=Z[T-1].alpha*this.globalAlpha;var af=[];for(var aj=0;aj<T;aj++){var R=Z[aj];af.push(R.offset*Q+ab+" "+R.color)}J.push('<g_vml_:fill type="',N.type_,'"',' method="none" focus="100%"',' color="',Y,'"',' color2="',X,'"',' colors="',af.join(","),'"',' opacity="',ac,'"',' g_o_:opacity2="',ad,'"',' angle="',S,'"',' focusposition="',ah.x,",",ah.y,'" />')}else{J.push('<g_vml_:fill color="',aa,'" opacity="',ak,'" />')}}J.push("</g_vml_:shape>");this.element_.insertAdjacentHTML("beforeEnd",J.join(""))};k.fill=function(){this.stroke(true)};k.closePath=function(){this.currentPath_.push({type:"close"})};k.getCoords_=function(E,j){var i=this.m_;return{x:a*(E*i[0][0]+j*i[1][0]+i[2][0])-n,y:a*(E*i[0][1]+j*i[1][1]+i[2][1])-n}};k.save=function(){var i={};w(this,i);this.aStack_.push(i);this.mStack_.push(this.m_);this.m_=d(q(),this.m_)};k.restore=function(){w(this.aStack_.pop(),this);this.m_=this.mStack_.pop()};k.translate=function(m,j){var i=[[1,0,0],[0,1,0],[m,j,1]];this.m_=d(i,this.m_)};k.rotate=function(j){var E=C(j);var m=r(j);var i=[[E,m,0],[-m,E,0],[0,0,1]];this.m_=d(i,this.m_)};k.scale=function(G,F){this.arcScaleX_*=G;this.arcScaleY_*=F;var j=[[G,0,0],[0,F,0],[0,0,1]];var i=this.m_=d(j,this.m_);var E=i[0][0]*i[1][1]-i[0][1]*i[1][0];this.lineScale_=B(l(E))};k.clip=function(){};k.arcTo=function(){};k.createPattern=function(){return new f};function z(i){this.type_=i;this.x0_=0;this.y0_=0;this.r0_=0;this.x1_=0;this.y1_=0;this.r1_=0;this.colors_=[]}z.prototype.addColorStop=function(j,i){i=c(i);this.colors_.push({offset:j,color:i.color,alpha:i.alpha})};function f(){}G_vmlCanvasManager=h;CanvasRenderingContext2D=p;CanvasGradient=z;CanvasPattern=f})()};
;﻿
function Animator(options){this.setOptions(options);var _this=this;this.timerDelegate=function(){_this.onTimerEvent()};this.subjects=[];this.subjectScopes=[];this.target=0;this.state=0;this.lastTime=null;};Animator.prototype={setOptions:function(options){this.options=Animator.applyDefaults({interval:20,duration:400,onComplete:function(){},onStep:function(){},transition:Animator.tx.easeInOut},options);},seekTo:function(to){this.seekFromTo(this.state,to);},seekFromTo:function(from,to){this.target=Math.max(0,Math.min(1,to));this.state=Math.max(0,Math.min(1,from));this.lastTime=new Date().getTime();if(!this.intervalId){this.intervalId=window.setInterval(this.timerDelegate,this.options.interval);}},jumpTo:function(to){this.target=this.state=Math.max(0,Math.min(1,to));this.propagate();},toggle:function(){this.seekTo(1-this.target);},addSubject:function(subject,scope){this.subjects[this.subjects.length]=subject;this.subjectScopes[this.subjectScopes.length]=scope;return this;},clearSubjects:function(){this.subjects=[];this.subjectScopes=[];},propagate:function(){var value=this.options.transition(this.state);for(var i=0;i<this.subjects.length;i++){if(this.subjects[i].setState){this.subjects[i].setState(value);}else{this.subjects[i].apply(this.subjectScopes[i],[value]);}}},onTimerEvent:function(){var now=new Date().getTime();var timePassed=now-this.lastTime;this.lastTime=now;var movement=(timePassed/this.options.duration)*(this.state<this.target?1:-1);if(Math.abs(movement)>=Math.abs(this.state-this.target)){this.state=this.target;}else{this.state+=movement;}
try{this.propagate();}finally{this.options.onStep.call(this);if(this.target==this.state){window.clearInterval(this.intervalId);this.intervalId=null;this.options.onComplete.call(this);}}},play:function(){this.seekFromTo(0,1)},reverse:function(){this.seekFromTo(1,0)},inspect:function(){var str="#<Animator:\n";for(var i=0;i<this.subjects.length;i++){str+=this.subjects[i].inspect();}
str+=">";return str;}}
Animator.applyDefaults=function(defaults,prefs){prefs=prefs||{};var prop,result={};for(prop in defaults)result[prop]=prefs[prop]!==undefined?prefs[prop]:defaults[prop];return result;}
Animator.makeArray=function(o){if(o==null)return[];if(!o.length)return[o];var result=[];for(var i=0;i<o.length;i++)result[i]=o[i];return result;}
Animator.camelize=function(string){var oStringList=string.split('-');if(oStringList.length==1)return oStringList[0];var camelizedString=string.indexOf('-')==0?oStringList[0].charAt(0).toUpperCase()+oStringList[0].substring(1):oStringList[0];for(var i=1,len=oStringList.length;i<len;i++){var s=oStringList[i];camelizedString+=s.charAt(0).toUpperCase()+s.substring(1);}
return camelizedString;}
Animator.apply=function(el,style,options){if(style instanceof Array){return new Animator(options).addSubject(new CSSStyleSubject(el,style[0],style[1]));}
return new Animator(options).addSubject(new CSSStyleSubject(el,style));}
Animator.makeEaseIn=function(a){return function(state){return Math.pow(state,a*2);}}
Animator.makeEaseOut=function(a){return function(state){return 1-Math.pow(1-state,a*2);}}
Animator.makeElastic=function(bounces){return function(state){state=Animator.tx.easeInOut(state);return((1-Math.cos(state*Math.PI*bounces))*(1-state))+state;}}
Animator.makeADSR=function(attackEnd,decayEnd,sustainEnd,sustainLevel){if(sustainLevel==null)sustainLevel=0.5;return function(state){if(state<attackEnd){return state/attackEnd;}
if(state<decayEnd){return 1-((state-attackEnd)/(decayEnd-attackEnd)*(1-sustainLevel));}
if(state<sustainEnd){return sustainLevel;}
return sustainLevel*(1-((state-sustainEnd)/(1-sustainEnd)));}}
Animator.makeBounce=function(bounces){var fn=Animator.makeElastic(bounces);return function(state){state=fn(state);return state<=1?state:2-state;}}
Animator.tx={easeInOut:function(pos){return((-Math.cos(pos*Math.PI)/2)+0.5);},linear:function(x){return x;},easeIn:Animator.makeEaseIn(1.5),easeOut:Animator.makeEaseOut(1.5),strongEaseIn:Animator.makeEaseIn(2.5),strongEaseOut:Animator.makeEaseOut(2.5),elastic:Animator.makeElastic(1),veryElastic:Animator.makeElastic(3),bouncy:Animator.makeBounce(1),veryBouncy:Animator.makeBounce(3)}
function NumericalStyleSubject(els,property,from,to,units){this.els=Animator.makeArray(els);if(property=='opacity'&&window.ActiveXObject){this.property='filter';}else{this.property=Animator.camelize(property);}
this.from=parseFloat(from);this.to=parseFloat(to);this.units=units!=null?units:'px';}
NumericalStyleSubject.prototype={setState:function(state){var style=this.getStyle(state);var visibility=(this.property=='opacity'&&state==0)?'hidden':'';var j=0;for(var i=0;i<this.els.length;i++){try{this.els[i].style[this.property]=style;}catch(e){if(this.property!='fontWeight')throw e;}
if(j++>20)return;}},getStyle:function(state){state=this.from+((this.to-this.from)*state);if(this.property=='filter')return"alpha(opacity="+Math.round(state*100)+")";if(this.property=='opacity')return state;return Math.round(state)+this.units;},inspect:function(){return"\t"+this.property+"("+this.from+this.units+" to "+this.to+this.units+")\n";}}
function ColorStyleSubject(els,property,from,to){this.els=Animator.makeArray(els);this.property=Animator.camelize(property);this.to=this.expandColor(to);this.from=this.expandColor(from);this.origFrom=from;this.origTo=to;}
ColorStyleSubject.prototype={expandColor:function(color){var hexColor,red,green,blue;hexColor=ColorStyleSubject.parseColor(color);if(hexColor){red=parseInt(hexColor.slice(1,3),16);green=parseInt(hexColor.slice(3,5),16);blue=parseInt(hexColor.slice(5,7),16);return[red,green,blue]}
if(window.DEBUG){alert("Invalid colour: '"+color+"'");}},getValueForState:function(color,state){return Math.round(this.from[color]+((this.to[color]-this.from[color])*state));},setState:function(state){var color='#'
+ColorStyleSubject.toColorPart(this.getValueForState(0,state))
+ColorStyleSubject.toColorPart(this.getValueForState(1,state))
+ColorStyleSubject.toColorPart(this.getValueForState(2,state));for(var i=0;i<this.els.length;i++){this.els[i].style[this.property]=color;}},inspect:function(){return"\t"+this.property+"("+this.origFrom+" to "+this.origTo+")\n";}}
ColorStyleSubject.parseColor=function(string){var color='#',match;if(match=ColorStyleSubject.parseColor.rgbRe.exec(string)){var part;for(var i=1;i<=3;i++){part=Math.max(0,Math.min(255,parseInt(match[i])));color+=ColorStyleSubject.toColorPart(part);}
return color;}
if(match=ColorStyleSubject.parseColor.hexRe.exec(string)){if(match[1].length==3){for(var i=0;i<3;i++){color+=match[1].charAt(i)+match[1].charAt(i);}
return color;}
return'#'+match[1];}
return false;}
ColorStyleSubject.toColorPart=function(number){if(number>255)number=255;var digits=number.toString(16);if(number<16)return'0'+digits;return digits;}
ColorStyleSubject.parseColor.rgbRe=/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i;ColorStyleSubject.parseColor.hexRe=/^\#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/;function DiscreteStyleSubject(els,property,from,to,threshold){this.els=Animator.makeArray(els);this.property=Animator.camelize(property);this.from=from;this.to=to;this.threshold=threshold||0.5;}
DiscreteStyleSubject.prototype={setState:function(state){var j=0;for(var i=0;i<this.els.length;i++){this.els[i].style[this.property]=state<=this.threshold?this.from:this.to;}},inspect:function(){return"\t"+this.property+"("+this.from+" to "+this.to+" @ "+this.threshold+")\n";}}
function CSSStyleSubject(els,style1,style2){els=Animator.makeArray(els);this.subjects=[];if(els.length==0)return;var prop,toStyle,fromStyle;if(style2){fromStyle=this.parseStyle(style1,els[0]);toStyle=this.parseStyle(style2,els[0]);}else{toStyle=this.parseStyle(style1,els[0]);fromStyle={};for(prop in toStyle){fromStyle[prop]=CSSStyleSubject.getStyle(els[0],prop);}}
var prop;for(prop in fromStyle){if(fromStyle[prop]==toStyle[prop]){delete fromStyle[prop];delete toStyle[prop];}}
var prop,units,match,type,from,to;for(prop in fromStyle){var fromProp=String(fromStyle[prop]);var toProp=String(toStyle[prop]);if(toStyle[prop]==null){if(window.DEBUG)alert("No to style provided for '"+prop+'"');continue;}
if(from=ColorStyleSubject.parseColor(fromProp)){to=ColorStyleSubject.parseColor(toProp);type=ColorStyleSubject;}else if(fromProp.match(CSSStyleSubject.numericalRe)&&toProp.match(CSSStyleSubject.numericalRe)){from=parseFloat(fromProp);to=parseFloat(toProp);type=NumericalStyleSubject;match=CSSStyleSubject.numericalRe.exec(fromProp);var reResult=CSSStyleSubject.numericalRe.exec(toProp);if(match[1]!=null){units=match[1];}else if(reResult[1]!=null){units=reResult[1];}else{units=reResult;}}else if(fromProp.match(CSSStyleSubject.discreteRe)&&toProp.match(CSSStyleSubject.discreteRe)){from=fromProp;to=toProp;type=DiscreteStyleSubject;units=0;}else{if(window.DEBUG){alert("Unrecognised format for value of "
+prop+": '"+fromStyle[prop]+"'");}
continue;}
this.subjects[this.subjects.length]=new type(els,prop,from,to,units);}}
CSSStyleSubject.prototype={parseStyle:function(style,el){var rtn={};if(style.indexOf(":")!=-1){var styles=style.split(";");for(var i=0;i<styles.length;i++){var parts=CSSStyleSubject.ruleRe.exec(styles[i]);if(parts){rtn[parts[1]]=parts[2];}}}
else{var prop,value,oldClass;oldClass=el.className;el.className=style;for(var i=0;i<CSSStyleSubject.cssProperties.length;i++){prop=CSSStyleSubject.cssProperties[i];value=CSSStyleSubject.getStyle(el,prop);if(value!=null){rtn[prop]=value;}}
el.className=oldClass;}
return rtn;},setState:function(state){for(var i=0;i<this.subjects.length;i++){this.subjects[i].setState(state);}},inspect:function(){var str="";for(var i=0;i<this.subjects.length;i++){str+=this.subjects[i].inspect();}
return str;}}
CSSStyleSubject.getStyle=function(el,property){var style;if(document.defaultView&&document.defaultView.getComputedStyle){style=document.defaultView.getComputedStyle(el,"").getPropertyValue(property);if(style){return style;}}
property=Animator.camelize(property);if(el.currentStyle){style=el.currentStyle[property];}
return style||el.style[property]}
CSSStyleSubject.ruleRe=/^\s*([a-zA-Z\-]+)\s*:\s*(\S(.+\S)?)\s*$/;CSSStyleSubject.numericalRe=/^-?\d+(?:\.\d+)?(%|[a-zA-Z]{2})?$/;CSSStyleSubject.discreteRe=/^\w+$/;CSSStyleSubject.cssProperties=['azimuth','background','background-attachment','background-color','background-image','background-position','background-repeat','border-collapse','border-color','border-spacing','border-style','border-top','border-top-color','border-right-color','border-bottom-color','border-left-color','border-top-style','border-right-style','border-bottom-style','border-left-style','border-top-width','border-right-width','border-bottom-width','border-left-width','border-width','bottom','clear','clip','color','content','cursor','direction','display','elevation','empty-cells','css-float','font','font-family','font-size','font-size-adjust','font-stretch','font-style','font-variant','font-weight','height','left','letter-spacing','line-height','list-style','list-style-image','list-style-position','list-style-type','margin','margin-top','margin-right','margin-bottom','margin-left','max-height','max-width','min-height','min-width','orphans','outline','outline-color','outline-style','outline-width','overflow','padding','padding-top','padding-right','padding-bottom','padding-left','pause','position','right','size','table-layout','text-align','text-decoration','text-indent','text-shadow','text-transform','top','vertical-align','visibility','white-space','width','word-spacing','z-index','opacity','outline-offset','overflow-x','overflow-y'];function AnimatorChain(animators,options){this.animators=animators;this.setOptions(options);for(var i=0;i<this.animators.length;i++){this.listenTo(this.animators[i]);}
this.forwards=false;this.current=0;}
AnimatorChain.prototype={setOptions:function(options){this.options=Animator.applyDefaults({resetOnPlay:true},options);},play:function(){this.forwards=true;this.current=-1;if(this.options.resetOnPlay){for(var i=0;i<this.animators.length;i++){this.animators[i].jumpTo(0);}}
this.advance();},reverse:function(){this.forwards=false;this.current=this.animators.length;if(this.options.resetOnPlay){for(var i=0;i<this.animators.length;i++){this.animators[i].jumpTo(1);}}
this.advance();},toggle:function(){if(this.forwards){this.seekTo(0);}else{this.seekTo(1);}},listenTo:function(animator){var oldOnComplete=animator.options.onComplete;var _this=this;animator.options.onComplete=function(){if(oldOnComplete)oldOnComplete.call(animator);_this.advance();}},advance:function(){if(this.forwards){if(this.animators[this.current+1]==null)return;this.current++;this.animators[this.current].play();}else{if(this.animators[this.current-1]==null)return;this.current--;this.animators[this.current].reverse();}},seekTo:function(target){if(target<=0){this.forwards=false;this.animators[this.current].seekTo(0);}else{this.forwards=true;this.animators[this.current].seekTo(1);}}}
function Accordion(options){this.setOptions(options);var selected=this.options.initialSection,current;if(this.options.rememberance){current=document.location.hash.substring(1);}
this.rememberanceTexts=[];this.ans=[];var _this=this;for(var i=0;i<this.options.sections.length;i++){var el=this.options.sections[i];var an=new Animator(this.options.animatorOptions);var from=this.options.from+(this.options.shift*i);var to=this.options.to+(this.options.shift*i);an.addSubject(new NumericalStyleSubject(el,this.options.property,from,to,this.options.units));an.jumpTo(0);var activator=this.options.getActivator(el);activator.index=i;activator.onclick=function(){_this.show(this.index)};this.ans[this.ans.length]=an;this.rememberanceTexts[i]=activator.innerHTML.replace(/\s/g,"");if(this.rememberanceTexts[i]===current){selected=i;}}
this.show(selected);}
Accordion.prototype={setOptions:function(options){this.options=Object.extend({sections:null,getActivator:function(el){return document.getElementById(el.getAttribute("activator"))},shift:0,initialSection:0,rememberance:true,animatorOptions:{}},options||{});},show:function(section){for(var i=0;i<this.ans.length;i++){this.ans[i].seekTo(i>section?1:0);}
if(this.options.rememberance){document.location.hash=this.rememberanceTexts[section];}}}
;var threeSixtyPlayer,ThreeSixtyPlayer;(function(window){function ThreeSixtyPlayer(){var self=this,pl=this,sm=soundManager,uA=navigator.userAgent,isIE=(uA.match(/msie/i)),isOpera=(uA.match(/opera/i)),isSafari=(uA.match(/safari/i)),isChrome=(uA.match(/chrome/i)),isFirefox=(uA.match(/firefox/i)),isTouchDevice=(uA.match(/ipad|iphone/i)),hasRealCanvas=(typeof window.G_vmlCanvasManager==='undefined'&&typeof document.createElement('canvas').getContext('2d')!=='undefined'),fullCircle=(isOpera||isChrome?359.9:360);this.excludeClass='threesixty-exclude';this.links=[];this.plFirstTrack=null;this.sounds=[];this.soundsByURL=[];this.indexByURL=[];this.lastSound=null;this.lastTouchedSound=null;this.soundCount=0;this.oUITemplate=null;this.oUIImageMap=null;this.vuMeter=null;this.callbackCount=0;this.peakDataHistory=[];this.config={playNext:false,autoPlay:false,allowMultiple:false,loadRingColor:'#ccc',playRingColor:'#000',backgroundRingColor:'#eee',segmentRingColor:'rgba(255,255,255,0.33)',segmentRingColorAlt:'rgba(0,0,0,0.1)',loadRingColorMetadata:'#ddd',playRingColorMetadata:'rgba(128,192,256,0.9)',circleDiameter:null,circleRadius:null,animDuration:500,animTransition:window.Animator.tx.bouncy,showHMSTime:false,scaleFont:true,useWaveformData:false,waveformDataColor:'#0099ff',waveformDataDownsample:3,waveformDataOutside:false,waveformDataConstrain:false,waveformDataLineRatio:0.64,useEQData:false,eqDataColor:'#339933',eqDataDownsample:4,eqDataOutside:true,eqDataLineRatio:0.54,usePeakData:true,peakDataColor:'#ff33ff',peakDataOutside:true,peakDataLineRatio:0.5,useAmplifier:true,fontSizeMax:null,scaleArcWidth:1,useFavIcon:false};this.css={sDefault:'sm2_link',sBuffering:'sm2_buffering',sPlaying:'sm2_playing',sPaused:'sm2_paused'};this.addEventHandler=(typeof window.addEventListener!=='undefined'?function(o,evtName,evtHandler){return o.addEventListener(evtName,evtHandler,false);}:function(o,evtName,evtHandler){o.attachEvent('on'+evtName,evtHandler);});this.removeEventHandler=(typeof window.removeEventListener!=='undefined'?function(o,evtName,evtHandler){return o.removeEventListener(evtName,evtHandler,false);}:function(o,evtName,evtHandler){return o.detachEvent('on'+evtName,evtHandler);});this.hasClass=function(o,cStr){return typeof(o.className)!=='undefined'?o.className.match(new RegExp('(\\s|^)'+cStr+'(\\s|$)')):false;};this.addClass=function(o,cStr){if(!o||!cStr||self.hasClass(o,cStr)){return false;}
o.className=(o.className?o.className+' ':'')+cStr;};this.removeClass=function(o,cStr){if(!o||!cStr||!self.hasClass(o,cStr)){return false;}
o.className=o.className.replace(new RegExp('( '+cStr+')|('+cStr+')','g'),'');};this.getElementsByClassName=function(className,tagNames,oParent){var doc=(oParent||document),matches=[],i,j,nodes=[];if(typeof tagNames!=='undefined'&&typeof tagNames!=='string'){for(i=tagNames.length;i--;){if(!nodes||!nodes[tagNames[i]]){nodes[tagNames[i]]=doc.getElementsByTagName(tagNames[i]);}}}else if(tagNames){nodes=doc.getElementsByTagName(tagNames);}else{nodes=doc.all||doc.getElementsByTagName('*');}
if(typeof(tagNames)!=='string'){for(i=tagNames.length;i--;){for(j=nodes[tagNames[i]].length;j--;){if(self.hasClass(nodes[tagNames[i]][j],className)){matches.push(nodes[tagNames[i]][j]);}}}}else{for(i=0;i<nodes.length;i++){if(self.hasClass(nodes[i],className)){matches.push(nodes[i]);}}}
return matches;};this.getParentByNodeName=function(oChild,sParentNodeName){if(!oChild||!sParentNodeName){return false;}
sParentNodeName=sParentNodeName.toLowerCase();while(oChild.parentNode&&sParentNodeName!==oChild.parentNode.nodeName.toLowerCase()){oChild=oChild.parentNode;}
return(oChild.parentNode&&sParentNodeName===oChild.parentNode.nodeName.toLowerCase()?oChild.parentNode:null);};this.getParentByClassName=function(oChild,sParentClassName){if(!oChild||!sParentClassName){return false;}
while(oChild.parentNode&&!self.hasClass(oChild.parentNode,sParentClassName)){oChild=oChild.parentNode;}
return(oChild.parentNode&&self.hasClass(oChild.parentNode,sParentClassName)?oChild.parentNode:null);};this.getSoundByURL=function(sURL){return(typeof self.soundsByURL[sURL]!=='undefined'?self.soundsByURL[sURL]:null);};this.isChildOfNode=function(o,sNodeName){if(!o||!o.parentNode){return false;}
sNodeName=sNodeName.toLowerCase();do{o=o.parentNode;}while(o&&o.parentNode&&o.nodeName.toLowerCase()!==sNodeName);return(o&&o.nodeName.toLowerCase()===sNodeName?o:null);};this.isChildOfClass=function(oChild,oClass){if(!oChild||!oClass){return false;}
while(oChild.parentNode&&!self.hasClass(oChild,oClass)){oChild=self.findParent(oChild);}
return(self.hasClass(oChild,oClass));};this.findParent=function(o){if(!o||!o.parentNode){return false;}
o=o.parentNode;if(o.nodeType===2){while(o&&o.parentNode&&o.parentNode.nodeType===2){o=o.parentNode;}}
return o;};this.getStyle=function(o,sProp){try{if(o.currentStyle){return o.currentStyle[sProp];}else if(window.getComputedStyle){return document.defaultView.getComputedStyle(o,null).getPropertyValue(sProp);}}catch(e){}
return null;};this.findXY=function(obj){var curleft=0,curtop=0;do{curleft+=obj.offsetLeft;curtop+=obj.offsetTop;}while(!!(obj=obj.offsetParent));return[curleft,curtop];};this.getMouseXY=function(e){e=e?e:window.event;if(isTouchDevice&&e.touches){e=e.touches[0];}
if(e.pageX||e.pageY){return[e.pageX,e.pageY];}else if(e.clientX||e.clientY){return[e.clientX+self.getScrollLeft(),e.clientY+self.getScrollTop()];}};this.getScrollLeft=function(){return(document.body.scrollLeft+document.documentElement.scrollLeft);};this.getScrollTop=function(){return(document.body.scrollTop+document.documentElement.scrollTop);};this.events={play:function(){pl.removeClass(this._360data.oUIBox,this._360data.className);this._360data.className=pl.css.sPlaying;pl.addClass(this._360data.oUIBox,this._360data.className);self.fanOut(this);},stop:function(){pl.removeClass(this._360data.oUIBox,this._360data.className);this._360data.className='';self.fanIn(this);},pause:function(){pl.removeClass(this._360data.oUIBox,this._360data.className);this._360data.className=pl.css.sPaused;pl.addClass(this._360data.oUIBox,this._360data.className);},resume:function(){pl.removeClass(this._360data.oUIBox,this._360data.className);this._360data.className=pl.css.sPlaying;pl.addClass(this._360data.oUIBox,this._360data.className);},finish:function(){var nextLink;var nextUrl;pl.removeClass(this._360data.oUIBox,this._360data.className);this._360data.className='';this._360data.didFinish=true;self.fanIn(this);if($(this._360data.oUIBox).parent().hasClass('ui360playlist')){if(self.plFirstTrack==null){self.plFirstTrack=this._360data.oLink.href;}
var currentLink=$('a.sm2_link');if(currentLink.next().length!=0){nextLink=(pl.indexByURL[self.plFirstTrack]);currentLink.removeClass('sm2_link');currentLink.next().addClass('sm2_link');nextUrl=currentLink.next().attr('href');this._360data.oLink.href=nextUrl;pl.handleClick({'target':pl.links[nextLink]});}
else{currentLink.removeClass('sm2_link');$(this._360data.oUIBox).next().addClass('sm2_link');this._360data.oLink.href=self.plFirstTrack;}}
else{if(pl.config.playNext){nextLink=(pl.indexByURL[this._360data.oLink.href]+1);if(nextLink<pl.links.length){pl.handleClick({'target':pl.links[nextLink]});}}}},whileloading:function(){if(this.paused){self.updatePlaying.apply(this);}},whileplaying:function(){self.updatePlaying.apply(this);this._360data.fps++;},bufferchange:function(){if(this.isBuffering){pl.addClass(this._360data.oUIBox,pl.css.sBuffering);}else{pl.removeClass(this._360data.oUIBox,pl.css.sBuffering);}}};this.stopEvent=function(e){if(typeof e!=='undefined'&&typeof e.preventDefault!=='undefined'){e.preventDefault();}else if(typeof window.event!=='undefined'&&typeof window.event.returnValue!=='undefined'){window.event.returnValue=false;}
return false;};this.getTheDamnLink=(isIE)?function(e){return(e&&e.target?e.target:window.event.srcElement);}:function(e){return e.target;};this.handleClick=function(e){if(e.button>1){return true;}
var o=self.getTheDamnLink(e),sURL,soundURL,thisSound,oContainer,has_vis,diameter,soundRealURL;if(o.nodeName.toLowerCase()!=='a'){o=self.isChildOfNode(o,'a');if(!o){return true;}}
if(!self.isChildOfClass(o,'ui360')){return true;}
sURL=o.getAttribute('href');if(!o.href||!sm.canPlayLink(o)||self.hasClass(o,self.excludeClass)){return true;}
sm._writeDebug('handleClick()');soundURL=(o.href);thisSound=self.getSoundByURL(soundURL);if(thisSound){if(thisSound===self.lastSound){thisSound.togglePause();}else{thisSound.togglePause();sm._writeDebug('sound different than last sound: '+self.lastSound.sID);if(!self.config.allowMultiple&&self.lastSound){self.stopSound(self.lastSound);}}}else{if(soundURL.indexOf('_playlist')>0){soundRealURL=soundURL.replace('_playlist','');}else{soundRealURL=soundURL;}
oContainer=o.parentNode;has_vis=(self.getElementsByClassName('ui360-vis','div',oContainer.parentNode).length);thisSound=sm.createSound({id:'ui360Sound'+(self.soundCount++),url:soundRealURL,onplay:self.events.play,onstop:self.events.stop,onpause:self.events.pause,onresume:self.events.resume,onfinish:self.events.finish,onbufferchange:self.events.bufferchange,whileloading:self.events.whileloading,whileplaying:self.events.whileplaying,useWaveformData:(has_vis&&self.config.useWaveformData),useEQData:(has_vis&&self.config.useEQData),usePeakData:(has_vis&&self.config.usePeakData)});diameter=parseInt(self.getElementsByClassName('sm2-360ui','div',oContainer)[0].offsetWidth,10);thisSound._360data={oUI360:self.getParentByClassName(o,'ui360'),oLink:o,className:self.css.sPlaying,oUIBox:self.getElementsByClassName('sm2-360ui','div',oContainer)[0],oCanvas:self.getElementsByClassName('sm2-canvas','canvas',oContainer)[0],oButton:self.getElementsByClassName('sm2-360btn','span',oContainer)[0],oTiming:self.getElementsByClassName('sm2-timing','div',oContainer)[0],oCover:self.getElementsByClassName('sm2-cover','div',oContainer)[0],circleDiameter:diameter,circleRadius:diameter/2,lastTime:null,didFinish:null,pauseCount:0,radius:0,fontSize:1,fontSizeMax:self.config.fontSizeMax,scaleFont:(has_vis&&self.config.scaleFont),showHMSTime:has_vis,amplifier:(has_vis&&self.config.usePeakData?0.9:1),radiusMax:diameter*0.375,width:0,widthMax:diameter*0.45,lastValues:{bytesLoaded:0,bytesTotal:0,position:0,durationEstimate:0},animating:false,oAnim:new window.Animator({duration:self.config.animDuration,transition:self.config.animTransition,onComplete:function(){}}),oAnimProgress:function(nProgress){var thisSound=this;thisSound._360data.radius=parseInt(thisSound._360data.radiusMax*thisSound._360data.amplifier*nProgress,10);thisSound._360data.width=parseInt(thisSound._360data.widthMax*thisSound._360data.amplifier*nProgress,10);if(thisSound._360data.scaleFont&&thisSound._360data.fontSizeMax!==null){thisSound._360data.oTiming.style.fontSize=parseInt(Math.max(1,thisSound._360data.fontSizeMax*nProgress),10)+'px';thisSound._360data.oTiming.style.opacity=nProgress;}
if(thisSound.paused||thisSound.playState===0||thisSound._360data.lastValues.bytesLoaded===0||thisSound._360data.lastValues.position===0){self.updatePlaying.apply(thisSound);}},fps:0};if(typeof self.Metadata!=='undefined'&&self.getElementsByClassName('metadata','div',thisSound._360data.oUI360).length){thisSound._360data.metadata=new self.Metadata(thisSound,self);}
if(thisSound._360data.scaleFont&&thisSound._360data.fontSizeMax!==null){thisSound._360data.oTiming.style.fontSize='1px';}
thisSound._360data.oAnim.addSubject(thisSound._360data.oAnimProgress,thisSound);self.refreshCoords(thisSound);self.updatePlaying.apply(thisSound);self.soundsByURL[soundURL]=thisSound;self.sounds.push(thisSound);if(!self.config.allowMultiple&&self.lastSound){self.stopSound(self.lastSound);}
thisSound.play();}
self.lastSound=thisSound;if(typeof e!=='undefined'&&typeof e.preventDefault!=='undefined'){e.preventDefault();}else if(typeof window.event!=='undefined'){window.event.returnValue=false;}
return false;};this.fanOut=function(oSound){var thisSound=oSound;if(thisSound._360data.animating===1){return false;}
thisSound._360data.animating=0;soundManager._writeDebug('fanOut: '+thisSound.sID+': '+thisSound._360data.oLink.href);thisSound._360data.oAnim.seekTo(1);window.setTimeout(function(){thisSound._360data.animating=0;},self.config.animDuration+20);};this.fanIn=function(oSound){var thisSound=oSound;if(thisSound._360data.animating===-1){return false;}
thisSound._360data.animating=-1;soundManager._writeDebug('fanIn: '+thisSound.sID+': '+thisSound._360data.oLink.href);thisSound._360data.oAnim.seekTo(0);window.setTimeout(function(){thisSound._360data.didFinish=false;thisSound._360data.animating=0;self.resetLastValues(thisSound);},self.config.animDuration+20);};this.resetLastValues=function(oSound){oSound._360data.lastValues.position=0;};this.refreshCoords=function(thisSound){thisSound._360data.canvasXY=self.findXY(thisSound._360data.oCanvas);thisSound._360data.canvasMid=[thisSound._360data.circleRadius,thisSound._360data.circleRadius];thisSound._360data.canvasMidXY=[thisSound._360data.canvasXY[0]+thisSound._360data.canvasMid[0],thisSound._360data.canvasXY[1]+thisSound._360data.canvasMid[1]];};this.stopSound=function(oSound){soundManager._writeDebug('stopSound: '+oSound.sID);soundManager.stop(oSound.sID);if(!isTouchDevice){soundManager.unload(oSound.sID);}};this.buttonClick=function(e){var o=e?(e.target?e.target:e.srcElement):window.event.srcElement;self.handleClick({target:self.getParentByClassName(o,'sm2-360ui').nextSibling});return false;};this.buttonMouseDown=function(e){if(!isTouchDevice){document.onmousemove=function(e){self.mouseDown(e);};}else{self.addEventHandler(document,'touchmove',self.mouseDown);}
self.stopEvent(e);return false;};this.mouseDown=function(e){if(!isTouchDevice&&e.button>1){return true;}
if(!self.lastSound){self.stopEvent(e);return false;}
var evt=e?e:window.event,target,thisSound,oData;if(isTouchDevice&&evt.touches){evt=evt.touches[0];}
target=(evt.target||evt.srcElement);thisSound=self.getSoundByURL(self.getElementsByClassName('sm2_link','a',self.getParentByClassName(target,'ui360'))[0].href);self.lastTouchedSound=thisSound;self.refreshCoords(thisSound);oData=thisSound._360data;self.addClass(oData.oUIBox,'sm2_dragging');oData.pauseCount=(self.lastTouchedSound.paused?1:0);self.mmh(e?e:window.event);if(isTouchDevice){self.removeEventHandler(document,'touchmove',self.mouseDown);self.addEventHandler(document,'touchmove',self.mmh);self.addEventHandler(document,'touchend',self.mouseUp);}else{document.onmousemove=self.mmh;document.onmouseup=self.mouseUp;}
self.stopEvent(e);return false;};this.mouseUp=function(e){var oData=self.lastTouchedSound._360data;self.removeClass(oData.oUIBox,'sm2_dragging');if(oData.pauseCount===0){self.lastTouchedSound.resume();}
if(!isTouchDevice){document.onmousemove=null;document.onmouseup=null;}else{self.removeEventHandler(document,'touchmove',self.mmh);self.removeEventHandler(document,'touchend',self.mouseUP);}};this.mmh=function(e){if(typeof e==='undefined'){e=window.event;}
var oSound=self.lastTouchedSound,coords=self.getMouseXY(e),x=coords[0],y=coords[1],deltaX=x-oSound._360data.canvasMidXY[0],deltaY=y-oSound._360data.canvasMidXY[1],angle=Math.floor(fullCircle-(self.rad2deg(Math.atan2(deltaX,deltaY))+180));oSound.setPosition(oSound.durationEstimate*(angle/fullCircle));self.stopEvent(e);return false;};this.drawSolidArc=function(oCanvas,color,radius,width,radians,startAngle,noClear){var x=radius,y=radius,canvas=oCanvas,ctx,innerRadius,doesntLikeZero,endPoint;if(canvas.getContext){ctx=canvas.getContext('2d');}
oCanvas=ctx;if(!noClear){self.clearCanvas(canvas);}
if(color){ctx.fillStyle=color;}
oCanvas.beginPath();if(isNaN(radians)){radians=0;}
innerRadius=radius-width;doesntLikeZero=(isOpera||isSafari);if(!doesntLikeZero||(doesntLikeZero&&radius>0)){oCanvas.arc(0,0,radius,startAngle,radians,false);endPoint=self.getArcEndpointCoords(innerRadius,radians);oCanvas.lineTo(endPoint.x,endPoint.y);oCanvas.arc(0,0,innerRadius,radians,startAngle,true);oCanvas.closePath();oCanvas.fill();}};this.getArcEndpointCoords=function(radius,radians){return{x:radius*Math.cos(radians),y:radius*Math.sin(radians)};};this.deg2rad=function(nDeg){return(nDeg*Math.PI/180);};this.rad2deg=function(nRad){return(nRad*180/Math.PI);};this.getTime=function(nMSec,bAsString){var nSec=Math.floor(nMSec/1000),min=Math.floor(nSec/60),sec=nSec-(min*60);return(bAsString?(min+':'+(sec<10?'0'+sec:sec)):{'min':min,'sec':sec});};this.clearCanvas=function(oCanvas){var canvas=oCanvas,ctx=null,width,height;if(canvas.getContext){ctx=canvas.getContext('2d');}
width=canvas.offsetWidth;height=canvas.offsetHeight;ctx.clearRect(-(width/2),-(height/2),width,height);};this.updatePlaying=function(){var timeNow=(this._360data.showHMSTime?self.getTime(this.position,true):parseInt(this.position/1000,10));var ringScaleFactor=self.config.scaleArcWidth;if(this.bytesLoaded){this._360data.lastValues.bytesLoaded=this.bytesLoaded;this._360data.lastValues.bytesTotal=this.bytesTotal;}
if(this.position){this._360data.lastValues.position=this.position;}
if(this.durationEstimate){this._360data.lastValues.durationEstimate=this.durationEstimate;}
self.drawSolidArc(this._360data.oCanvas,self.config.backgroundRingColor,this._360data.width,this._360data.radius*ringScaleFactor,self.deg2rad(fullCircle),false);self.drawSolidArc(this._360data.oCanvas,(this._360data.metadata?self.config.loadRingColorMetadata:self.config.loadRingColor),this._360data.width,this._360data.radius*ringScaleFactor,self.deg2rad(fullCircle*(this._360data.lastValues.bytesLoaded/this._360data.lastValues.bytesTotal)),0,true);if(this._360data.lastValues.position!==0){self.drawSolidArc(this._360data.oCanvas,(this._360data.metadata?self.config.playRingColorMetadata:self.config.playRingColor),this._360data.width,this._360data.radius*ringScaleFactor,self.deg2rad((this._360data.didFinish===1?fullCircle:fullCircle*(this._360data.lastValues.position/this._360data.lastValues.durationEstimate))),0,true);}
if(this._360data.metadata){this._360data.metadata.events.whileplaying();}
if(timeNow!==this._360data.lastTime){this._360data.lastTime=timeNow;this._360data.oTiming.innerHTML=timeNow;}
if((this.instanceOptions.useWaveformData||this.instanceOptions.useEQData)&&hasRealCanvas){self.updateWaveform(this);}
if(self.config.useFavIcon&&self.vuMeter){self.vuMeter.updateVU(this);}};this.updateWaveform=function(oSound){if((!self.config.useWaveformData&&!self.config.useEQData)||(!sm.features.waveformData&&!sm.features.eqData)){return false;}
if(!oSound.waveformData.left.length&&!oSound.eqData.length&&!oSound.peakData.left){return false;}
var oCanvas=oSound._360data.oCanvas.getContext('2d'),offX=0,offY=parseInt(oSound._360data.circleDiameter/2,10),scale=offY/2,lineWidth=1,lineHeight=1,thisY=0,offset=offY,i,j,direction,downSample,dataLength,sampleCount,startAngle,endAngle,waveData,innerRadius,perItemAngle,yDiff,eqSamples,playedAngle,iAvg,nPeak;if(self.config.useWaveformData){downSample=self.config.waveformDataDownsample;downSample=Math.max(1,downSample);dataLength=256;sampleCount=(dataLength/downSample);startAngle=0;endAngle=0;waveData=null;innerRadius=(self.config.waveformDataOutside?1:(self.config.waveformDataConstrain?0.5:0.565));scale=(self.config.waveformDataOutside?0.7:0.75);perItemAngle=self.deg2rad((360/sampleCount)*self.config.waveformDataLineRatio);for(i=0;i<dataLength;i+=downSample){startAngle=self.deg2rad(360*(i/(sampleCount)*1/downSample));endAngle=startAngle+perItemAngle;waveData=oSound.waveformData.left[i];if(waveData<0&&self.config.waveformDataConstrain){waveData=Math.abs(waveData);}
self.drawSolidArc(oSound._360data.oCanvas,self.config.waveformDataColor,oSound._360data.width*innerRadius*(2-self.config.scaleArcWidth),oSound._360data.radius*scale*1.25*waveData,endAngle,startAngle,true);}}
if(self.config.useEQData){downSample=self.config.eqDataDownsample;yDiff=0;downSample=Math.max(1,downSample);eqSamples=192;sampleCount=(eqSamples/downSample);innerRadius=(self.config.eqDataOutside?1:0.565);direction=(self.config.eqDataOutside?-1:1);scale=(self.config.eqDataOutside?0.5:0.75);startAngle=0;endAngle=0;perItemAngle=self.deg2rad((360/sampleCount)*self.config.eqDataLineRatio);playedAngle=self.deg2rad((oSound._360data.didFinish===1?360:360*(oSound._360data.lastValues.position/oSound._360data.lastValues.durationEstimate)));j=0;iAvg=0;for(i=0;i<eqSamples;i+=downSample){startAngle=self.deg2rad(360*(i/eqSamples));endAngle=startAngle+perItemAngle;self.drawSolidArc(oSound._360data.oCanvas,(endAngle>playedAngle?self.config.eqDataColor:self.config.playRingColor),oSound._360data.width*innerRadius,oSound._360data.radius*scale*(oSound.eqData.left[i]*direction),endAngle,startAngle,true);}}
if(self.config.usePeakData){if(!oSound._360data.animating){nPeak=(oSound.peakData.left||oSound.peakData.right);eqSamples=3;for(i=0;i<eqSamples;i++){nPeak=(nPeak||oSound.eqData[i]);}
oSound._360data.amplifier=(self.config.useAmplifier?(0.9+(nPeak*0.1)):1);oSound._360data.radiusMax=oSound._360data.circleDiameter*0.175*oSound._360data.amplifier;oSound._360data.widthMax=oSound._360data.circleDiameter*0.4*oSound._360data.amplifier;oSound._360data.radius=parseInt(oSound._360data.radiusMax*oSound._360data.amplifier,10);oSound._360data.width=parseInt(oSound._360data.widthMax*oSound._360data.amplifier,10);}}};this.getUIHTML=function(diameter){return['<canvas class="sm2-canvas" width="'+diameter+'" height="'+diameter+'"></canvas>',' <span class="sm2-360btn sm2-360btn-default"></span>',' <div class="sm2-timing'+(navigator.userAgent.match(/safari/i)?' alignTweak':'')+'"></div>',' <div class="sm2-cover"></div>'];};this.uiTest=function(sClass){var oTemplate=document.createElement('div'),oFakeUI,oFakeUIBox,oTemp,fakeDiameter,uiHTML,circleDiameter,circleRadius,fontSizeMax,oTiming;oTemplate.className='sm2-360ui';oFakeUI=document.createElement('div');oFakeUI.className='ui360'+(sClass?' '+sClass:'');oFakeUIBox=oFakeUI.appendChild(oTemplate.cloneNode(true));oFakeUI.style.position='absolute';oFakeUI.style.left='-9999px';oTemp=document.body.appendChild(oFakeUI);fakeDiameter=oFakeUIBox.offsetWidth;uiHTML=self.getUIHTML(fakeDiameter);oFakeUIBox.innerHTML=uiHTML[1]+uiHTML[2]+uiHTML[3];circleDiameter=parseInt(oFakeUIBox.offsetWidth,10);circleRadius=parseInt(circleDiameter/2,10);oTiming=self.getElementsByClassName('sm2-timing','div',oTemp)[0];fontSizeMax=parseInt(self.getStyle(oTiming,'font-size'),10);if(isNaN(fontSizeMax)){fontSizeMax=null;}
oFakeUI.parentNode.removeChild(oFakeUI);uiHTML=oFakeUI=oFakeUIBox=oTemp=null;return{circleDiameter:circleDiameter,circleRadius:circleRadius,fontSizeMax:fontSizeMax};};this.init=function(){sm._writeDebug('threeSixtyPlayer.init()');var oItems=self.getElementsByClassName('ui360','div'),i,j,oLinks=[],is_vis=false,foundItems=0,oCanvas,oCanvasCTX,oCover,diameter,radius,uiData,uiDataVis,oUI,oBtn,o,o2,oID;for(i=0,j=oItems.length;i<j;i++){oLinks.push(oItems[i].getElementsByTagName('a')[0]);oItems[i].style.backgroundImage='none';}
self.oUITemplate=document.createElement('div');self.oUITemplate.className='sm2-360ui';self.oUITemplateVis=document.createElement('div');self.oUITemplateVis.className='sm2-360ui';uiData=self.uiTest();self.config.circleDiameter=uiData.circleDiameter;self.config.circleRadius=uiData.circleRadius;uiDataVis=self.uiTest('ui360-vis');self.config.fontSizeMax=uiDataVis.fontSizeMax;self.oUITemplate.innerHTML=self.getUIHTML(self.config.circleDiameter).join('');self.oUITemplateVis.innerHTML=self.getUIHTML(uiDataVis.circleDiameter).join('');for(i=0,j=oLinks.length;i<j;i++){if(sm.canPlayLink(oLinks[i])&&!self.hasClass(oLinks[i],self.excludeClass)&&!self.hasClass(oLinks[i],self.css.sDefault)){self.addClass(oLinks[i],self.css.sDefault);self.links[foundItems]=(oLinks[i]);self.indexByURL[oLinks[i].href]=foundItems;foundItems++;is_vis=self.hasClass(oLinks[i].parentNode,'ui360-vis');diameter=(is_vis?uiDataVis:uiData).circleDiameter;radius=(is_vis?uiDataVis:uiData).circleRadius;oUI=oLinks[i].parentNode.insertBefore((is_vis?self.oUITemplateVis:self.oUITemplate).cloneNode(true),oLinks[i]);if(isIE&&typeof window.G_vmlCanvasManager!=='undefined'){o=oLinks[i].parentNode;o2=document.createElement('canvas');o2.className='sm2-canvas';oID='sm2_canvas_'+parseInt(Math.random()*1048576,10);o2.id=oID;o2.width=diameter;o2.height=diameter;oUI.appendChild(o2);window.G_vmlCanvasManager.initElement(o2);oCanvas=document.getElementById(oID);}else{oCanvas=oLinks[i].parentNode.getElementsByTagName('canvas')[0];}
oCover=self.getElementsByClassName('sm2-cover','div',oLinks[i].parentNode)[0];oBtn=oLinks[i].parentNode.getElementsByTagName('span')[0];self.addEventHandler(oBtn,'click',self.buttonClick);if(!isTouchDevice){self.addEventHandler(oCover,'mousedown',self.mouseDown);}else{self.addEventHandler(oCover,'touchstart',self.mouseDown);}
oCanvasCTX=oCanvas.getContext('2d');oCanvasCTX.translate(radius,radius);oCanvasCTX.rotate(self.deg2rad(-90));}}
if(foundItems>0){self.addEventHandler(document,'click',self.handleClick);if(self.config.autoPlay){self.handleClick({target:self.links[0],preventDefault:function(){}});}}
sm._writeDebug('threeSixtyPlayer.init(): Found '+foundItems+' relevant items.');if(self.config.useFavIcon&&typeof this.VUMeter!=='undefined'){this.vuMeter=new this.VUMeter(this);}};}
ThreeSixtyPlayer.prototype.VUMeter=function(oParent){var self=oParent,me=this,_head=document.getElementsByTagName('head')[0],isOpera=(navigator.userAgent.match(/opera/i)),isFirefox=(navigator.userAgent.match(/firefox/i));this.vuMeterData=[];this.vuDataCanvas=null;this.setPageIcon=function(sDataURL){if(!self.config.useFavIcon||!self.config.usePeakData||!sDataURL){return false;}
var link=document.getElementById('sm2-favicon');if(link){_head.removeChild(link);link=null;}
if(!link){link=document.createElement('link');link.id='sm2-favicon';link.rel='shortcut icon';link.type='image/png';link.href=sDataURL;document.getElementsByTagName('head')[0].appendChild(link);}};this.resetPageIcon=function(){if(!self.config.useFavIcon){return false;}
var link=document.getElementById('favicon');if(link){link.href='/favicon.ico';}};this.updateVU=function(oSound){if(soundManager.flashVersion>=9&&self.config.useFavIcon&&self.config.usePeakData){me.setPageIcon(me.vuMeterData[parseInt(16*oSound.peakData.left,10)][parseInt(16*oSound.peakData.right,10)]);}};this.createVUData=function(){var i=0,j=0,canvas=me.vuDataCanvas.getContext('2d'),vuGrad=canvas.createLinearGradient(0,16,0,0),bgGrad=canvas.createLinearGradient(0,16,0,0),outline='rgba(0,0,0,0.2)';vuGrad.addColorStop(0,'rgb(0,192,0)');vuGrad.addColorStop(0.30,'rgb(0,255,0)');vuGrad.addColorStop(0.625,'rgb(255,255,0)');vuGrad.addColorStop(0.85,'rgb(255,0,0)');bgGrad.addColorStop(0,outline);bgGrad.addColorStop(1,'rgba(0,0,0,0.5)');for(i=0;i<16;i++){me.vuMeterData[i]=[];}
for(i=0;i<16;i++){for(j=0;j<16;j++){me.vuDataCanvas.setAttribute('width',16);me.vuDataCanvas.setAttribute('height',16);canvas.fillStyle=bgGrad;canvas.fillRect(0,0,7,15);canvas.fillRect(8,0,7,15);canvas.fillStyle=vuGrad;canvas.fillRect(0,15-i,7,16-(16-i));canvas.fillRect(8,15-j,7,16-(16-j));canvas.clearRect(0,3,16,1);canvas.clearRect(0,7,16,1);canvas.clearRect(0,11,16,1);me.vuMeterData[i][j]=me.vuDataCanvas.toDataURL('image/png');}}};this.testCanvas=function(){var c=document.createElement('canvas'),ctx=null,ok;if(!c||typeof c.getContext==='undefined'){return null;}
ctx=c.getContext('2d');if(!ctx||typeof c.toDataURL!=='function'){return null;}
try{ok=c.toDataURL('image/png');}catch(e){return null;}
return c;};this.init=function(){if(self.config.useFavIcon){me.vuDataCanvas=me.testCanvas();if(me.vuDataCanvas&&(isFirefox||isOpera)){me.createVUData();}else{self.config.useFavIcon=false;}}};this.init();};ThreeSixtyPlayer.prototype.Metadata=function(oSound,oParent){soundManager._wD('Metadata()');var me=this,oBox=oSound._360data.oUI360,o=oBox.getElementsByTagName('ul')[0],oItems=o.getElementsByTagName('li'),isFirefox=(navigator.userAgent.match(/firefox/i)),isAlt=false,i,oDuration;this.lastWPExec=0;this.refreshInterval=250;this.totalTime=0;this.events={whileplaying:function(){var width=oSound._360data.width,radius=oSound._360data.radius,fullDuration=(oSound.durationEstimate||(me.totalTime*1000)),isAlt=null,i,j,d;for(i=0,j=me.data.length;i<j;i++){isAlt=(i%2===0);oParent.drawSolidArc(oSound._360data.oCanvas,(isAlt?oParent.config.segmentRingColorAlt:oParent.config.segmentRingColor),isAlt?width:width,isAlt?radius/2:radius/2,oParent.deg2rad(360*(me.data[i].endTimeMS/fullDuration)),oParent.deg2rad(360*((me.data[i].startTimeMS||1)/fullDuration)),true);}
d=new Date();if(d-me.lastWPExec>me.refreshInterval){me.refresh();me.lastWPExec=d;}}};this.refresh=function(){var i,j,index=null,now=oSound.position,metadata=oSound._360data.metadata.data;for(i=0,j=metadata.length;i<j;i++){if(now>=metadata[i].startTimeMS&&now<=metadata[i].endTimeMS){index=i;break;}}
if(index!==metadata.currentItem&&index<metadata.length){oSound._360data.oLink.innerHTML=metadata.mainTitle+' <span class="metadata"><span class="sm2_divider"> | </span><span class="sm2_metadata">'+metadata[index].title+'</span></span>';metadata.currentItem=index;}};this.strToTime=function(sTime){var segments=sTime.split(':'),seconds=0,i;for(i=segments.length;i--;){seconds+=parseInt(segments[i],10)*Math.pow(60,segments.length-1-i);}
return seconds;};this.data=[];this.data.givenDuration=null;this.data.currentItem=null;this.data.mainTitle=oSound._360data.oLink.innerHTML;for(i=0;i<oItems.length;i++){this.data[i]={o:null,title:oItems[i].getElementsByTagName('p')[0].innerHTML,startTime:oItems[i].getElementsByTagName('span')[0].innerHTML,startSeconds:me.strToTime(oItems[i].getElementsByTagName('span')[0].innerHTML.replace(/[()]/g,'')),duration:0,durationMS:null,startTimeMS:null,endTimeMS:null,oNote:null};}
oDuration=oParent.getElementsByClassName('duration','div',oBox);this.data.givenDuration=(oDuration.length?me.strToTime(oDuration[0].innerHTML)*1000:0);for(i=0;i<this.data.length;i++){this.data[i].duration=parseInt(this.data[i+1]?this.data[i+1].startSeconds:(me.data.givenDuration?me.data.givenDuration:oSound.durationEstimate)/1000,10)-this.data[i].startSeconds;this.data[i].startTimeMS=this.data[i].startSeconds*1000;this.data[i].durationMS=this.data[i].duration*1000;this.data[i].endTimeMS=this.data[i].startTimeMS+this.data[i].durationMS;this.totalTime+=this.data[i].duration;}};if(navigator.userAgent.match(/webkit/i)&&navigator.userAgent.match(/mobile/i)){soundManager.useHTML5Audio=true;}
soundManager.html5PollingInterval=50;soundManager.debugMode=(window.location.href.match(/debug=1/i));soundManager.consoleOnly=true;soundManager.flashVersion=9;soundManager.useHighPerformance=true;soundManager.useFlashBlock=true;if(soundManager.debugMode){window.setInterval(function(){var p=window.threeSixtyPlayer;if(p&&p.lastSound&&p.lastSound._360data.fps&&typeof window.isHome==='undefined'){soundManager._writeDebug('fps: ~'+p.lastSound._360data.fps);p.lastSound._360data.fps=0;}},1000);}
window.ThreeSixtyPlayer=ThreeSixtyPlayer;}(window));threeSixtyPlayer=new ThreeSixtyPlayer();soundManager.onready(threeSixtyPlayer.init);
;var Cookie={create:function(name,value,days){if(days){var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));var expires="; expires="+date.toGMTString();}
else var expires="";document.cookie=name+"="+value+expires+"; path=/";},read:function(name){var nameEQ=name+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length);}
return null;},erase:function(name){this.create(name,"",-1);},readVar:function(key){var val;var sess=decodeURIComponent(this.read('allmusic_session'));if(sess.length>0){var regex=new RegExp('\\;s\\:'+key.length+'\\:\\"'+key+'"\\;s\\:[0-9]+\\:\\"(.+?)\\"');var matches=regex.exec(sess);if(matches){val=matches[1];}}
return val;}}
;var Rovi={};Rovi.userLoggedIn=function(){var session=Cookie.read('allmusic_session');var remember=Cookie.read('remember');if(session!=null){session=unescape(session);return(session.indexOf('"user"')!=-1&&session.indexOf('"user";i:0;')==-1);}else if(remember!=null){return true;}
return false;}
;$(function(){var initTooltips=function(){$('[data-tooltip]').each(function(){var $el=$(this);var options=$el.data('tooltip');$el.removeAttr('data-tooltip');var type='';switch(options.id.charAt(1).toUpperCase()){case'W':type='album';break;case'N':type='artist';break;case'R':type='release';break;}
$el.qtip({show:{solo:true,delay:800},position:{my:(options.position!=undefined)?options.position.my:'left center',at:(options.position!=undefined)?options.position.at:'middle right',viewport:$(window),container:$('#wrapper')},style:{width:(options.thumbnail)?450:300,classes:'ui-tooltip-shadow '+((options.thumbnail)?'tooltip-with-thumbnail':'tooltip-without-thumbnail')},hide:{fixed:true,delay:200,event:'mouseleave '+($.fn.qtip.plugins.iOS?'click':'')},content:{text:'<img src="/images/ajax-loader-111111.gif" class="ajax-loader" alt="">',ajax:{url:'/tooltip/'+type+'/'+options.id,data:options,type:'POST',error:function(xhr,status,error){$.error(status+': '+error);}}}});});}
initTooltips();$(document).ajaxSuccess(function(){initTooltips();});});
;$(function(){$.getJSON('/json/gaEvents.json',function(gaEvents){if(gaEvents){for(var scope in gaEvents){if(gaEvents[scope]){for(var selector in gaEvents[scope]){var e=gaEvents[scope][selector];$(scope).on(e.event,selector,e.data,allmusic.gaTrackEvent);}}}}});});;var allmusic=allmusic||{};allmusic.gaTrackEvent=function(e){try{_gaq.push(['_trackEvent',e.data[0],e.data[1],e.data[2]]);if(location.hash=='#ga'){console.log('GA Event Fired',e.data);e.stopPropagation();return false;}}catch(err){$.error(err);}}
function testGAEvents(){$.ajax({url:'/json/gaEvents.json',dataType:'json',async:false,success:function(gaEvents){if(gaEvents){for(var scope in gaEvents){if(gaEvents[scope]){for(var selector in gaEvents[scope]){if($(scope).length>0){var event=gaEvents[scope][selector].event;var data=gaEvents[scope][selector].data;$(selector).trigger(event);setTimeout(100,function(){var lastEvent=_gaq.pop();lastEvent.shift();if(String(lastEvent)!==String(data)){return false;}});}}}}}}});return true;}
;(function($){var settings={prependHTML:'',loadRating:true}
var methods={init:function(options){settings=$.extend(settings,options);if(this.length>0&&$(this).hasClass('average')){var ids=[];this.each(function(){ids.push($(this).data('id'));});methods.refreshAverageRating(ids);return this;}else{return this.each(function(){var $this=$(this);var id=$this.data('id');var options=$this.data('options');settings=$.extend(settings,options);if(Rovi.userLoggedIn()&&settings.loadRating){methods.refreshUserRating(id);}else{methods.displayUserRating({itemId:id,score:0});}});}},calcScore:function(){var e=this;var $target=$(this.target);var offset=e.offsetX||e.pageX-$target.offset().left;return Math.ceil((offset/$target.width())*10)*10;},calcStarRating:function(score){return Math.ceil(score/10)/2;},buildStars:function(type,score){var $stars=$('<span class="'+type+' rating" />');$stars.attr('data-stars',methods.calcStarRating(score));return $stars;},displayAverageRating:function(rating){var $this=$('.ajax-rating.average[data-id="'+rating.itemId+'"]');$this.empty();if(rating.average>0){var type='average';if($this.hasClass('small')){type+=' small';}
var $stars=methods.buildStars(type,rating.average);$this.append($stars);if($this.closest('#discography').length){$this.append('<span class="count">('+rating.count+')</span)');var $td=$this.closest('td');var sortVal=(rating.average/100)
+(rating.count/100000000)
+'-'+$td.data('secondary-sort');$td.data('sort-value',sortVal);}else{$this.prepend('<h4>Average User Rating <span class="count">('+rating.count+')</span></h4>');}}else{if($this.closest('#discography').length){$this.html('No User Ratings');}else{$this.html('<h4>Average User Rating</h4><span class="not-yet-rated"/>');}}
$this.show();},displayUserRating:function(rating){var $this=$('.ajax-rating.user[data-id="'+rating.itemId+'"]');var type='user';if($this.hasClass('small')){type+=' small';}
var $stars=methods.buildStars(type,rating.score);if(settings.prependHTML){$this.html(settings.prependHTML);}
$this.append($stars).show();},saveRating:function(id,score){$.post('/user/save-rating',{'id':id,'score':score},function(){if($('.ajax-rating.average[data-id="'+id+'"]').exists()){methods.refreshAverageRating([id]);}});},refreshAverageRating:function(ids){$.ajax({url:'/user/ajax/average-ratings/'+ids.join(','),dataType:'json',cache:false,success:function(response){for(var i in response){methods.displayAverageRating(response[i]);}}});},refreshUserRating:function(id){$.ajax({url:'/user/ajax/user-rating/'+id,dataType:'json',cache:false,success:function(rating){if(rating.score==undefined){rating={itemId:id,score:0};}
methods.displayUserRating(rating);}});},showTooltip:function(){var $stars=this;$('<div />').qtip({show:{ready:true,solo:true},position:{my:'left top',at:'center right',viewport:$(window),target:$stars},style:{width:468,classes:'ratings-signup-tooltip',tip:{corner:'leftCenter',width:12,height:22}},hide:{fixed:true,delay:200,event:'mouseleave '+($.fn.qtip.plugins.iOS?'click':'')},content:{text:'<header>Create an account or sign in to customize your AllMusic experience:</header>'
+'<ul>'
+'<li>Get personalized recommendations based on your tastes and preferences.</li>'
+'<li>Rate the music you love (or hate)</li>'
+'</ul>'
+'<a class="join-link button_base button_red" href="/join">Join Now</a><a href="#" class="sign-in-link button_base button_black">Sign In</a>'
+'</header>'},events:{hide:function(event,api){api.destroy();}}});}};$.fn.ajaxRating=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('Method '+method+' does not exist on jQuery.ajaxRating');}};$(document).on({mousemove:function(e){var $this=$(this);var stars=$this.data('stars');if(stars&&typeof $this.data('cached-stars')=='undefined'){$this.data('cached-stars',stars);}
var score=methods.calcScore.call(e);var newStars=methods.calcStarRating(score);if(score>0){$this.attr('data-stars',newStars);$this.removeClass(function(index,css){return(css.match(/\bstars-\S+/g)||[]).join(' ');});newClassName=(newStars+'').replace(".","-");$this.addClass('stars-'+newClassName);}},mouseout:function(){var $this=$(this);var cachedStars=$this.data('cached-stars');if(cachedStars){$this.attr('data-stars',cachedStars);$this.removeClass(function(index,css){return(css.match(/\bstars-\S+/g)||[]).join(' ');});newClassName=(cachedStars+'').replace(".","-");$this.addClass('stars-'+newClassName);}else{$this.removeClass(function(index,css){return(css.match(/\bstars-\S+/g)||[]).join(' ');});$this.removeAttr('data-stars')}},click:function(e){var $this=$(this);if(Rovi.userLoggedIn()){var score=methods.calcScore.call(e);if(score>0){var stars=methods.calcStarRating(score);var id=$this.closest('[data-id]').data('id');$this.attr('data-stars',stars).data('cached-stars',stars);$this.removeClass(function(index,css){return(css.match(/\bstars-\S+/g)||[]).join(' ');});newClassName=(stars+'').replace(".","-");$this.addClass('stars-'+newClassName);methods.saveRating(id,score);allmusic.gaTrackEvent({data:["Album Page: Overview","Interaction","Logged in User Rate Album"]});}}else{methods.showTooltip.apply($this.parent());allmusic.gaTrackEvent({data:["Album Page: Overview","Interaction","Non-logged in User Rate Album"]});}}},'.user.rating');$('.ajax-rating.user').ajaxRating();$('.ajax-rating.average').ajaxRating();})(jQuery);
;soundManager.url='/swf/soundmanager2/';soundManager.flashVersion=9;soundManager.useFlashBlock=false;threeSixtyPlayer.config={playNext:true,autoPlay:false,allowMultiple:false,loadRingColor:'#ccc',playRingColor:'#D30028',backgroundRingColor:'#eee',animDuration:500,animTransition:Animator.tx.bouncy,scaleArcWidth:0.5}
;(function($){$.fn.roviShare=function(){return this.each(function(){var obj=$(this);var modal=$('.share-modal',obj);var id=obj.attr('data-objectid');$('.share-button:not(.email)',obj).bind('click',function(e){e.preventDefault();var width=650;var height=420;var top=parseInt((screen.availHeight/2)-(height/2));var left=parseInt((screen.availWidth/2)-(width/2));window.open($(this).attr('href'),'social','width='+width+',height='+height+',top='+top+',left='+left+',menubar=no,toolbar=no');$(this).closest('.share-modal').hide();if(id){Rovi.userEvent({event:'share',data:{item:id}});}});$('.share-button.email',obj).bind('click',function(e){e.preventDefault();$('.share-frame',modal).empty();$.ajax({url:'/share/email_form',data:{subject:$('.rovi-share').attr('data-sharemessage'),message:$('meta[name="description"]').attr('content')},type:'POST',cache:false,beforeSend:function(){modal.find('.share-frame').html('<img src="/images/loading.gif" class="spinner" alt="" />');modal.fadeIn(100);},success:function(data){$('.share-frame',modal).html(data);$('input:first',modal).focus();}});});modal.delegate('.close-button','click',function(e){e.preventDefault();$(this).closest('.share-modal').fadeOut(100);});modal.delegate('.email-form input, .email-form textarea','focus',function(e){$(this).removeClass('error').next('.error-msg').remove();});modal.delegate('.email-form input[type="submit"]','click',function(e){e.preventDefault();var valid=true;$('.error-msg',modal).remove();$('input[type="text"], textarea',modal).each(function(){var field=$(this);if(field.val()===''){field.addClass('error').after('<div class="error-msg">'+field.attr('alt')+' is required.</div>');valid=false;}});if(valid){$.post('/share/send_email/',$('form',modal).serialize(),function(data){$('.share-frame',modal).animate({height:'120px'},100).html(data);if(id){Rovi.userEvent({event:'share',data:{item:id}});}
modal.delay(1000).fadeOut(1000);$('.share-frame',modal).delay(2500).animate({height:'348px'},0)});}});});}})(jQuery);$(function(){if($('.rovi-share').length>0){$('.rovi-share').roviShare();$('body').click(function(e){if($(e.target).closest('.rovi-share').length==0){$('.share-modal').hide();}});}
if($('.article .menu').length>0){$('.article .menu').roviShare();}});
;(function($){var $dropdown;var ajaxManager;var lastTerm;var timer;var hovering=false;var k={DOWN_ARROW:40,UP_ARROW:38,ENTER:13,NUMPAD_ENTER:108,ESCAPE:27};var options={appendTo:'body',minLength:3,minPause:100,select:null};var results={};var typeOrder=[];var methods={init:function(args){ajaxManager=$.manageAjax.create('typeaheadAJAXManager',{queue:false,cacheResponse:true});$(document).click(function(e){if($(e.target).closest('.typeahead').length==0){$('.typeahead').hide();}});return this.each(function(){options=$.extend(options,args);var $input=$(this);$input.attr('autocomplete','off');$input.keydown(function(e){switch(e.which){case k.DOWN_ARROW:case k.UP_ARROW:e.preventDefault();ajaxManager.abort();var focusIdx=$('.result',$dropdown).index($('.focus'));$('.result',$dropdown).removeClass('focus');if(e.which==k.DOWN_ARROW){if(focusIdx==-1){$('.result:first',$dropdown).addClass('focus');}else if($('.result',$dropdown).length>focusIdx){$('.result',$dropdown).eq(focusIdx+1).addClass('focus');}}else if(e.which==k.UP_ARROW){if(focusIdx==-1){$('.result:last',$dropdown).addClass('focus');}else if(focusIdx>0){$('.result',$dropdown).eq(focusIdx-1).addClass('focus');}}
break;case k.ENTER:case k.NUMPAD_ENTER:e.preventDefault();var $focused=$('.result.focus',$dropdown);if($focused.length>0&&typeof options.select=='function'){options.select($focused.data());}
break;case k.ESCAPE:$('.typeahead').hide();break;default:clearTimeout(timer);timer=setTimeout(function(){var term=$input.val();if(term!=lastTerm){if(term.length<options.minLength){$dropdown.hide();}else if(!hovering){lastTerm=term;results={};typeOrder=[];ajaxManager.abort();ajaxManager.add({url:'/search/typeahead/album/'+encodeURIComponent(term),dataType:'json',success:function(data){methods.callback('album',data)}});ajaxManager.add({url:'/search/typeahead/artist/'+encodeURIComponent(term),dataType:'json',success:function(data){methods.callback('artist',data)}});ajaxManager.add({url:'/search/typeahead/composition/'+encodeURIComponent(term),dataType:'json',success:function(data){methods.callback('composition',data)}});ajaxManager.add({url:'/search/typeahead/song/'+encodeURIComponent(term),dataType:'json',success:function(data){methods.callback('song',data)}});}}},options.minPause);}});$dropdown=$('<ul class="typeahead"></ul>').css({display:'none',position:'relative',zIndex:10000});$dropdown.on('click','.result',function(e){e.preventDefault();if(typeof options.select=='function'){options.select($(this).data());}});$dropdown.on({mouseenter:function(){ajaxManager.abort();hovering=true;},mouseleave:function(){hovering=false;}});$dropdown.appendTo(options.appendTo);});},callback:function(type,data){results[type]=data;if(data.length>0){if(typeOrder.length==0){typeOrder.push(type);}else{var topRelevance=results[typeOrder[0]][0].relevance;var relevance=data[0].relevance;if(relevance>topRelevance){typeOrder.unshift(type);}else{typeOrder.push(type);}}}
if(results.album&&results.artist&&results.song){methods.displayResults();}},displayResults:function(){$dropdown.hide().empty();var html='';for(var i in typeOrder){var type=typeOrder[i];switch(type){case'artist':html+='<li><dl>';html+='<dt><span class="sprite2 icon-search-artist"></span>artists</dt>';for(var i in results.artist){var artist=results.artist[i];html+='<dd class="result" data-url="'+artist.url+'">'+artist.name+'</dd>';}
html+='</li></dl>';break;case'album':html+='<li><dl>';html+='<dt><span class="sprite2 icon-search-album"></span>albums</dt>';for(var i in results.album){var album=results.album[i];html+='<dd class="result" data-url="'+album.url+'">';html+=album.title;html+='<div class="secondary">'+album.artists+'</div>';html+='</dd>';}
html+='</li></dl>';break;case'composition':html+='<li><dl>';html+='<dt><span class="sprite2 icon-search-composition"></span>compositions</dt>';for(var i in results.composition){var composition=results.composition[i];html+='<dd class="result" data-url="'+composition.url+'">';html+=composition.title;html+='<div class="secondary">'+composition.composers+'</div>';html+='</dd>';}
html+='</li></dl>';break;case'song':html+='<li><dl>';html+='<dt><span class="sprite2 icon-search-song"></span>songs</dt>';for(var i in results.song){var song=results.song[i];html+='<dd class="result" data-url="'+song.url+'">';html+=song.title;html+='<div class="secondary">'+song.artists+'</div>';html+='</dd>';}
html+='</li></dl>';break;}}
if(html.length>0){html+='<li><a href="/search/all/'+escape(lastTerm)+'">See all results for "'+lastTerm+'" &raquo;</a></li>';$dropdown.append(html).show();}}};$.fn.typeahead=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('Method '+method+' does not exist on jQuery.typeahead');}};})(jQuery);
;(function($){String.prototype.rot13=function(){return this.replace(/[a-zA-Z]/g,function(c){return String.fromCharCode((c<="Z"?90:122)>=(c=c.charCodeAt(0)+13)?c:c-26);});};String.prototype.trim=function(){return $.trim(this)};$.fn.exists=function(){return(this.length>0);}
var o=$({});$.subscribe=function(){o.on.apply(o,arguments);};$.unsubscribe=function(){o.off.apply(o,arguments);};$.publish=function(){o.trigger.apply(o,arguments);};}(jQuery));
;$(function(){if(typeof console=='undefined'){var names=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];window.console={};for(var i=0;i<names.length;i++){window.console[names[i]]=function(){};}}
$(document).delegate('a.disabled','click',function(e){e.preventDefault()});$(document).delegate('a[href^="http"]','click',function(){var $anchor=$(this);if($anchor.attr('target')==undefined){if($anchor.is('[data-target]')===true){$anchor.attr('target',$anchor.data('target'));}else if($anchor.is('[href^="http://'+document.domain+'"]')===false){$anchor.attr('target','_blank');}}});$('a[href^="mailto:"]').each(function(){var $mailto=$(this);var address=$mailto.html().rot13();$mailto.html(address).attr('href','mailto:'+address);});$('<a href="#" id="show_profiler">show profiler</a>').insertBefore('#codeigniter_profiler').click(function(e){e.preventDefault();var $this=$(this);var $profiler=$('#codeigniter_profiler')
$this.hide();$profiler.show();$('html, body').animate({scrollTop:$profiler.offset().top-50});});$(window).resize(function(){if($(window).width()>=1120){$('.socialIcons').show();}else{$('.socialIcons').hide();}}).trigger('resize');$(document).on('click','.connectFeedbackLink',function(e){if(feedback_widget!=undefined){e.preventDefault();feedback_widget.show();}});$('.focus').first().focus();});var loginLightbox;function openloginLightbox(){loginLightbox=new allmusic.lightbox({'class':'sign-in'});loginLightbox.append('<div class="signin-modal" style="background:#ffffff;">'
+'<iframe '
+'id="dialog-iframe" '
+'scrolling="no" '
+'frameborder="0" '
+'align="top" '
+'marginheight="0" '
+'marginwidth="0" '
+'height="100%" '
+'width="100%" '
+'src="/signin"> '
+'</iframe> '
+'</div>');$('.lightbox .icon-modal-close').html('X');loginLightbox.open();}
;$(function(){var $searchInput=$('#search_input');if($searchInput.exists()){$searchInput.bind('focusin focusout',function(event){var $obj=$(this);if(event.type=='focusin'&&$obj.hasClass('default')){$obj.val('').removeClass('default');}else if(event.type=='focusout'&&$obj.val().length==0){$searchInput.addClass('default');}}).addClass('default').removeAttr('disabled');$searchInput.keydown(function(e){if(e.which==13){e.preventDefault();allmusic.gaTrackEvent({data:["Main Navigation: Search","Navigation","Hit Enter Key"]});if($(this).val().length>0){$('.search_form').submit();}}});$('#search_input').typeahead({appendTo:$('#search_bar'),minLength:3,minPause:500,select:function(item){allmusic.gaTrackEvent({data:["Main Navigation: Search","Navigation","Select from Typeahead"]});location=item.url;}});$('.search_form').submit(function(){return($searchInput.val().length>0);})}
$searchInput.focus();});
;(function($){var defaults={'notificationText':'By using this site, you consent to the use of cookies. For more information, please read our <a href="/cookies">cookie policy.</a>','cookieName':'policy','cookieValue':'notified','cookieDays':'365','timeBeforeClose':3000,'fadeTimeDefault':1777,'fadeTimeClose':333};var methods={init:function(options){if(options){$.extend(defaults,options);}
var cookieCheck=Cookie.read(defaults.cookieName);if(cookieCheck===null&&top===self){Cookie.create(defaults.cookieName,defaults.cookieValue,defaults.cookieDays);$.fn.cookiePolicy('showNotification',defaults);}},showNotification:function(settings){notificationText=settings.notificationText+'<a href="#" class="cookie-policy-close">X</a>';var $notification=$('<div class="cookie-policy-box">').html(notificationText).appendTo(document.body);$('.cookie-policy-close').bind('click',function(e){e.preventDefault();$.fn.cookiePolicy('hideNotification',settings.fadeTimeClose);});$notification.fadeIn(settings.fadeTimeDefault,function(){var closeTimeout=setTimeout(function(){$.fn.cookiePolicy('hideNotification',settings.fadeTimeDefault);},settings.timeBeforeClose);});},hideNotification:function(fadeTime){fadeTime=typeof fadeTime!=='undefined'?fadeTime:0;var $notification=$('.cookie-policy-box');if($notification.length!==0){$notification.fadeOut(fadeTime,function(){$notification.remove();});}}};$.fn.cookiePolicy=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('Method '+method+' does not exist on jQuery.cookiePolicy');}};$(window).load(function(){$.fn.cookiePolicy();});})(jQuery);
;$(function(){$(document).on('click','#global-nav .nav-item',function(e){var $nav=$(this);if(!$nav.is('.active')){$('.nav-dropdown').hide();$('.nav-item').removeClass('active');$nav.addClass('active').next('.nav-dropdown').show();}});$(document).on('click','.gear',function(e){var $nav=$(this);$nav.addClass('active');$nav.children('.nav-dropdown').show();});$(document).on('click',function(e){var $dropdown=$('#global-nav .nav-dropdown:visible');if($dropdown.length>0&&$(e.target).closest('#global-nav').length==0){$('#global-nav li .nav-dropdown').hide();$('#global-nav li .nav-item').removeClass('active');}
else if($('.gear').hasClass('active')){if(!$(e.target).hasClass('gear')&&$(e.target).parents('.gear').length==0){$('.gear .nav-dropdown').hide();$('.gear').removeClass('active');}}});$(document).on('click','.sign-in-link',function(e){e.preventDefault();openloginLightbox();});$('.iframe-link').click(function(e){e.preventDefault();window.parent.location.href=$(this).attr('href');});$('#signindialog .crosslink').click(function(e){e.preventDefault();window.parent.location.href='/join';});if(!Rovi.userLoggedIn()){$('.nav-user').show();}else{$.get('/user/greeting/',function(data){$('.nav-user').html(data);$('.nav-user').show();});}});
;var allmusic=allmusic||{};(function($){var defaults={};var settings={};var methods={init:function(){if($('.lightbox').length==0){var classes='lightbox';if(settings['class']){classes+=' '+settings['class'];}
var $lightbox=$('<div class="'+classes+'">'
+'    <div class="lightbox-modal">'
+'        <div class="sprite icon-modal-close"></div>'
+'    </div>'
+'</div>');$lightbox.css({display:'none',position:'fixed',top:0,right:0,bottom:0,left:0,'z-index':1000001});$lightbox.click(function(e){if($(e.target).closest('.lightbox-modal').length==0){methods.destroy();}})
$('.icon-modal-close',$lightbox).click(function(){methods.destroy();});$('body').append($lightbox);}},append:function(html){var $modal=$('.lightbox-modal');$modal.append(html);if($('iframe',$modal).length>0){$('iframe',$modal).load(function(){var $signInModal=$('.signin-modal',$modal),$iframeBody=$('iframe',$modal).contents().find('body'),iframeWidth=$iframeBody.width(),iframeHeight=$iframeBody.height();$signInModal.css({width:iframeWidth,height:iframeHeight});methods.center();$modal.css('opacity',1);});}else{setTimeout(function(){methods.center();$modal.css('opacity',1);},50);}},open:function(){$('.lightbox').fadeIn(100);},destroy:function(){$('.lightbox').fadeOut(100).remove();},center:function(){var $modal=$('.lightbox-modal');$modal.css({'margin-top':'-'+$modal.height()/2+'px','margin-left':'-'+$modal.width()/2+'px'});}};allmusic.lightbox=function(options){var instance=this;if(options){settings=$.extend(defaults,options);}
methods.init.call(instance);instance=$.extend(instance,methods,settings);};})(jQuery);
;$(document).ready(function(){if($.browser.msie){$('input[type="text"][placeholder], textarea[placeholder]').each(function(){var obj=$(this);$(obj[0].form).submit(function(){if(obj.hasClass('iePlaceHolder')&&(obj.value==obj.attr('placeholder'))){obj.val('');obj.css('color','#000000');}});if(obj.attr('placeholder')!=''){obj.addClass('iePlaceHolder');if(obj.attr('type')!='password'){obj.val(obj.attr('placeholder'));obj.css('color','#989898');}}});$('.iePlaceHolder').focus(function(){var obj=$(this);if(obj.val()==obj.attr('placeholder')){obj.val('');obj.css('color','#000000');}});$('.iePlaceHolder').blur(function(){var obj=$(this);if($.trim(obj.val())==''){obj.val(obj.attr('placeholder'));obj.css('color','#989898');}});$('input[type="password"][placeholder]').each(function(){var $this=$(this);var newTextElement=document.createElement('input');newTextElement.setAttribute('type','text');var attributes=$this.prop("attributes");$.each(attributes,function(){if(this.name!=='type'){newTextElement.setAttribute(this.name,this.value);}});newTextElement=$(newTextElement);newTextElement.addClass('iePlaceHolder');newTextElement.value='';newTextElement.val($this.attr('placeholder'));newTextElement.css('color','#989898');newTextElement.focus(function(){handleTextFocus($(this));});newTextElement.blur(function(){handleTextBlur($(this));});$this.replaceWith(newTextElement);});function handleTextFocus($el){if($el.val()==$el.attr('placeholder')){$el.val('');makeInputPassword($el);}}
function handleTextBlur($el){if($el.val()==''){$el.val($el.attr('placeholder'));}}
function makeInputPassword($el){var newPasswordInput=document.createElement('input');newPasswordInput.setAttribute('type','password');var attributes=$el.prop("attributes");$.each(attributes,function(){if(this.name!=='type'){newPasswordInput.setAttribute(this.name,this.value);}});newPasswordInput=$(newPasswordInput);newPasswordInput.val('');newPasswordInput.css('color','#000000');newPasswordInput.blur(function(){handlePasswordBlur($(this));});$el.replaceWith(newPasswordInput);newPasswordInput.focus();}
function handlePasswordBlur($el){if($el.val()==''){var newTextInput=document.createElement('input');newTextInput.setAttribute('type','text');var attributes=$el.prop("attributes");$.each(attributes,function(){if(this.name!=='type'){newTextInput.setAttribute(this.name,this.value);}});newTextInput=$(newTextInput);newTextInput.val($el.attr('placeholder'));newTextInput.css('color','#989898');newTextInput.blur(function(){handleTextBlur($(this));});newTextInput.focus(function(){handleTextFocus($(this));});$el.replaceWith(newTextInput);}}}});

jQuery.fn.sortElements=(function(){var sort=[].sort;return function(comparator,getSortable){getSortable=getSortable||function(){return this;};var placements=this.map(function(){var sortElement=getSortable.call(this),parentNode=sortElement.parentNode,nextSibling=parentNode.insertBefore(document.createTextNode(''),sortElement.nextSibling);return function(){if(parentNode===this){throw new Error("You can't sort elements if any one is a descendant of another.");}
parentNode.insertBefore(this,nextSibling);parentNode.removeChild(nextSibling);};});return sort.call(this,comparator).each(function(i){placements[i].call(getSortable.call(this));});};})();
;var allmusic=allmusic||{};(function($){var defaults={};var settings={};var methods={init:function(){if($('.lightbox').length==0){var classes='lightbox';if(settings['class']){classes+=' '+settings['class'];}
var $lightbox=$('<div class="'+classes+'">'
+'    <div class="lightbox-modal">'
+'        <div class="sprite icon-modal-close"></div>'
+'    </div>'
+'</div>');$lightbox.css({display:'none',position:'fixed',top:0,right:0,bottom:0,left:0,'z-index':1000001});$lightbox.click(function(e){if($(e.target).closest('.lightbox-modal').length==0){methods.destroy();}})
$('.icon-modal-close',$lightbox).click(function(){methods.destroy();});$('body').append($lightbox);}},append:function(html){var $modal=$('.lightbox-modal');$modal.append(html);if($('iframe',$modal).length>0){$('iframe',$modal).load(function(){var $signInModal=$('.signin-modal',$modal),$iframeBody=$('iframe',$modal).contents().find('body'),iframeWidth=$iframeBody.width(),iframeHeight=$iframeBody.height();$signInModal.css({width:iframeWidth,height:iframeHeight});methods.center();$modal.css('opacity',1);});}else{setTimeout(function(){methods.center();$modal.css('opacity',1);},50);}},open:function(){$('.lightbox').fadeIn(100);},destroy:function(){$('.lightbox').fadeOut(100).remove();},center:function(){var $modal=$('.lightbox-modal');$modal.css({'margin-top':'-'+$modal.height()/2+'px','margin-left':'-'+$modal.width()/2+'px'});}};allmusic.lightbox=function(options){var instance=this;if(options){settings=$.extend(defaults,options);}
methods.init.call(instance);instance=$.extend(instance,methods,settings);};})(jQuery);
;var allmusic=allmusic||{};(function($){var lightbox;var defaults={width:400,height:400,images:[]};var settings={};var methods={init:function(options){if(options){settings=$.extend(defaults,options);}
lightbox=new allmusic.lightbox();lightbox.append('<div class="image-gallery">'
+'    <div class="button previous"><span class="sprite2 btn-arrow-left"></span></div>'
+'    <div class="button next"><span class="sprite2 btn-arrow-right"></span></div>'
+'    <ul class="images"></ul>'
+'    <ul class="author"></ul>'
+'    <div class="pagination">'
+'        <span class="current-image"></span> of <span class="image-count"></span>'
+'    </div>'
+'</div>');var $gallery=$('.lightbox .image-gallery');$gallery.on('click','.button.previous',function(){methods.previousImage();});$gallery.on('click','.button.next, .images > li',function(){methods.nextImage();});},open:function(start){start=start||0;var total=settings.images.length;if(total>0){var $gallery=$('.lightbox .image-gallery');for(var i in settings.images){$('.images',$gallery).append('<li><img src="'+settings.images[i].url+'" alt=""></li>');if((settings.images[i].author!=''&&settings.images[i].author!=null)||(settings.images[i].copyrightOwner!=''&&settings.images[i].copyrightOwner!=null)){if(settings.images[i].author!=''&&settings.images[i].author!=null){author_text=settings.images[i].author;}else{author_text=settings.images[i].copyrightOwner;}
if(author_text.length>72){author='<li title="'+author_text+'">photo credit: '+author_text.substr(0,72)+'&hellip;</li>';}else{author='<li title="'+author_text+'">photo credit: '+author_text+'</li>';}}else{author='<li>&nbsp;</li>'}
$('.author',$gallery).append(author);}
if(total>1){$('.button.previous, .button.next',$gallery).show();$('.pagination .current-image',$gallery).text(start+1);$('.pagination .image-count',$gallery).text(total);$('.pagination',$gallery).show();$('li',$gallery).css('cursor','pointer');}
$('.images li img',$gallery).css({'max-width':settings.width+'px','max-height':settings.height+'px'});$('.images li',$gallery).width(settings.width).height(settings.height).eq(start).addClass('current');$('.author li',$gallery).eq(start).addClass('current');}
lightbox.open();},nextImage:function(){var currentIdx=$('.lightbox .images li.current').removeClass('current').index();$('.lightbox .author li.current').removeClass('current').index();var nextIdx=(currentIdx+1<$('.lightbox .images li').length)?currentIdx+1:0;$('.lightbox .images li').eq(nextIdx).addClass('current');$('.lightbox .author li').eq(nextIdx).addClass('current');$('.lightbox .image-gallery .pagination .current-image').text(nextIdx+1);},previousImage:function(){var currentIdx=$('.lightbox .images li.current').removeClass('current').index();$('.lightbox .author li.current').removeClass('current').index();var previousIdx=(currentIdx-1>=0)?currentIdx-1:$('.lightbox .images li').length-1;$('.lightbox .images li').eq(previousIdx).addClass('current');$('.lightbox .author li').eq(previousIdx).addClass('current');$('.lightbox .image-gallery .pagination .current-image').text(previousIdx+1);}};allmusic.imageGallery=function(options){var instance=this;if(options){settings=$.extend(defaults,options);}
methods.init.call(instance);instance=$.extend(instance,methods,settings);};})(jQuery);$(function(){$('.media-gallery-image.thumbnail, .artist-image .image-container.has-gallery').click(function(){var photos=[];$('.media-gallery-image').each(function(){if($(this).data('large')){photos.push($(this).data('large'));}});if(photos.length>0){var imageGallery=new allmusic.imageGallery({images:photos});imageGallery.open($(this).index());}});$('.image-container[data-large]').click(function(){var photos=[];if($(this).data('large')){photos.push($(this).data('large'));}
if(photos.length>0){var imageGallery=new allmusic.imageGallery({width:500,height:500,images:photos});imageGallery.open();}});$('.image-container[data-large], artist-image .image-container.has-gallery').on({mouseenter:function(){var $imgContainer=$(this);setTimeout(function(){if($imgContainer.is(':hover')){$('.enlarge-overlay',$imgContainer).fadeIn('fast');}},400);},mouseleave:function(){$('.enlarge-overlay').fadeOut('fast');}});});
;(function($){var methods={init:function(){var $collapsible=$(this);var $content=$('.collapsible-content',$collapsible);if($collapsible.data('collapsible')!='initialized'){var collapsedHeight=$collapsible.height();if(collapsedHeight/$content.height()>0.66){$collapsible.removeAttr('data-collapsible');}else{$collapsible.data('collapsible','initialized').data('collapsedHeight',collapsedHeight).addClass('collapsed');$collapsible.append('<div class="collapsible-toggle">'
+'    <div class="collapsible-text">'
+'        <a href="#">'
+'            <span class="collapsible-label">read more</span>'
+'            <span class="collapsible-arrow"></span>'
+'        </a>'
+'    </div>'
+'</div>');var $h2=$collapsible.siblings('.heading').find('h2');if($h2.length>0){$('<a href="#" class="collapsible-heading-toggle" title="read more">[+]</a>').click(function(e){e.preventDefault();methods.toggle.call($(this).closest('.heading').siblings('[data-collapsible]'));}).insertAfter($h2);}
$('.collapsible-text a',$collapsible).click(function(e){e.preventDefault();});$('.collapsible-toggle',$collapsible).click(function(){methods.toggle.call($(this).closest('[data-collapsible]'));});if(Cookie.read('autoExpand')){$collapsible.removeClass('collapsed').css('height','auto').find('.collapsible-label').text('collapse');$collapsible.siblings('.heading').find('.collapsible-heading-toggle').text('[-]').attr('title','collapse');}}}},toggle:function(){var $collapsible=$(this);var newHeight=null;var newPadding=null;if($collapsible.is('.collapsed')){newHeight=$('.collapsible-content',$collapsible).height();newPadding='0px';Cookie.create('autoExpand','1',30);}else{newHeight=$collapsible.data('collapsedHeight');newPadding='35px';Cookie.erase('autoExpand');}
$('.collapsible-toggle',$collapsible).css({'padding-top':newPadding});$collapsible.toggleClass('collapsed');$collapsible.animate({height:newHeight},500,function(){var $collapsible=$(this);var newText=($collapsible.is('.collapsed'))?'read more':'collapse';var newHeadingText=($collapsible.is('.collapsed'))?'[+]':'[-]';$('.collapsible-label',$collapsible).text(newText);$collapsible.siblings('.heading').find('.collapsible-heading-toggle').text(newHeadingText).attr('title',newText);});}};$.fn.collapsible=function(){this.each(function(){methods.init.call(this);});};$('[data-collapsible]').collapsible();$(document).ajaxSuccess(function(){$('[data-collapsible]').collapsible();});})(jQuery);
;$.fn.mediaGallery=function(){return this.each(function(){var obj=this;var mediaSelect=$(obj).children(".media-gallery-banner").children(".media-gallery-type").children("a");var photoContent=$(obj).children(".media-gallery-content.photos");var videoContent=$(obj).children(".media-gallery-content.videos");var photoControls=$(obj).children(".media-gallery-content.photos").children(".media-gallery-controls").children(".media-gallery-control");var videoControls=$(obj).children(".media-gallery-content.videos").children(".media-gallery-controls").children(".media-gallery-control");$(obj).children(".media-gallery-content.photos").children(".media-gallery-image").each(function(){var lrgSrc=$(this).attr("data-large");$(this).find("img").attr("data-large",lrgSrc);});$(mediaSelect).click(function(e){e.preventDefault();$(this).siblings(".active").removeClass("active");$(this).addClass("active");var show=$(this).attr('href');show="."+show.substr(1);$(obj).children(".media-gallery-content:visible").hide();$(obj).children(show).show();});$(photoControls).click(function(e){e.preventDefault();$(this).siblings(".active").removeClass("active");$(this).addClass("active");var start=$(photoControls).index($(this))*4;var end=start+3;$(photoContent).children(".media-gallery-image:visible").hide();$(photoContent).children(".media-gallery-image").slice(start,end+1).show();$(photoContent).children(".media-gallery-image:visible").children("img").each(function(){var newSrc=$(this).attr("data-src");$(this).attr("src",newSrc);});});$(videoControls).click(function(e){e.preventDefault();$(this).siblings(".active").removeClass("active");$(this).addClass("active");var start=$(videoControls).index($(this))*4;var end=start+3;$(videoContent).children(".media-gallery-image:visible").hide();$(videoContent).children(".media-gallery-image").slice(start,end+1).show();$(photoContent).children(".media-gallery-image:visible").children("img").each(function(){var newSrc=$(this).attr("data-src");$(this).attr("src",newSrc);});});});};$(function(){$(".media-gallery").mediaGallery();});
;$(function(){$(document).delegate('th.sortable > a','click',function(e){e.preventDefault();var $table=$(this).closest('table');var $header=$(this).closest('th');var index=$header.index();var direction=!$header.hasClass('desc')?'desc':'asc';var defSort=$header.data('sort-default');if(!$header.hasClass('asc')&&!$header.hasClass('desc')&&defSort!=undefined){direction=defSort;}
var factor=(direction=='asc')?1:-1;var $column=$('tr',$table).find('td:eq('+index+')');$column.sortElements(function(a,b){var retVal;var valueA=$(a).data('sort-value')||null;var valueB=$(b).data('sort-value')||null;if(isNaN(valueA)&&isNaN(valueB)){valueA=valueA.toLowerCase();valueB=valueB.toLowerCase();}else if(!isNaN(valueA)&&!isNaN(valueB)){valueA=Number(valueA);valueB=Number(valueB);}
if(valueA==null){retVal=1;}else if(valueB==null){retVal=-1;}else{retVal=valueA>valueB?factor*1:factor*-1;}
return retVal;},function(){return this.parentNode;});$('th.sortable').removeClass('asc desc');$header.addClass(direction);$('tbody tr',$table).removeClass('bgwhite bgdark');$('tbody tr:visible:odd',$table).addClass('bgdark');$('tbody tr:visible:even',$table).addClass('bgwhite');});});
;function trim(stringToTrim){return stringToTrim.replace(/^\s+|\s+$/g,"");}
$(function(){$('.artist-compositions tbody tr').removeClass('bgwhite bgdark');$('.artist-compositions tbody tr:visible:odd').addClass('bgdark');var numOfVisibleRows=$('.artist-compositions tbody tr:visible').length;if(numOfVisibleRows==0){$('.artist-compositions .no-results').show();$('.artist-compositions tbody tr:visible:even').addClass('bgwhite');}
else{$('.artist-compositions .no-results').hide();$('.artist-compositions tbody tr:visible:even').addClass('bgwhite');$('.artist-compositions tbody tr:visible:odd').addClass('bgdark');}
$('.dropdown a span').click(function(e){e.preventDefault();$('.dropdown dd').hide();$('dd',$(this).closest('.dropdown')).show();});$('.dropdown li a').click(function(e){e.preventDefault();var text=$(this).text();var link=$(this).closest('li').attr('data-link');$('dt a span',$(this).closest('.dropdown')).html(text);$('dt a span',$(this).closest('.dropdown')).attr('data-link',link);$('dd span',$(this).closest('.dropdown')).html(text);$(this).closest('dd').hide();$('tbody tr','.artist-compositions').show();var genre_filter=$('dl.dropdown-genre dt a span').attr('data-link');var work_filter=$('dl.dropdown-work dt a span').attr('data-link');if(genre_filter!='ALL'){$('.artist-compositions tbody tr').not('[data-objectgenre~="'+genre_filter+'"]').hide();}
if(work_filter!='ALL'){$('.artist-compositions tbody tr').not('[data-objectwork~="'+work_filter+'"]').hide();}
$('.artist-compositions tbody tr').removeClass('bgwhite bgdark');var numOfVisibleRows=$('.artist-compositions tbody tr:visible').length;if(numOfVisibleRows==0){$('.artist-compositions .no-results').show();$('.artist-compositions tbody tr:visible:even').addClass('bgwhite');}
else{$('.artist-compositions .no-results').hide();$('.artist-compositions tbody tr:visible:even').addClass('bgwhite');$('.artist-compositions tbody tr:visible:odd').addClass('bgdark');}});$(document).bind('click',function(e){var $clicked=$(e.target);if(!$clicked.parents().hasClass("dropdown"))
$(".dropdown dd").hide();});});
;function trim(stringToTrim){return stringToTrim.replace(/^\s+|\s+$/g,"");}
$(function(){$('.artist-credits tbody tr').removeClass('bgwhite bgdark');$('.artist-credits tbody tr:visible:odd').addClass('bgdark');var numOfVisibleRows=$('.artist-credits tbody tr:visible').length;if(numOfVisibleRows==0){$('.artist-credits .no-results').show();$('.artist-credits tbody tr:visible:even').addClass('bgwhite');}
else{$('.artist-credits .no-results').hide();$('.artist-credits tbody tr:visible:even').addClass('bgwhite');$('.artist-credits tbody tr:visible:odd').addClass('bgdark');}
$('.dropdown a span').click(function(e){e.preventDefault();$('.dropdown dd').hide();$('dd',$(this).closest('.dropdown')).show();});$('.dropdown li a').click(function(e){e.preventDefault();var text=$(this).text();var link=$(this).closest('li').attr('data-link');$('dt a span',$(this).closest('.dropdown')).html(text);$('dt a span',$(this).closest('.dropdown')).attr('data-link',link);$('dd span',$(this).closest('.dropdown')).html(text);$(this).closest('dd').hide();$('tbody tr','.artist-credits').show();var credit_filter=$('dl.dropdown-credit dt a span').attr('data-link');if(credit_filter!='ALL'){$('.artist-credits tbody tr').not('[data-objectcredit~="'+credit_filter+'"]').hide();}
$('.artist-credits tbody tr').removeClass('bgwhite bgdark');var numOfVisibleRows=$('.artist-credits tbody tr:visible').length;if(numOfVisibleRows==0){$('.artist-credits .no-results').show();$('.artist-credits tbody tr:visible:even').addClass('bgwhite');}
else{$('.artist-credits .no-results').hide();$('.artist-credits tbody tr:visible:even').addClass('bgwhite');$('.artist-credits tbody tr:visible:odd').addClass('bgdark');}});$(document).bind('click',function(e){var $clicked=$(e.target);if(!$clicked.parents().hasClass("dropdown"))
$(".dropdown dd").hide();});});
;$(function(){$('.video-grid img').not('.no-image').load(function(){var $img=$(this);var height=$img.height();var parentHeight=$img.parent().height();var offset=(height-parentHeight)/2;if(offset>0){$img.css('top','-'+offset+'px');}else{$img.parent().css('background-color','black');}});$('.video-cell').click(function(){var $this=$(this);var id=$this.data('id');var provider=$this.data('provider').toLowerCase().replace(/[^a-z]/,'-');var title=$this.data('title');var width=600;var height=350;if(provider=='vevo'){height=425;}
var features='toolbar=0,scrollbars=0,location=0,status=0,menubar=0,directories=0,'
+'resizable=0,'+'width='+width+',height='+height;var popup=window.open('/video/'+provider+'/'+id+'/'+title,'',features);popup.focus();});});
;$(function(){if($('#sidebar dl.details dd.metaids .active').length>0){$('#sidebar dl.details dd.metaids').addClass('open');}
$('#sidebar dl.details dd.metaids div > a').click(function(e){e.preventDefault();$(this).closest('dd').toggleClass('open');});});
;(function($){var options={};var methods={init:function(options){return this.each(function(){var $this=$(this);if(Cookie.read('viewPref')!='condensed-view'){$('.list-view',$this).children('span').addClass('active');methods.flipView('list-view');}else{$('.condensed-view',$this).children('span').addClass('active');}
$('li',$this).click(function(){var $button=$(this);if($button.is('.active')===false){$button.children('span').addClass('active').end().siblings().children('span').removeClass('active');methods.flipView($button.attr('class'));}});});},flipView:function(view){var $table=$('.album-table');if(view.toLowerCase().indexOf("condensed-view")>=0){$table.removeClass('list-view');$table.addClass('condensed-view');Cookie.create('viewPref','condensed-view',30);}else{$table.removeClass('condensed-view');$table.addClass('list-view');Cookie.erase('viewPref');}}};$.fn.condenseToggle=function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments);}else{$.error('Method '+method+' does not exist on jQuery.condenseToggle');}};})(jQuery);$('.condense-toggle').condenseToggle();
